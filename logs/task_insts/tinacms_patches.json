[
  {
    "instance_id": "tinacms__tinacms.ac595220.5947",
    "repo": "tinacms__tinacms.ac595220",
    "base_commit": "ac59522053c71c713057c4c2b6ce610617bce85e",
    "patch": "diff --git a/packages/tinacms/src/toolkit/components/tina-ui.test.tsx b/packages/tinacms/src/toolkit/components/tina-ui.test.tsx\nindex 35efdf9..6a4b59e 100644\n--- a/packages/tinacms/src/toolkit/components/tina-ui.test.tsx\n+++ b/packages/tinacms/src/toolkit/components/tina-ui.test.tsx\n@@ -67,7 +67,7 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        app.getByLabelText('Show editing panel');\n+        app.getByLabelText('opens cms sidebar');\n       });\n     });\n     describe('when sidebar is false', () => {\n@@ -91,7 +91,7 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        const sidebarButton = app.queryByLabelText('Show editing panel');\n+        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n         expect(sidebarButton).toBeNull();\n       });\n     });\n@@ -118,7 +118,7 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        const sidebarButton = app.queryByLabelText('Show editing panel');\n+        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n         expect(sidebarButton).toBeNull();\n       });\n       it('does not remount children when cms is toggled', () => {\n@@ -165,9 +165,9 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        const sidebarButton = app.queryByLabelText('Show editing panel');\n+        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n         expect(sidebarButton).toBeNull();\n       });\n     });\n   });\n-});\n+});\n\\ No newline at end of file\ndiff --git a/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx b/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx\nindex e05646b..c02fd37 100644\n--- a/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx\n+++ b/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx\n@@ -245,7 +245,10 @@ const Sidebar = ({\n         <SidebarWrapper>\n           <EditButton />\n           <SidebarBody>\n-            <SidebarHeader isLocalMode={cms.api?.tina?.isLocalMode} />\n+            <SidebarHeader\n+              isLocalMode={cms.api?.tina?.isLocalMode}\n+              branchingEnabled={branchingEnabled}\n+            />\n             <FormsView loadingPlaceholder={sidebar.loadingPlaceholder} />\n             {activeScreen && (\n               <ScreenPluginModal\n@@ -364,7 +367,7 @@ const updateBodyDisplacement = ({\n   }\n };\n \n-const SidebarHeader = ({ isLocalMode }) => {\n+const SidebarHeader = ({ branchingEnabled, isLocalMode }) => {\n   const { toggleSidebarOpen, toggleMenu } = React.useContext(SidebarContext);\n \n   return (\n@@ -391,11 +394,10 @@ const SidebarHeader = ({ isLocalMode }) => {\n             <BranchPreviewButton />\n \n             <button\n-              type='button'\n               className='p-2 hover:bg-gray-100 transition-colors duration-150 ease-in-out rounded'\n               onClick={toggleSidebarOpen}\n-              title='Hide editing panel'\n-              aria-label='Hide editing panel'\n+              title='Close sidebar'\n+              aria-label='Close sidebar'\n             >\n               <PiSidebarSimpleLight className='h-6 w-auto text-gray-600' />\n             </button>\n@@ -444,79 +446,4 @@ const SidebarCollectionLink = ({\n       href={`${\n         tinaPreview ? `/${tinaPreview}/index.html#` : '/admin#'\n       }/collections/${collection.name}/~`}\n-      className='text-base tracking-wide text-gray-500 hover:text-blue-600 flex items-center opacity-90 hover:opacity-100'\n-    >\n-      <Icon className='mr-2 h-6 opacity-80 w-auto' />{' '}\n-      {collection.label ? collection.label : collection.name}\n-    </a>\n-  );\n-};\n-\n-const EditButton = ({}) => {\n-  const { displayState, toggleSidebarOpen } = React.useContext(SidebarContext);\n-\n-  return (\n-    <Button\n-      rounded='right'\n-      variant='accent'\n-      size='custom'\n-      onClick={toggleSidebarOpen}\n-      className={`z-chrome absolute top-6 right-0 translate-x-full text-sm h-10 px-3 transition-all duration-300 ${\n-        displayState !== 'closed'\n-          ? 'opacity-0 ease-in pointer-events-none'\n-          : 'ease-out pointer-events-auto'\n-      }`}\n-      title='Show editing panel'\n-      aria-label='Show editing panel'\n-    >\n-      <PiSidebarSimpleLight className='h-6 w-auto' />\n-    </Button>\n-  );\n-};\n-\n-const SidebarWrapper = ({ children }) => {\n-  const { displayState, sidebarWidth, resizingSidebar } =\n-    React.useContext(SidebarContext);\n-\n-  return (\n-    <div\n-      className={`fixed top-0 left-0 h-dvh z-base ${\n-        displayState === 'closed' ? 'pointer-events-none' : ''\n-      }`}\n-    >\n-      <div\n-        className={`relative h-dvh transform flex ${\n-          displayState !== 'closed' ? '' : '-translate-x-full'\n-        } ${\n-          resizingSidebar\n-            ? 'transition-none'\n-            : displayState === 'closed'\n-              ? 'transition-all duration-300 ease-in'\n-              : displayState === 'fullscreen'\n-                ? 'transition-all duration-150 ease-out'\n-                : 'transition-all duration-300 ease-out'\n-        }`}\n-        style={{\n-          width: displayState === 'fullscreen' ? '100vw' : `${sidebarWidth}px`,\n-          maxWidth:\n-            displayState === 'fullscreen' ? '100vw' : 'calc(100vw - 8px)',\n-          minWidth: '360px',\n-        }}\n-      >\n-        {children}\n-      </div>\n-    </div>\n-  );\n-};\n-\n-const SidebarBody = ({ children }) => {\n-  return (\n-    <div\n-      className={\n-        'relative left-0 w-full h-full flex flex-col items-stretch bg-gray-50 border-r border-gray-200 overflow-hidden'\n-      }\n-    >\n-      {children}\n-    </div>\n-  );\n-};\n+      className='text-base tracking-wide text-gray-500 hover:text-blue-600 flex items-center opacity-90\n\\ No newline at end of file\ndiff --git a/packages/tinacms/src/toolkit/styles/button.tsx b/packages/tinacms/src/toolkit/styles/button.tsx\nindex 272d419..4b7cfba 100644\n--- a/packages/tinacms/src/toolkit/styles/button.tsx\n+++ b/packages/tinacms/src/toolkit/styles/button.tsx\n@@ -3,14 +3,7 @@ import { cn } from '../../lib/utils';\n \n export interface ButtonProps\n   extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n-  variant?:\n-    | 'primary'\n-    | 'secondary'\n-    | 'white'\n-    | 'ghost'\n-    | 'danger'\n-    | 'accent'\n-    | 'custom';\n+  variant?: 'primary' | 'secondary' | 'white' | 'ghost' | 'danger' | 'custom';\n   as?: React.ElementType;\n   href?: string;\n   target?: string;\n@@ -38,10 +31,9 @@ export const Button = ({\n   const variantClasses = {\n     primary: `shadow text-white bg-tina-orange-dark hover:bg-tina-orange focus:ring-tina-orange-dark border-0`,\n     secondary: `shadow text-gray-500 hover:tina-orange-dark bg-gray-50 hover:bg-white border border-gray-100`,\n-    white: `shadow text-gray-500 hover:tina-orange-dark bg-white hover:bg-gray-50 border border-gray-100`,\n-    ghost: `text-gray-500 hover:tina-orange-dark hover:shadow border border-transparent border-0 hover:border hover:border-gray-200 bg-transparent`,\n+    white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-100`,\n+    ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent border-0 hover:border hover:border-gray-200 bg-transparent`,\n     danger: `shadow text-white bg-red-500 hover:bg-red-600 focus:ring-red-500`,\n-    accent: `shadow text-white bg-orange-500 hover:bg-orange-600 focus:ring-orange-500`,\n     custom: '',\n   };\n   const state = busy ? `busy` : disabled ? `disabled` : `default`;\n@@ -96,7 +88,6 @@ export const IconButton = ({\n     secondary: `shadow text-gray-500 hover:text-blue-500 bg-gray-50 hover:bg-white border border-gray-200`,\n     white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-200`,\n     ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent hover:border-gray-200 bg-transparent`,\n-    accent: `shadow text-white bg-orange-500 hover:bg-orange-600 focus:ring-orange-500`,\n   };\n   const state = busy ? `busy` : disabled ? `disabled` : `default`;\n   const stateClasses = {\n@@ -124,4 +115,4 @@ export const IconButton = ({\n       {children}\n     </button>\n   );\n-};\n+};\n\\ No newline at end of file\n",
    "problem_statement": "",
    "FAIL_TO_PASS": "[]",
    "PASS_TO_PASS": "[]"
  },
  {
    "instance_id": "tinacms__tinacms.ac595220.6020",
    "repo": "tinacms__tinacms.ac595220",
    "base_commit": "ac59522053c71c713057c4c2b6ce610617bce85e",
    "patch": "diff --git a/packages/@tinacms/graphql/tests/document-update-mutation/expected-snapshots/rename-document-content.md b/packages/@tinacms/graphql/tests/document-update-mutation/expected-snapshots/rename-document-content.md\ndeleted file mode 100644\nindex 804ee8a..0000000\n--- a/packages/@tinacms/graphql/tests/document-update-mutation/expected-snapshots/rename-document-content.md\n+++ /dev/null\n@@ -1,10 +0,0 @@\n----\n-title: Original Title\n-genre: drama\n-rating: 7\n----\n-\n-\n-This is the original content for Mr Bob Northwind's post about his company Northwind.\n-\n-The post talks about the company's growth and success in the market.\ndiff --git a/packages/@tinacms/graphql/tests/document-update-mutation/expected-snapshots/rename-document-node.json b/packages/@tinacms/graphql/tests/document-update-mutation/expected-snapshots/rename-document-node.json\ndeleted file mode 100644\nindex 9c817c6..0000000\n--- a/packages/@tinacms/graphql/tests/document-update-mutation/expected-snapshots/rename-document-node.json\n+++ /dev/null\n@@ -1,39 +0,0 @@\n-{\n-  \"data\": {\n-    \"updateDocument\": {\n-      \"_values\": {\n-        \"_collection\": \"post\",\n-        \"_template\": \"post\",\n-        \"title\": \"Original Title\",\n-        \"genre\": \"drama\",\n-        \"rating\": 7,\n-        \"body\": {\n-          \"type\": \"root\",\n-          \"children\": [\n-            {\n-              \"type\": \"p\",\n-              \"children\": [\n-                {\n-                  \"type\": \"text\",\n-                  \"text\": \"This is the original content for Mr Bob Northwind's post about his company Northwind.\"\n-                }\n-              ]\n-            },\n-            {\n-              \"type\": \"p\",\n-              \"children\": [\n-                {\n-                  \"type\": \"text\",\n-                  \"text\": \"The post talks about the company's growth and success in the market.\"\n-                }\n-              ]\n-            }\n-          ]\n-        }\n-      },\n-      \"_sys\": {\n-        \"title\": \"\"\n-      }\n-    }\n-  }\n-}\n\\ No newline at end of file\ndiff --git a/packages/@tinacms/graphql/tests/document-update-mutation/index.test.ts b/packages/@tinacms/graphql/tests/document-update-mutation/index.test.ts\nindex 19eb75e..d06b466 100644\n--- a/packages/@tinacms/graphql/tests/document-update-mutation/index.test.ts\n+++ b/packages/@tinacms/graphql/tests/document-update-mutation/index.test.ts\n@@ -44,58 +44,16 @@ it('updates document and validates bridge writes', async () => {\n   });\n \n   // Validate GraphQL response\n-  expect(format(result)).toMatchFileSnapshot(\n-    'expected-snapshots/update-document-node.json'\n-  );\n+  expect(format(result)).toMatchFileSnapshot('update-document-node.json');\n \n   // Validate Bridge write operations\n   const writes = bridge.getWrites();\n   expect(writes.size).toBeGreaterThan(0);\n   expect(bridge.getWrite('posts/in.md')).toMatchFileSnapshot(\n-    'expected-snapshots/update-document-content.md'\n+    'update-document-content.md'\n   );\n });\n \n-const renameDocumentMutation = `\n-  mutation {\n-    updateDocument(\n-      collection: \"post\",\n-      relativePath: \"in.md\",\n-      params: {\n-        relativePath: \"renamed-by-bob.md\"\n-      }\n-    ) {\n-      ...on Document { _values, _sys { title } }\n-    }\n-  }\n-`;\n-\n-it('renames document using updateDocument mutation', async () => {\n-  const { query, bridge } = await setupMutation(__dirname, config);\n-\n-  // Execute mutation to rename the document\n-  const result = await query({\n-    query: renameDocumentMutation,\n-    variables: {},\n-  });\n-\n-  // Validate GraphQL response\n-  expect(format(result)).toMatchFileSnapshot(\n-    'expected-snapshots/rename-document-node.json'\n-  );\n-\n-  // Validate Bridge write operations\n-  const writes = bridge.getWrites();\n-  expect(writes.size).toBeGreaterThan(0);\n-  expect(bridge.getWrite('posts/renamed-by-bob.md')).toMatchFileSnapshot(\n-    'expected-snapshots/rename-document-content.md'\n-  );\n-\n-  // Validate that original file was deleted\n-  const deletes = bridge.getDeletes();\n-  expect(deletes).toContain('posts/in.md');\n-});\n-\n const updatePostMutation = `\n   mutation {\n     updatePost(\n@@ -136,14 +94,12 @@ it('updates document using updatePost mutation', async () => {\n   });\n \n   // Validate GraphQL response\n-  expect(format(result)).toMatchFileSnapshot(\n-    'expected-snapshots/update-post-node.json'\n-  );\n+  expect(format(result)).toMatchFileSnapshot('update-post-node.json');\n \n   // Validate Bridge write operations\n   const writes = bridge.getWrites();\n   expect(writes.size).toBeGreaterThan(0);\n   expect(bridge.getWrite('posts/in.md')).toMatchFileSnapshot(\n-    'expected-snapshots/update-post-content.md'\n+    'update-post-content.md'\n   );\n-});\n+});\n\\ No newline at end of file\ndiff --git a/packages/@tinacms/graphql/tests/util.ts b/packages/@tinacms/graphql/tests/util.ts\nindex 0be935f..52f15ad 100644\n--- a/packages/@tinacms/graphql/tests/util.ts\n+++ b/packages/@tinacms/graphql/tests/util.ts\n@@ -18,8 +18,6 @@ class OutputBridge extends FilesystemBridge {\n class MemoryCaptureBridge extends FilesystemBridge {\n   private writes: Map<string, string> = new Map();\n \n-  private deletes: string[] = [];\n-\n   // Read operations continue to use filesystem\n   async get(filepath: string): Promise<string> {\n     return super.get(filepath);\n@@ -38,15 +36,6 @@ class MemoryCaptureBridge extends FilesystemBridge {\n   getWrite(filepath: string): string | undefined {\n     return this.writes.get(filepath);\n   }\n-\n-  // Intercept delete operations, prevent them as they will prevent running tests twice.\n-  async delete(filepath: string) {\n-    this.deletes.push(filepath);\n-  }\n-\n-  getDeletes(): string[] {\n-    return [...this.deletes];\n-  }\n }\n \n const dataSchema = z.object({\n@@ -141,4 +130,4 @@ export const loadVariables = async (\n \n export const format = (data: any) => {\n   return JSON.stringify(data, null, 2);\n-};\n+};\n\\ No newline at end of file\n",
    "problem_statement": "",
    "FAIL_TO_PASS": "[]",
    "PASS_TO_PASS": "[]"
  }
]