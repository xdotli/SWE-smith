{
    "cost": 0.22835500000000003,
    "rewrites": {
        "tinacms__tinacms.ac595220/packages/tinacms/src/toolkit/components/tina-ui.test.tsx": {
            "output": "import { act, cleanup, render } from '@testing-library/react';\nimport React, { useEffect } from 'react';\nimport { afterEach, beforeEach, describe, it, vi } from 'vitest';\nimport { TinaCMS } from '../tina-cms';\nimport { TinaCMSProvider } from './tina-cms-provider';\nimport { TinaUI } from './tina-ui';\n\n// Mock localStorage\nconst localStorageMock = (() => {\n  let store: Record<string, string> = {};\n  return {\n    getItem: vi.fn((key: string) => store[key] ?? null),\n    setItem: vi.fn((key: string, value: string) => {\n      store[key] = value;\n    }),\n    removeItem: vi.fn((key: string) => {\n      delete store[key];\n    }),\n    clear: vi.fn(() => {\n      store = {};\n    }),\n  };\n})();\n\nObject.defineProperty(window, 'localStorage', {\n  value: localStorageMock,\n});\n\n// Helper to create a fresh CMS instance for each test\nconst createCMS = (options: { enabled: boolean; sidebar: boolean }) => {\n  const cms = new TinaCMS(options);\n  cms.registerApi('admin', {\n    fetchCollections: () => [],\n  });\n  return cms;\n};\n\ndescribe('TinaUI', () => {\n  beforeEach(() => {\n    localStorageMock.clear();\n    vi.clearAllMocks();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('when the CMS is enabled', () => {\n    describe('when sidebar is true', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: true, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('renders the \"open cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: true, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        app.getByLabelText('opens cms sidebar');\n      });\n    });\n    describe('when sidebar is false', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: true, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('does not render the \"opens cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: true, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n        expect(sidebarButton).toBeNull();\n      });\n    });\n  });\n  describe('when the CMS is disabled', () => {\n    describe('when sidebar is true', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: false, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('does not render the \"opens cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: false, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n        expect(sidebarButton).toBeNull();\n      });\n      it('does not remount children when cms is toggled', () => {\n        const cms = createCMS({ enabled: false, sidebar: true });\n\n        const onMount = vi.fn();\n        function Child() {\n          useEffect(onMount, []);\n          return null;\n        }\n        render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <Child />\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        act(() => {\n          cms.enable();\n        });\n\n        expect(onMount).toHaveBeenCalledTimes(1);\n      });\n    });\n    describe('when sidebar is false', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: false, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('does not render the \"opens cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: false, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n        expect(sidebarButton).toBeNull();\n      });\n    });\n  });\n});",
            "output_extracted": "import { act, cleanup, render } from '@testing-library/react';\nimport React, { useEffect } from 'react';\nimport { afterEach, beforeEach, describe, it, vi } from 'vitest';\nimport { TinaCMS } from '../tina-cms';\nimport { TinaCMSProvider } from './tina-cms-provider';\nimport { TinaUI } from './tina-ui';\n\n// Mock localStorage\nconst localStorageMock = (() => {\n  let store: Record<string, string> = {};\n  return {\n    getItem: vi.fn((key: string) => store[key] ?? null),\n    setItem: vi.fn((key: string, value: string) => {\n      store[key] = value;\n    }),\n    removeItem: vi.fn((key: string) => {\n      delete store[key];\n    }),\n    clear: vi.fn(() => {\n      store = {};\n    }),\n  };\n})();\n\nObject.defineProperty(window, 'localStorage', {\n  value: localStorageMock,\n});\n\n// Helper to create a fresh CMS instance for each test\nconst createCMS = (options: { enabled: boolean; sidebar: boolean }) => {\n  const cms = new TinaCMS(options);\n  cms.registerApi('admin', {\n    fetchCollections: () => [],\n  });\n  return cms;\n};\n\ndescribe('TinaUI', () => {\n  beforeEach(() => {\n    localStorageMock.clear();\n    vi.clearAllMocks();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('when the CMS is enabled', () => {\n    describe('when sidebar is true', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: true, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('renders the \"open cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: true, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        app.getByLabelText('opens cms sidebar');\n      });\n    });\n    describe('when sidebar is false', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: true, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('does not render the \"opens cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: true, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n        expect(sidebarButton).toBeNull();\n      });\n    });\n  });\n  describe('when the CMS is disabled', () => {\n    describe('when sidebar is true', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: false, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('does not render the \"opens cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: false, sidebar: true });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n        expect(sidebarButton).toBeNull();\n      });\n      it('does not remount children when cms is toggled', () => {\n        const cms = createCMS({ enabled: false, sidebar: true });\n\n        const onMount = vi.fn();\n        function Child() {\n          useEffect(onMount, []);\n          return null;\n        }\n        render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <Child />\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        act(() => {\n          cms.enable();\n        });\n\n        expect(onMount).toHaveBeenCalledTimes(1);\n      });\n    });\n    describe('when sidebar is false', () => {\n      it('renders children', () => {\n        const cms = createCMS({ enabled: false, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI>\n              <span>something</span>\n            </TinaUI>\n          </TinaCMSProvider>\n        );\n\n        app.getByText('something');\n      });\n      it('does not render the \"opens cms\" sidebar button', () => {\n        const cms = createCMS({ enabled: false, sidebar: false });\n        const app = render(\n          <TinaCMSProvider cms={cms}>\n            <TinaUI />\n          </TinaCMSProvider>\n        );\n\n        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n        expect(sidebarButton).toBeNull();\n      });\n    });\n  });\n});",
            "cost": 0.050165
        },
        "tinacms__tinacms.ac595220/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx": {
            "output": "import { Transition, TransitionChild } from '@headlessui/react';\nimport {\n  BranchButton,\n  BranchPreviewButton,\n} from '@toolkit/plugin-branch-switcher';\nimport type { CloudConfigPlugin } from '@toolkit/react-cloud-config';\nimport { useCMS, useSubscribable } from '@toolkit/react-core';\nimport { type ScreenPlugin, ScreenPluginModal } from '@toolkit/react-screens';\nimport { Button } from '@toolkit/styles';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { BiMenu } from 'react-icons/bi';\nimport { ImFilesEmpty, ImUsers } from 'react-icons/im';\nimport type { IconType } from 'react-icons/lib';\nimport { PiSidebarSimpleLight } from 'react-icons/pi';\nimport type { SidebarState, SidebarStateOptions } from '../sidebar';\nimport { BillingWarning, LocalWarning } from './local-warning';\nimport { Nav } from './nav';\nimport { NavCloudLink } from './nav-components';\nimport { ResizeHandle } from './resize-handle';\nimport { FormsView } from './sidebar-body';\nimport { TinaIcon } from '@toolkit/icons';\n\nexport const SidebarContext = React.createContext<any>(null);\nexport const minPreviewWidth = 440;\nexport const minSidebarWidth = 360;\n\nconst LOCALSTATEKEY = 'tina.sidebarState';\nconst LOCALWIDTHKEY = 'tina.sidebarWidth';\n\nconst defaultSidebarWidth = 440;\nconst defaultSidebarPosition = 'displace';\nconst defaultSidebarState = 'open';\n\nexport interface SidebarProviderProps {\n  sidebar: SidebarState;\n  resizingSidebar: boolean;\n  setResizingSidebar: React.Dispatch<React.SetStateAction<boolean>>;\n  defaultWidth?: SidebarStateOptions['defaultWidth'];\n  position?: SidebarStateOptions['position'];\n  defaultState?: SidebarStateOptions['defaultState'];\n}\n\nexport function SidebarProvider({\n  position = defaultSidebarPosition,\n  resizingSidebar,\n  setResizingSidebar,\n  defaultWidth = defaultSidebarWidth,\n  sidebar,\n}: SidebarProviderProps) {\n  useSubscribable(sidebar);\n  const cms = useCMS();\n  if (!cms.enabled) return null;\n\n  return (\n    <Sidebar\n      // @ts-ignore\n      position={cms?.sidebar?.position || position}\n      // @ts-ignore\n      defaultWidth={cms?.sidebar?.defaultWidth || defaultWidth}\n      resizingSidebar={resizingSidebar}\n      setResizingSidebar={setResizingSidebar}\n      renderNav={\n        // @ts-ignore\n        typeof cms?.sidebar?.renderNav !== 'undefined'\n          ? // @ts-ignore\n            cms.sidebar.renderNav\n          : true\n      }\n      sidebar={sidebar}\n    />\n  );\n}\n\ninterface SidebarProps {\n  sidebar: SidebarState;\n  resizingSidebar: boolean;\n  setResizingSidebar: React.Dispatch<React.SetStateAction<boolean>>;\n  defaultWidth?: SidebarStateOptions['defaultWidth'];\n  defaultState?: SidebarStateOptions['defaultState'];\n  position?: SidebarStateOptions['position'];\n  renderNav?: boolean;\n}\n\nconst useFetchCollections = (cms) => {\n  return { collections: cms.api.admin.fetchCollections(), loading: false };\n};\n\nconst Sidebar = ({\n  sidebar,\n  defaultWidth,\n  // defaultState,\n  position,\n  renderNav,\n  resizingSidebar,\n  setResizingSidebar,\n}: SidebarProps) => {\n  const cms = useCMS();\n  const collectionsInfo = useFetchCollections(cms);\n\n  const [branchingEnabled, setBranchingEnabled] = React.useState(() =>\n    cms.flags.get('branch-switcher')\n  );\n  React.useEffect(() => {\n    cms.events.subscribe('flag:set', ({ key, value }) => {\n      if (key === 'branch-switcher') {\n        setBranchingEnabled(value);\n      }\n    });\n  }, [cms.events]);\n\n  const screens = cms.plugins.getType<ScreenPlugin>('screen');\n  const cloudConfigs = cms.plugins.getType<CloudConfigPlugin>('cloud-config');\n\n  useSubscribable(sidebar);\n  useSubscribable(screens);\n  const allScreens = screens.all();\n  const allConfigs = cloudConfigs.all();\n\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const [activeScreen, setActiveView] = useState<ScreenPlugin | null>(null);\n  const [sidebarWidth, setSidebarWidth] = React.useState<any>(defaultWidth);\n  const [formIsPristine, setFormIsPristine] = React.useState(true);\n  const activeScreens = allScreens.filter(\n    (screen) =>\n      screen.navCategory !== 'Account' ||\n      cms.api.tina?.authProvider?.getLoginStrategy() === 'UsernamePassword'\n  );\n\n  const setDisplayState = (value: 'closed' | 'fullscreen' | 'open') =>\n    cms.dispatch({ type: 'sidebar:set-display-state', value: value });\n  const displayState = cms.state.sidebarDisplayState;\n\n  /* Set sidebar open state and width to local values if available */\n  React.useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const localSidebarState = window.localStorage.getItem(LOCALSTATEKEY);\n      const localSidebarWidth = window.localStorage.getItem(LOCALWIDTHKEY);\n\n      if (localSidebarState !== null) {\n        setDisplayState(JSON.parse(localSidebarState));\n      }\n\n      if (localSidebarWidth !== null) {\n        setSidebarWidth(JSON.parse(localSidebarWidth));\n      }\n    }\n  }, []);\n\n  /* If the default sidebar state changes, update current state if no local value is found */\n  React.useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const localSidebarState = window.localStorage.getItem(LOCALSTATEKEY);\n\n      if (localSidebarState === null) {\n        setDisplayState(defaultSidebarState);\n      }\n    }\n  }, [defaultSidebarState]);\n\n  /* Update the local value of the sidebar state any time it updates, if the CMS is loaded */\n  React.useEffect(() => {\n    if (typeof window !== 'undefined' && cms.enabled) {\n      window.localStorage.setItem(LOCALSTATEKEY, JSON.stringify(displayState));\n    }\n  }, [displayState, cms]);\n\n  /* Update the local value of the sidebar width any time the user drags to resize it */\n  React.useEffect(() => {\n    if (resizingSidebar) {\n      window.localStorage.setItem(LOCALWIDTHKEY, JSON.stringify(sidebarWidth));\n    }\n  }, [sidebarWidth, resizingSidebar]);\n\n  const isTinaAdminEnabled =\n    cms.flags.get('tina-admin') === false ? false : true;\n\n  /**\n   * Only show ContentCreators when TinaAdmin is disabled\n   */\n  const contentCreators = isTinaAdminEnabled\n    ? []\n    : cms.plugins.getType('content-creator').all();\n\n  const toggleFullscreen = () => {\n    if (displayState === 'fullscreen') {\n      setDisplayState('open');\n    } else {\n      setDisplayState('fullscreen');\n    }\n  };\n\n  const toggleSidebarOpen = () => {\n    cms.dispatch({ type: 'toggle-edit-state' });\n  };\n\n  const toggleMenu = () => {\n    setMenuIsOpen((menuIsOpen) => !menuIsOpen);\n  };\n\n  // update the iframe body padding when the sidebar is resized or the display state changes\n  React.useEffect(() => {\n    const updateLayout = () => {\n      if (displayState === 'fullscreen') {\n        return;\n      }\n      updateBodyDisplacement({\n        position,\n        displayState,\n        sidebarWidth,\n        resizingSidebar,\n      });\n    };\n\n    updateLayout();\n\n    window.addEventListener('resize', updateLayout);\n\n    return () => {\n      window.removeEventListener('resize', updateLayout);\n    };\n  }, [displayState, position, sidebarWidth, resizingSidebar]);\n\n  return (\n    <SidebarContext.Provider\n      value={{\n        sidebarWidth,\n        setSidebarWidth,\n        displayState,\n        setDisplayState,\n        position,\n        toggleFullscreen,\n        toggleSidebarOpen,\n        resizingSidebar,\n        setResizingSidebar,\n        menuIsOpen,\n        setMenuIsOpen,\n        toggleMenu,\n        setActiveView,\n        formIsPristine,\n        setFormIsPristine,\n      }}\n    >\n      <>\n        <SidebarWrapper>\n          <EditButton />\n          <SidebarBody>\n            <SidebarHeader\n              isLocalMode={cms.api?.tina?.isLocalMode}\n              branchingEnabled={branchingEnabled}\n            />\n            <FormsView loadingPlaceholder={sidebar.loadingPlaceholder} />\n            {activeScreen && (\n              <ScreenPluginModal\n                screen={activeScreen}\n                close={() => setActiveView(null)}\n              />\n            )}\n          </SidebarBody>\n          <ResizeHandle />\n        </SidebarWrapper>\n        <Transition show={menuIsOpen} as='div'>\n          <TransitionChild\n            enter='transform transition-all ease-out duration-300'\n            enterFrom='opacity-0 -translate-x-full'\n            enterTo='opacity-100 translate-x-0'\n            leave='transform transition-all ease-in duration-200'\n            leaveFrom='opacity-100 translate-x-0'\n            leaveTo='opacity-0 -translate-x-full'\n          >\n            <div className='fixed left-0 top-0 z-overlay h-full transform'>\n              <Nav\n                isLocalMode={cms.api?.tina?.isLocalMode}\n                menuIsOpen\n                toggleMenu={toggleMenu}\n                showCollections={isTinaAdminEnabled}\n                collectionsInfo={collectionsInfo}\n                screens={activeScreens}\n                cloudConfigs={allConfigs}\n                contentCreators={contentCreators}\n                sidebarWidth={sidebarWidth}\n                RenderNavSite={({ view }) => (\n                  <SidebarSiteLink\n                    view={view}\n                    onClick={() => {\n                      setActiveView(view);\n                      setMenuIsOpen(false);\n                    }}\n                  />\n                )}\n                RenderNavCloud={({ config }) => (\n                  <NavCloudLink config={config} />\n                )}\n                RenderNavCollection={({ collection }) => (\n                  <SidebarCollectionLink\n                    onClick={() => {\n                      setMenuIsOpen(false);\n                    }}\n                    collection={collection}\n                  />\n                )}\n                AuthRenderNavCollection={({ collection }) => (\n                  <SidebarCollectionLink\n                    onClick={() => {\n                      setMenuIsOpen(false);\n                    }}\n                    collection={collection}\n                    Icon={ImUsers}\n                  />\n                )}\n              ></Nav>\n            </div>\n          </TransitionChild>\n          <TransitionChild\n            enter='ease-out duration-300'\n            enterFrom='opacity-0'\n            enterTo='opacity-80'\n            entered='opacity-80'\n            leave='ease-in duration-200'\n            leaveFrom='opacity-80'\n            leaveTo='opacity-0'\n          >\n            <div\n              onClick={() => {\n                setMenuIsOpen(false);\n              }}\n              className='fixed z-menu inset-0 bg-gradient-to-br from-gray-800 via-gray-900 to-black'\n            />\n          </TransitionChild>\n        </Transition>\n      </>\n    </SidebarContext.Provider>\n  );\n};\n\nconst updateBodyDisplacement = ({\n  position = 'overlay',\n  displayState,\n  sidebarWidth,\n  resizingSidebar,\n}) => {\n  const body = document.getElementsByTagName('body')[0];\n  const windowWidth = window.innerWidth;\n\n  if (position === 'displace') {\n    // Padding can't be animated smoothly, so we're using a delay to time the size change\n    body.style.transition = resizingSidebar\n      ? ''\n      : displayState === 'fullscreen'\n        ? 'padding 0ms 150ms'\n        : displayState === 'closed'\n          ? 'padding 0ms 0ms'\n          : 'padding 0ms 300ms';\n\n    if (displayState === 'open') {\n      const bodyDisplacement = Math.min(\n        sidebarWidth,\n        windowWidth - minPreviewWidth\n      );\n      body.style.paddingLeft = `${bodyDisplacement}px`;\n    } else {\n      body.style.paddingLeft = '0';\n    }\n  } else {\n    body.style.transition = '';\n    body.style.paddingLeft = '0';\n  }\n};\n\nconst SidebarHeader = ({ branchingEnabled, isLocalMode }) => {\n  const { toggleSidebarOpen, toggleMenu } = React.useContext(SidebarContext);\n\n  return (\n    <>\n      <div className='p-2 flex-grow-0 w-full bg-gray-50'>\n        {!isLocalMode && <BillingWarning />}\n\n        <div className='w-full flex justify-between items-center'>\n          <div className='flex overflow-hidden py-1'>\n            <button\n              className='p-2 hover:bg-gray-100 transition-colors duration-150 ease-in-out rounded'\n              onClick={toggleMenu}\n              title='Open navigation menu'\n              aria-label='Open navigation menu'\n            >\n              <BiMenu className='h-8 w-auto text-gray-600' />\n            </button>\n            <TinaIcon className='self-center h-10 min-w-10 w-auto text-orange-500 mr-2' />\n            <BranchButton className='overflow-hidden mr-2' />\n            <LocalWarning className='px-4' />\n          </div>\n\n          <div className='flex'>\n            <BranchPreviewButton />\n\n            <button\n              className='p-2 hover:bg-gray-100 transition-colors duration-150 ease-in-out rounded'\n              onClick={toggleSidebarOpen}\n              title='Close sidebar'\n              aria-label='Close sidebar'\n            >\n              <PiSidebarSimpleLight className='h-6 w-auto text-gray-600' />\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst SidebarSiteLink = ({\n  view,\n  onClick,\n}: {\n  view: ScreenPlugin;\n  onClick: () => void;\n}) => {\n  return (\n    <button\n      className='text-base tracking-wide text-gray-500 hover:text-blue-600 flex items-center opacity-90 hover:opacity-100'\n      value={view.name}\n      onClick={onClick}\n    >\n      <view.Icon className='mr-2 h-6 opacity-80 w-auto' /> {view.name}\n    </button>\n  );\n};\n\nconst SidebarCollectionLink = ({\n  Icon = ImFilesEmpty,\n  collection,\n  onClick,\n}: {\n  Icon?: IconType;\n  collection: {\n    label: string;\n    name: string;\n  };\n  onClick: () => void;\n}) => {\n  const cms = useCMS();\n  const tinaPreview = cms.flags.get('tina-preview') || false;\n  return (\n    <a\n      onClick={onClick}\n      href={`${\n        tinaPreview ? `/${tinaPreview}/index.html#` : '/admin#'\n      }/collections/${collection.name}/~`}\n      className='text-base tracking-wide text-gray-500 hover:text-blue-600 flex items-center opacity-90",
            "output_extracted": "import { Transition, TransitionChild } from '@headlessui/react';\nimport {\n  BranchButton,\n  BranchPreviewButton,\n} from '@toolkit/plugin-branch-switcher';\nimport type { CloudConfigPlugin } from '@toolkit/react-cloud-config';\nimport { useCMS, useSubscribable } from '@toolkit/react-core';\nimport { type ScreenPlugin, ScreenPluginModal } from '@toolkit/react-screens';\nimport { Button } from '@toolkit/styles';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { BiMenu } from 'react-icons/bi';\nimport { ImFilesEmpty, ImUsers } from 'react-icons/im';\nimport type { IconType } from 'react-icons/lib';\nimport { PiSidebarSimpleLight } from 'react-icons/pi';\nimport type { SidebarState, SidebarStateOptions } from '../sidebar';\nimport { BillingWarning, LocalWarning } from './local-warning';\nimport { Nav } from './nav';\nimport { NavCloudLink } from './nav-components';\nimport { ResizeHandle } from './resize-handle';\nimport { FormsView } from './sidebar-body';\nimport { TinaIcon } from '@toolkit/icons';\n\nexport const SidebarContext = React.createContext<any>(null);\nexport const minPreviewWidth = 440;\nexport const minSidebarWidth = 360;\n\nconst LOCALSTATEKEY = 'tina.sidebarState';\nconst LOCALWIDTHKEY = 'tina.sidebarWidth';\n\nconst defaultSidebarWidth = 440;\nconst defaultSidebarPosition = 'displace';\nconst defaultSidebarState = 'open';\n\nexport interface SidebarProviderProps {\n  sidebar: SidebarState;\n  resizingSidebar: boolean;\n  setResizingSidebar: React.Dispatch<React.SetStateAction<boolean>>;\n  defaultWidth?: SidebarStateOptions['defaultWidth'];\n  position?: SidebarStateOptions['position'];\n  defaultState?: SidebarStateOptions['defaultState'];\n}\n\nexport function SidebarProvider({\n  position = defaultSidebarPosition,\n  resizingSidebar,\n  setResizingSidebar,\n  defaultWidth = defaultSidebarWidth,\n  sidebar,\n}: SidebarProviderProps) {\n  useSubscribable(sidebar);\n  const cms = useCMS();\n  if (!cms.enabled) return null;\n\n  return (\n    <Sidebar\n      // @ts-ignore\n      position={cms?.sidebar?.position || position}\n      // @ts-ignore\n      defaultWidth={cms?.sidebar?.defaultWidth || defaultWidth}\n      resizingSidebar={resizingSidebar}\n      setResizingSidebar={setResizingSidebar}\n      renderNav={\n        // @ts-ignore\n        typeof cms?.sidebar?.renderNav !== 'undefined'\n          ? // @ts-ignore\n            cms.sidebar.renderNav\n          : true\n      }\n      sidebar={sidebar}\n    />\n  );\n}\n\ninterface SidebarProps {\n  sidebar: SidebarState;\n  resizingSidebar: boolean;\n  setResizingSidebar: React.Dispatch<React.SetStateAction<boolean>>;\n  defaultWidth?: SidebarStateOptions['defaultWidth'];\n  defaultState?: SidebarStateOptions['defaultState'];\n  position?: SidebarStateOptions['position'];\n  renderNav?: boolean;\n}\n\nconst useFetchCollections = (cms) => {\n  return { collections: cms.api.admin.fetchCollections(), loading: false };\n};\n\nconst Sidebar = ({\n  sidebar,\n  defaultWidth,\n  // defaultState,\n  position,\n  renderNav,\n  resizingSidebar,\n  setResizingSidebar,\n}: SidebarProps) => {\n  const cms = useCMS();\n  const collectionsInfo = useFetchCollections(cms);\n\n  const [branchingEnabled, setBranchingEnabled] = React.useState(() =>\n    cms.flags.get('branch-switcher')\n  );\n  React.useEffect(() => {\n    cms.events.subscribe('flag:set', ({ key, value }) => {\n      if (key === 'branch-switcher') {\n        setBranchingEnabled(value);\n      }\n    });\n  }, [cms.events]);\n\n  const screens = cms.plugins.getType<ScreenPlugin>('screen');\n  const cloudConfigs = cms.plugins.getType<CloudConfigPlugin>('cloud-config');\n\n  useSubscribable(sidebar);\n  useSubscribable(screens);\n  const allScreens = screens.all();\n  const allConfigs = cloudConfigs.all();\n\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const [activeScreen, setActiveView] = useState<ScreenPlugin | null>(null);\n  const [sidebarWidth, setSidebarWidth] = React.useState<any>(defaultWidth);\n  const [formIsPristine, setFormIsPristine] = React.useState(true);\n  const activeScreens = allScreens.filter(\n    (screen) =>\n      screen.navCategory !== 'Account' ||\n      cms.api.tina?.authProvider?.getLoginStrategy() === 'UsernamePassword'\n  );\n\n  const setDisplayState = (value: 'closed' | 'fullscreen' | 'open') =>\n    cms.dispatch({ type: 'sidebar:set-display-state', value: value });\n  const displayState = cms.state.sidebarDisplayState;\n\n  /* Set sidebar open state and width to local values if available */\n  React.useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const localSidebarState = window.localStorage.getItem(LOCALSTATEKEY);\n      const localSidebarWidth = window.localStorage.getItem(LOCALWIDTHKEY);\n\n      if (localSidebarState !== null) {\n        setDisplayState(JSON.parse(localSidebarState));\n      }\n\n      if (localSidebarWidth !== null) {\n        setSidebarWidth(JSON.parse(localSidebarWidth));\n      }\n    }\n  }, []);\n\n  /* If the default sidebar state changes, update current state if no local value is found */\n  React.useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const localSidebarState = window.localStorage.getItem(LOCALSTATEKEY);\n\n      if (localSidebarState === null) {\n        setDisplayState(defaultSidebarState);\n      }\n    }\n  }, [defaultSidebarState]);\n\n  /* Update the local value of the sidebar state any time it updates, if the CMS is loaded */\n  React.useEffect(() => {\n    if (typeof window !== 'undefined' && cms.enabled) {\n      window.localStorage.setItem(LOCALSTATEKEY, JSON.stringify(displayState));\n    }\n  }, [displayState, cms]);\n\n  /* Update the local value of the sidebar width any time the user drags to resize it */\n  React.useEffect(() => {\n    if (resizingSidebar) {\n      window.localStorage.setItem(LOCALWIDTHKEY, JSON.stringify(sidebarWidth));\n    }\n  }, [sidebarWidth, resizingSidebar]);\n\n  const isTinaAdminEnabled =\n    cms.flags.get('tina-admin') === false ? false : true;\n\n  /**\n   * Only show ContentCreators when TinaAdmin is disabled\n   */\n  const contentCreators = isTinaAdminEnabled\n    ? []\n    : cms.plugins.getType('content-creator').all();\n\n  const toggleFullscreen = () => {\n    if (displayState === 'fullscreen') {\n      setDisplayState('open');\n    } else {\n      setDisplayState('fullscreen');\n    }\n  };\n\n  const toggleSidebarOpen = () => {\n    cms.dispatch({ type: 'toggle-edit-state' });\n  };\n\n  const toggleMenu = () => {\n    setMenuIsOpen((menuIsOpen) => !menuIsOpen);\n  };\n\n  // update the iframe body padding when the sidebar is resized or the display state changes\n  React.useEffect(() => {\n    const updateLayout = () => {\n      if (displayState === 'fullscreen') {\n        return;\n      }\n      updateBodyDisplacement({\n        position,\n        displayState,\n        sidebarWidth,\n        resizingSidebar,\n      });\n    };\n\n    updateLayout();\n\n    window.addEventListener('resize', updateLayout);\n\n    return () => {\n      window.removeEventListener('resize', updateLayout);\n    };\n  }, [displayState, position, sidebarWidth, resizingSidebar]);\n\n  return (\n    <SidebarContext.Provider\n      value={{\n        sidebarWidth,\n        setSidebarWidth,\n        displayState,\n        setDisplayState,\n        position,\n        toggleFullscreen,\n        toggleSidebarOpen,\n        resizingSidebar,\n        setResizingSidebar,\n        menuIsOpen,\n        setMenuIsOpen,\n        toggleMenu,\n        setActiveView,\n        formIsPristine,\n        setFormIsPristine,\n      }}\n    >\n      <>\n        <SidebarWrapper>\n          <EditButton />\n          <SidebarBody>\n            <SidebarHeader\n              isLocalMode={cms.api?.tina?.isLocalMode}\n              branchingEnabled={branchingEnabled}\n            />\n            <FormsView loadingPlaceholder={sidebar.loadingPlaceholder} />\n            {activeScreen && (\n              <ScreenPluginModal\n                screen={activeScreen}\n                close={() => setActiveView(null)}\n              />\n            )}\n          </SidebarBody>\n          <ResizeHandle />\n        </SidebarWrapper>\n        <Transition show={menuIsOpen} as='div'>\n          <TransitionChild\n            enter='transform transition-all ease-out duration-300'\n            enterFrom='opacity-0 -translate-x-full'\n            enterTo='opacity-100 translate-x-0'\n            leave='transform transition-all ease-in duration-200'\n            leaveFrom='opacity-100 translate-x-0'\n            leaveTo='opacity-0 -translate-x-full'\n          >\n            <div className='fixed left-0 top-0 z-overlay h-full transform'>\n              <Nav\n                isLocalMode={cms.api?.tina?.isLocalMode}\n                menuIsOpen\n                toggleMenu={toggleMenu}\n                showCollections={isTinaAdminEnabled}\n                collectionsInfo={collectionsInfo}\n                screens={activeScreens}\n                cloudConfigs={allConfigs}\n                contentCreators={contentCreators}\n                sidebarWidth={sidebarWidth}\n                RenderNavSite={({ view }) => (\n                  <SidebarSiteLink\n                    view={view}\n                    onClick={() => {\n                      setActiveView(view);\n                      setMenuIsOpen(false);\n                    }}\n                  />\n                )}\n                RenderNavCloud={({ config }) => (\n                  <NavCloudLink config={config} />\n                )}\n                RenderNavCollection={({ collection }) => (\n                  <SidebarCollectionLink\n                    onClick={() => {\n                      setMenuIsOpen(false);\n                    }}\n                    collection={collection}\n                  />\n                )}\n                AuthRenderNavCollection={({ collection }) => (\n                  <SidebarCollectionLink\n                    onClick={() => {\n                      setMenuIsOpen(false);\n                    }}\n                    collection={collection}\n                    Icon={ImUsers}\n                  />\n                )}\n              ></Nav>\n            </div>\n          </TransitionChild>\n          <TransitionChild\n            enter='ease-out duration-300'\n            enterFrom='opacity-0'\n            enterTo='opacity-80'\n            entered='opacity-80'\n            leave='ease-in duration-200'\n            leaveFrom='opacity-80'\n            leaveTo='opacity-0'\n          >\n            <div\n              onClick={() => {\n                setMenuIsOpen(false);\n              }}\n              className='fixed z-menu inset-0 bg-gradient-to-br from-gray-800 via-gray-900 to-black'\n            />\n          </TransitionChild>\n        </Transition>\n      </>\n    </SidebarContext.Provider>\n  );\n};\n\nconst updateBodyDisplacement = ({\n  position = 'overlay',\n  displayState,\n  sidebarWidth,\n  resizingSidebar,\n}) => {\n  const body = document.getElementsByTagName('body')[0];\n  const windowWidth = window.innerWidth;\n\n  if (position === 'displace') {\n    // Padding can't be animated smoothly, so we're using a delay to time the size change\n    body.style.transition = resizingSidebar\n      ? ''\n      : displayState === 'fullscreen'\n        ? 'padding 0ms 150ms'\n        : displayState === 'closed'\n          ? 'padding 0ms 0ms'\n          : 'padding 0ms 300ms';\n\n    if (displayState === 'open') {\n      const bodyDisplacement = Math.min(\n        sidebarWidth,\n        windowWidth - minPreviewWidth\n      );\n      body.style.paddingLeft = `${bodyDisplacement}px`;\n    } else {\n      body.style.paddingLeft = '0';\n    }\n  } else {\n    body.style.transition = '';\n    body.style.paddingLeft = '0';\n  }\n};\n\nconst SidebarHeader = ({ branchingEnabled, isLocalMode }) => {\n  const { toggleSidebarOpen, toggleMenu } = React.useContext(SidebarContext);\n\n  return (\n    <>\n      <div className='p-2 flex-grow-0 w-full bg-gray-50'>\n        {!isLocalMode && <BillingWarning />}\n\n        <div className='w-full flex justify-between items-center'>\n          <div className='flex overflow-hidden py-1'>\n            <button\n              className='p-2 hover:bg-gray-100 transition-colors duration-150 ease-in-out rounded'\n              onClick={toggleMenu}\n              title='Open navigation menu'\n              aria-label='Open navigation menu'\n            >\n              <BiMenu className='h-8 w-auto text-gray-600' />\n            </button>\n            <TinaIcon className='self-center h-10 min-w-10 w-auto text-orange-500 mr-2' />\n            <BranchButton className='overflow-hidden mr-2' />\n            <LocalWarning className='px-4' />\n          </div>\n\n          <div className='flex'>\n            <BranchPreviewButton />\n\n            <button\n              className='p-2 hover:bg-gray-100 transition-colors duration-150 ease-in-out rounded'\n              onClick={toggleSidebarOpen}\n              title='Close sidebar'\n              aria-label='Close sidebar'\n            >\n              <PiSidebarSimpleLight className='h-6 w-auto text-gray-600' />\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst SidebarSiteLink = ({\n  view,\n  onClick,\n}: {\n  view: ScreenPlugin;\n  onClick: () => void;\n}) => {\n  return (\n    <button\n      className='text-base tracking-wide text-gray-500 hover:text-blue-600 flex items-center opacity-90 hover:opacity-100'\n      value={view.name}\n      onClick={onClick}\n    >\n      <view.Icon className='mr-2 h-6 opacity-80 w-auto' /> {view.name}\n    </button>\n  );\n};\n\nconst SidebarCollectionLink = ({\n  Icon = ImFilesEmpty,\n  collection,\n  onClick,\n}: {\n  Icon?: IconType;\n  collection: {\n    label: string;\n    name: string;\n  };\n  onClick: () => void;\n}) => {\n  const cms = useCMS();\n  const tinaPreview = cms.flags.get('tina-preview') || false;\n  return (\n    <a\n      onClick={onClick}\n      href={`${\n        tinaPreview ? `/${tinaPreview}/index.html#` : '/admin#'\n      }/collections/${collection.name}/~`}\n      className='text-base tracking-wide text-gray-500 hover:text-blue-600 flex items-center opacity-90",
            "cost": 0.13362000000000002
        },
        "tinacms__tinacms.ac595220/packages/tinacms/src/toolkit/styles/button.tsx": {
            "output": "import * as React from 'react';\nimport { cn } from '../../lib/utils';\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'white' | 'ghost' | 'danger' | 'custom';\n  as?: React.ElementType;\n  href?: string;\n  target?: string;\n  size?: 'small' | 'medium' | 'custom';\n  busy?: boolean;\n  rounded?: 'full' | 'left' | 'right' | 'custom' | 'none';\n  disabled?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}\n\nexport const Button = ({\n  variant = 'secondary',\n  as: Tag = 'button',\n  size = 'medium',\n  busy,\n  disabled,\n  rounded = 'full',\n  children,\n  className = '',\n  ...props\n}: ButtonProps) => {\n  const baseClasses =\n    'icon-parent inline-flex items-center font-medium focus:outline-none focus:ring-2 focus:shadow-outline text-center inline-flex justify-center transition-all duration-150 ease-out ';\n  const variantClasses = {\n    primary: `shadow text-white bg-tina-orange-dark hover:bg-tina-orange focus:ring-tina-orange-dark border-0`,\n    secondary: `shadow text-gray-500 hover:tina-orange-dark bg-gray-50 hover:bg-white border border-gray-100`,\n    white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-100`,\n    ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent border-0 hover:border hover:border-gray-200 bg-transparent`,\n    danger: `shadow text-white bg-red-500 hover:bg-red-600 focus:ring-red-500`,\n    custom: '',\n  };\n  const state = busy ? `busy` : disabled ? `disabled` : `default`;\n  const stateClasses = {\n    disabled: `pointer-events-none opacity-30 cursor-not-allowed`,\n    busy: `pointer-events-none opacity-70 cursor-wait`,\n    default: ``,\n  };\n  const roundedClasses = {\n    full: `rounded`,\n    left: `rounded-l`,\n    right: `rounded-r`,\n    custom: '',\n    none: '',\n  };\n  const sizeClasses = {\n    small: `text-xs h-8 px-3`,\n    medium: `text-sm h-10 px-8`,\n    custom: ``,\n  };\n\n  return (\n    <Tag\n      className={cn(\n        baseClasses,\n        variantClasses[variant],\n        sizeClasses[size],\n        stateClasses[state],\n        roundedClasses[rounded],\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </Tag>\n  );\n};\n\nexport const IconButton = ({\n  variant = 'secondary',\n  size = 'medium',\n  busy,\n  disabled,\n  children,\n  className,\n  ...props\n}: ButtonProps) => {\n  const baseClasses =\n    'icon-parent inline-flex items-center border border-transparent text-sm font-medium focus:outline-none focus:ring-2 focus:shadow-outline text-center inline-flex justify-center transition-all duration-150 ease-out rounded-full';\n  const variantClasses = {\n    primary: `shadow text-white bg-tina-orange-dark hover:bg-tina-orange focus:ring-tina-orange-dark`,\n    secondary: `shadow text-gray-500 hover:text-blue-500 bg-gray-50 hover:bg-white border border-gray-200`,\n    white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-200`,\n    ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent hover:border-gray-200 bg-transparent`,\n  };\n  const state = busy ? `busy` : disabled ? `disabled` : `default`;\n  const stateClasses = {\n    disabled: `pointer-events-none\topacity-30 cursor-not-allowed`,\n    busy: `pointer-events-none opacity-70 cursor-wait`,\n    default: ``,\n  };\n  const sizeClasses = {\n    small: `h-7 w-7`,\n    medium: `h-9 w-9`,\n    custom: ``,\n  };\n\n  return (\n    <button\n      className={cn(\n        baseClasses,\n        variantClasses[variant],\n        sizeClasses[size],\n        stateClasses[state],\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n};",
            "output_extracted": "import * as React from 'react';\nimport { cn } from '../../lib/utils';\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'white' | 'ghost' | 'danger' | 'custom';\n  as?: React.ElementType;\n  href?: string;\n  target?: string;\n  size?: 'small' | 'medium' | 'custom';\n  busy?: boolean;\n  rounded?: 'full' | 'left' | 'right' | 'custom' | 'none';\n  disabled?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}\n\nexport const Button = ({\n  variant = 'secondary',\n  as: Tag = 'button',\n  size = 'medium',\n  busy,\n  disabled,\n  rounded = 'full',\n  children,\n  className = '',\n  ...props\n}: ButtonProps) => {\n  const baseClasses =\n    'icon-parent inline-flex items-center font-medium focus:outline-none focus:ring-2 focus:shadow-outline text-center inline-flex justify-center transition-all duration-150 ease-out ';\n  const variantClasses = {\n    primary: `shadow text-white bg-tina-orange-dark hover:bg-tina-orange focus:ring-tina-orange-dark border-0`,\n    secondary: `shadow text-gray-500 hover:tina-orange-dark bg-gray-50 hover:bg-white border border-gray-100`,\n    white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-100`,\n    ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent border-0 hover:border hover:border-gray-200 bg-transparent`,\n    danger: `shadow text-white bg-red-500 hover:bg-red-600 focus:ring-red-500`,\n    custom: '',\n  };\n  const state = busy ? `busy` : disabled ? `disabled` : `default`;\n  const stateClasses = {\n    disabled: `pointer-events-none opacity-30 cursor-not-allowed`,\n    busy: `pointer-events-none opacity-70 cursor-wait`,\n    default: ``,\n  };\n  const roundedClasses = {\n    full: `rounded`,\n    left: `rounded-l`,\n    right: `rounded-r`,\n    custom: '',\n    none: '',\n  };\n  const sizeClasses = {\n    small: `text-xs h-8 px-3`,\n    medium: `text-sm h-10 px-8`,\n    custom: ``,\n  };\n\n  return (\n    <Tag\n      className={cn(\n        baseClasses,\n        variantClasses[variant],\n        sizeClasses[size],\n        stateClasses[state],\n        roundedClasses[rounded],\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </Tag>\n  );\n};\n\nexport const IconButton = ({\n  variant = 'secondary',\n  size = 'medium',\n  busy,\n  disabled,\n  children,\n  className,\n  ...props\n}: ButtonProps) => {\n  const baseClasses =\n    'icon-parent inline-flex items-center border border-transparent text-sm font-medium focus:outline-none focus:ring-2 focus:shadow-outline text-center inline-flex justify-center transition-all duration-150 ease-out rounded-full';\n  const variantClasses = {\n    primary: `shadow text-white bg-tina-orange-dark hover:bg-tina-orange focus:ring-tina-orange-dark`,\n    secondary: `shadow text-gray-500 hover:text-blue-500 bg-gray-50 hover:bg-white border border-gray-200`,\n    white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-200`,\n    ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent hover:border-gray-200 bg-transparent`,\n  };\n  const state = busy ? `busy` : disabled ? `disabled` : `default`;\n  const stateClasses = {\n    disabled: `pointer-events-none\topacity-30 cursor-not-allowed`,\n    busy: `pointer-events-none opacity-70 cursor-wait`,\n    default: ``,\n  };\n  const sizeClasses = {\n    small: `h-7 w-7`,\n    medium: `h-9 w-9`,\n    custom: ``,\n  };\n\n  return (\n    <button\n      className={cn(\n        baseClasses,\n        variantClasses[variant],\n        sizeClasses[size],\n        stateClasses[state],\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n};",
            "cost": 0.044570000000000005
        }
    },
    "recover_status": "success",
    "instance_ref": {
        "repo": "tinacms/tinacms",
        "instance_id": "tinacms__tinacms.ac595220.5947",
        "base_commit": "ac59522053c71c713057c4c2b6ce610617bce85e",
        "pull_number": 5947,
        "merge_commit": "b012b6c7fae2674c613fd4c54e1819a86c6d2c3e",
        "problem_statement": "Sidebar - update tooltips",
        "patch": "diff --git a/.changeset/old-brooms-lie.md b/.changeset/old-brooms-lie.md\nnew file mode 100644\nindex 0000000000..cb0cda9766\n--- /dev/null\n+++ b/.changeset/old-brooms-lie.md\n@@ -0,0 +1,5 @@\n+---\n+\"tinacms\": patch\n+---\n+\n+Sidebar - updated tooltips, show editing panel is now orange for visibility/branding\ndiff --git a/packages/tinacms/src/toolkit/components/tina-ui.test.tsx b/packages/tinacms/src/toolkit/components/tina-ui.test.tsx\nindex 25044fe201..39892e28b5 100644\n--- a/packages/tinacms/src/toolkit/components/tina-ui.test.tsx\n+++ b/packages/tinacms/src/toolkit/components/tina-ui.test.tsx\n@@ -36,7 +36,7 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        app.getByLabelText('opens cms sidebar');\n+        app.getByLabelText('Show editing panel');\n       });\n     });\n     describe('when sidebar is false', () => {\n@@ -63,7 +63,7 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n+        const sidebarButton = app.queryByLabelText('Show editing panel');\n         expect(sidebarButton).toBeNull();\n       });\n     });\n@@ -93,7 +93,7 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n+        const sidebarButton = app.queryByLabelText('Show editing panel');\n         expect(sidebarButton).toBeNull();\n       });\n       it('does not remount children when cms is toggled', () => {\n@@ -151,7 +151,7 @@ describe('TinaUI', () => {\n           </TinaCMSProvider>\n         );\n \n-        const sidebarButton = app.queryByLabelText('opens cms sidebar');\n+        const sidebarButton = app.queryByLabelText('Show editing panel');\n         expect(sidebarButton).toBeNull();\n       });\n     });\ndiff --git a/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx b/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx\nindex beb1fea34e..e3d4eaac4b 100644\n--- a/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx\n+++ b/packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx\n@@ -243,10 +243,7 @@ const Sidebar = ({\n         <SidebarWrapper>\n           <EditButton />\n           <SidebarBody>\n-            <SidebarHeader\n-              isLocalMode={cms.api?.tina?.isLocalMode}\n-              branchingEnabled={branchingEnabled}\n-            />\n+            <SidebarHeader isLocalMode={cms.api?.tina?.isLocalMode} />\n             <FormsView loadingPlaceholder={sidebar.loadingPlaceholder} />\n             {activeScreen && (\n               <ScreenPluginModal\n@@ -365,7 +362,7 @@ const updateBodyDisplacement = ({\n   }\n };\n \n-const SidebarHeader = ({ branchingEnabled, isLocalMode }) => {\n+const SidebarHeader = ({ isLocalMode }) => {\n   const { toggleSidebarOpen, toggleMenu } = React.useContext(SidebarContext);\n \n   return (\n@@ -395,10 +392,11 @@ const SidebarHeader = ({ branchingEnabled, isLocalMode }) => {\n             <BranchPreviewButton />\n \n             <button\n+              type='button'\n               className='p-2 hover:bg-gray-100 transition-colors duration-150 ease-in-out rounded'\n               onClick={toggleSidebarOpen}\n-              title='Close sidebar'\n-              aria-label='Close sidebar'\n+              title='Hide editing panel'\n+              aria-label='Hide editing panel'\n             >\n               <PiSidebarSimpleLight className='h-6 w-auto text-gray-600' />\n             </button>\n@@ -486,7 +484,7 @@ const EditButton = ({}) => {\n   return (\n     <Button\n       rounded='right'\n-      variant='secondary'\n+      variant='accent'\n       size='custom'\n       onClick={toggleSidebarOpen}\n       className={`z-chrome absolute top-6 right-0 translate-x-full text-sm h-10 px-3 transition-all duration-300 ${\n@@ -494,7 +492,8 @@ const EditButton = ({}) => {\n           ? 'opacity-0 ease-in pointer-events-none'\n           : 'ease-out pointer-events-auto'\n       }`}\n-      aria-label='opens cms sidebar'\n+      title='Show editing panel'\n+      aria-label='Show editing panel'\n     >\n       <PiSidebarSimpleLight className='h-6 w-auto' />\n     </Button>\ndiff --git a/packages/tinacms/src/toolkit/styles/button.tsx b/packages/tinacms/src/toolkit/styles/button.tsx\nindex c73326c418..a5f0f8b56f 100644\n--- a/packages/tinacms/src/toolkit/styles/button.tsx\n+++ b/packages/tinacms/src/toolkit/styles/button.tsx\n@@ -3,7 +3,14 @@ import { cn } from '../../lib/utils';\n \n export interface ButtonProps\n   extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n-  variant?: 'primary' | 'secondary' | 'white' | 'ghost' | 'danger' | 'custom';\n+  variant?:\n+    | 'primary'\n+    | 'secondary'\n+    | 'white'\n+    | 'ghost'\n+    | 'danger'\n+    | 'accent'\n+    | 'custom';\n   as?: React.ElementType;\n   href?: string;\n   target?: string;\n@@ -34,6 +41,7 @@ export const Button = ({\n     white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-100`,\n     ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent border-0 hover:border hover:border-gray-200 bg-transparent`,\n     danger: `shadow text-white bg-red-500 hover:bg-red-600 focus:ring-red-500`,\n+    accent: `shadow text-white bg-orange-500 hover:bg-orange-600 focus:ring-orange-500`,\n     custom: '',\n   };\n   const state = busy ? `busy` : disabled ? `disabled` : `default`;\n@@ -88,6 +96,7 @@ export const IconButton = ({\n     secondary: `shadow text-gray-500 hover:text-blue-500 bg-gray-50 hover:bg-white border border-gray-200`,\n     white: `shadow text-gray-500 hover:text-blue-500 bg-white hover:bg-gray-50 border border-gray-200`,\n     ghost: `text-gray-500 hover:text-blue-500 hover:shadow border border-transparent hover:border-gray-200 bg-transparent`,\n+    accent: `shadow text-white bg-orange-500 hover:bg-orange-600 focus:ring-orange-500`,\n   };\n   const state = busy ? `busy` : disabled ? `disabled` : `default`;\n   const stateClasses = {\n",
        "test_files": [
            "packages/tinacms/src/toolkit/components/tina-ui.test.tsx"
        ],
        "code_files": [
            "packages/tinacms/src/toolkit/react-sidebar/components/sidebar.tsx",
            "packages/tinacms/src/toolkit/styles/button.tsx"
        ],
        "pr_mirror": "tinacms__tinacms.ac595220"
    }
}