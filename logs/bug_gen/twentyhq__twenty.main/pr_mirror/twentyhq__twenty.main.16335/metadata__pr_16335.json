{
    "cost": 0.05961,
    "rewrites": {
        "twentyhq__twenty.main/packages/create-twenty-app/src/cli.ts": {
            "output": "#!/usr/bin/env node\nimport chalk from 'chalk';\nimport { Command, CommanderError } from 'commander';\nimport { CreateAppCommand } from './create-app.command';\nimport packageJson from '../package.json';\n\nconst program = new Command(packageJson.name)\n  .description('CLI tool to initialize a new Twenty application')\n  .version(\n    packageJson.version,\n    '-v, --version',\n    'Output the current version of create-twenty-app.',\n  )\n  .argument('[directory]')\n  .helpOption('-h, --help', 'Display this help message.')\n  .action(async (directory?: string) => {\n    if (directory && !/^[a-z0-9-]+$/.test(directory)) {\n      console.error(\n        chalk.red(\n          `Invalid directory \"${directory}\". Must contain only lowercase letters, numbers, and hyphens`,\n        ),\n      );\n      process.exit(1);\n    }\n    await new CreateAppCommand().execute(directory);\n  });\n\nprogram.exitOverride();\n\ntry {\n  program.parse();\n} catch (error) {\n  if (error instanceof CommanderError) {\n    process.exit(error.exitCode);\n  }\n  if (error instanceof Error) {\n    console.error(chalk.red('Error:'), error.message);\n    process.exit(1);\n  }\n}",
            "output_extracted": "#!/usr/bin/env node\nimport chalk from 'chalk';\nimport { Command, CommanderError } from 'commander';\nimport { CreateAppCommand } from './create-app.command';\nimport packageJson from '../package.json';\n\nconst program = new Command(packageJson.name)\n  .description('CLI tool to initialize a new Twenty application')\n  .version(\n    packageJson.version,\n    '-v, --version',\n    'Output the current version of create-twenty-app.',\n  )\n  .argument('[directory]')\n  .helpOption('-h, --help', 'Display this help message.')\n  .action(async (directory?: string) => {\n    if (directory && !/^[a-z0-9-]+$/.test(directory)) {\n      console.error(\n        chalk.red(\n          `Invalid directory \"${directory}\". Must contain only lowercase letters, numbers, and hyphens`,\n        ),\n      );\n      process.exit(1);\n    }\n    await new CreateAppCommand().execute(directory);\n  });\n\nprogram.exitOverride();\n\ntry {\n  program.parse();\n} catch (error) {\n  if (error instanceof CommanderError) {\n    process.exit(error.exitCode);\n  }\n  if (error instanceof Error) {\n    console.error(chalk.red('Error:'), error.message);\n    process.exit(1);\n  }\n}",
            "cost": 0.01471
        },
        "twentyhq__twenty.main/packages/create-twenty-app/src/create-app.command.ts": {
            "output": "import chalk from 'chalk';\nimport * as fs from 'fs-extra';\nimport inquirer from 'inquirer';\nimport * as path from 'path';\nimport { copyBaseApplicationProject } from './utils/app-template';\nimport kebabCase from 'lodash.kebabcase';\nimport { convertToLabel } from './utils/convert-to-label';\nimport { tryGitInit } from './utils/try-git-init';\nimport { install } from './utils/install';\n\nconst CURRENT_EXECUTION_DIRECTORY = process.env.INIT_CWD || process.cwd();\n\nexport class CreateAppCommand {\n  async execute(directory?: string): Promise<void> {\n    try {\n      const { appName, appDisplayName, appDirectory, appDescription } =\n        await this.getAppInfos(directory);\n\n      await this.validateDirectory(appDirectory);\n\n      this.logCreationInfo({ appDirectory, appName });\n\n      await fs.ensureDir(appDirectory);\n\n      await copyBaseApplicationProject({\n        appName,\n        appDisplayName,\n        appDescription,\n        appDirectory,\n      });\n\n      await install(appDirectory);\n\n      await tryGitInit(appDirectory);\n\n      this.logSuccess(appDirectory);\n    } catch (error) {\n      console.error(\n        chalk.red('Initialization failed:'),\n        error instanceof Error ? error.message : error,\n      );\n      process.exit(1);\n    }\n  }\n\n  private async getAppInfos(directory?: string): Promise<{\n    appName: string;\n    appDisplayName: string;\n    appDescription: string;\n    appDirectory: string;\n  }> {\n    const { name, displayName, description } = await inquirer.prompt([\n      {\n        type: 'input',\n        name: 'name',\n        message: 'Application name:',\n        when: () => !directory,\n        default: 'my-awesome-app',\n        validate: (input) => {\n          if (input.length === 0) return 'Application name is required';\n          return true;\n        },\n      },\n      {\n        type: 'input',\n        name: 'displayName',\n        message: 'Application display name:',\n        default: (answers: any) => {\n          return convertToLabel(answers?.name ?? directory);\n        },\n      },\n      {\n        type: 'input',\n        name: 'description',\n        message: 'Application description (optional):',\n        default: '',\n      },\n    ]);\n\n    const computedName = name ?? directory;\n\n    const appName = computedName.trim();\n\n    const appDisplayName = displayName.trim();\n\n    const appDescription = description.trim();\n\n    const appDirectory = directory\n      ? path.join(CURRENT_EXECUTION_DIRECTORY, directory)\n      : path.join(CURRENT_EXECUTION_DIRECTORY, kebabCase(appName));\n\n    return { appName, appDisplayName, appDirectory, appDescription };\n  }\n\n  private async validateDirectory(appDirectory: string): Promise<void> {\n    if (!(await fs.pathExists(appDirectory))) {\n      return;\n    }\n\n    const files = await fs.readdir(appDirectory);\n    if (files.length > 0) {\n      throw new Error(\n        `Directory ${appDirectory} already exists and is not empty`,\n      );\n    }\n  }\n\n  private logCreationInfo({\n    appDirectory,\n    appName,\n  }: {\n    appDirectory: string;\n    appName: string;\n  }): void {\n    console.log(chalk.blue('\ud83c\udfaf Creating Twenty Application'));\n    console.log(chalk.gray(`\ud83d\udcc1 Directory: ${appDirectory}`));\n    console.log(chalk.gray(`\ud83d\udcdd Name: ${appName}`));\n    console.log('');\n  }\n\n  private logSuccess(appDirectory: string): void {\n    console.log(chalk.green('\u2705 Application created!'));\n    console.log('');\n    console.log(chalk.blue('Next steps:'));\n    console.log(`cd ${appDirectory.split('/').reverse()[0] ?? ''}`);\n    console.log('yarn auth');\n  }\n}",
            "output_extracted": "import chalk from 'chalk';\nimport * as fs from 'fs-extra';\nimport inquirer from 'inquirer';\nimport * as path from 'path';\nimport { copyBaseApplicationProject } from './utils/app-template';\nimport kebabCase from 'lodash.kebabcase';\nimport { convertToLabel } from './utils/convert-to-label';\nimport { tryGitInit } from './utils/try-git-init';\nimport { install } from './utils/install';\n\nconst CURRENT_EXECUTION_DIRECTORY = process.env.INIT_CWD || process.cwd();\n\nexport class CreateAppCommand {\n  async execute(directory?: string): Promise<void> {\n    try {\n      const { appName, appDisplayName, appDirectory, appDescription } =\n        await this.getAppInfos(directory);\n\n      await this.validateDirectory(appDirectory);\n\n      this.logCreationInfo({ appDirectory, appName });\n\n      await fs.ensureDir(appDirectory);\n\n      await copyBaseApplicationProject({\n        appName,\n        appDisplayName,\n        appDescription,\n        appDirectory,\n      });\n\n      await install(appDirectory);\n\n      await tryGitInit(appDirectory);\n\n      this.logSuccess(appDirectory);\n    } catch (error) {\n      console.error(\n        chalk.red('Initialization failed:'),\n        error instanceof Error ? error.message : error,\n      );\n      process.exit(1);\n    }\n  }\n\n  private async getAppInfos(directory?: string): Promise<{\n    appName: string;\n    appDisplayName: string;\n    appDescription: string;\n    appDirectory: string;\n  }> {\n    const { name, displayName, description } = await inquirer.prompt([\n      {\n        type: 'input',\n        name: 'name',\n        message: 'Application name:',\n        when: () => !directory,\n        default: 'my-awesome-app',\n        validate: (input) => {\n          if (input.length === 0) return 'Application name is required';\n          return true;\n        },\n      },\n      {\n        type: 'input',\n        name: 'displayName',\n        message: 'Application display name:',\n        default: (answers: any) => {\n          return convertToLabel(answers?.name ?? directory);\n        },\n      },\n      {\n        type: 'input',\n        name: 'description',\n        message: 'Application description (optional):',\n        default: '',\n      },\n    ]);\n\n    const computedName = name ?? directory;\n\n    const appName = computedName.trim();\n\n    const appDisplayName = displayName.trim();\n\n    const appDescription = description.trim();\n\n    const appDirectory = directory\n      ? path.join(CURRENT_EXECUTION_DIRECTORY, directory)\n      : path.join(CURRENT_EXECUTION_DIRECTORY, kebabCase(appName));\n\n    return { appName, appDisplayName, appDirectory, appDescription };\n  }\n\n  private async validateDirectory(appDirectory: string): Promise<void> {\n    if (!(await fs.pathExists(appDirectory))) {\n      return;\n    }\n\n    const files = await fs.readdir(appDirectory);\n    if (files.length > 0) {\n      throw new Error(\n        `Directory ${appDirectory} already exists and is not empty`,\n      );\n    }\n  }\n\n  private logCreationInfo({\n    appDirectory,\n    appName,\n  }: {\n    appDirectory: string;\n    appName: string;\n  }): void {\n    console.log(chalk.blue('\ud83c\udfaf Creating Twenty Application'));\n    console.log(chalk.gray(`\ud83d\udcc1 Directory: ${appDirectory}`));\n    console.log(chalk.gray(`\ud83d\udcdd Name: ${appName}`));\n    console.log('');\n  }\n\n  private logSuccess(appDirectory: string): void {\n    console.log(chalk.green('\u2705 Application created!'));\n    console.log('');\n    console.log(chalk.blue('Next steps:'));\n    console.log(`cd ${appDirectory.split('/').reverse()[0] ?? ''}`);\n    console.log('yarn auth');\n  }\n}",
            "cost": 0.035985
        },
        "twentyhq__twenty.main/packages/create-twenty-app/src/utils/__tests__/convert-to-label.spec.ts": {
            "output": "import { convertToLabel } from '../convert-to-label';\n\ndescribe('convertToLabel', () => {\n  it('should convert to label', () => {\n    expect(convertToLabel('toto')).toBe('Toto');\n    expect(convertToLabel('totoTata')).toBe('Toto tata');\n    expect(convertToLabel('totoTataTiti')).toBe('Toto tata titi');\n    expect(convertToLabel('toto-tata-titi')).toBe('Toto tata titi');\n  });\n});",
            "output_extracted": "import { convertToLabel } from '../convert-to-label';\n\ndescribe('convertToLabel', () => {\n  it('should convert to label', () => {\n    expect(convertToLabel('toto')).toBe('Toto');\n    expect(convertToLabel('totoTata')).toBe('Toto tata');\n    expect(convertToLabel('totoTataTiti')).toBe('Toto tata titi');\n    expect(convertToLabel('toto-tata-titi')).toBe('Toto tata titi');\n  });\n});",
            "cost": 0.008915000000000001
        }
    },
    "recover_status": "success",
    "instance_ref": {
        "instance_id": "twentyhq__twenty.main.16335",
        "repo": "twentyhq/twenty",
        "base_commit": "0ced7da8e004b3cb7c9d2c2c56a5e75c6db83dc2",
        "head_commit": "7417a6702f321f8d6fe3e108acc08d53d5e0e5da",
        "title": "Use alias in create-twenty-app",
        "merged_at": "2025-12-04T16:12:56Z",
        "html_url": "https://github.com/twentyhq/twenty/pull/16335",
        "test_files": [
            "packages/create-twenty-app/src/utils/__tests__/convert-to-label.spec.ts"
        ],
        "code_files": [
            "packages/create-twenty-app/src/cli.ts",
            "packages/create-twenty-app/src/create-app.command.ts"
        ],
        "total_changes": 12,
        "num_files": 3,
        "pull_number": 16335,
        "patch": "diff --git a/packages/create-twenty-app/src/cli.ts b/packages/create-twenty-app/src/cli.ts\nindex b1f818009efce..9294a94ade717 100644\n--- a/packages/create-twenty-app/src/cli.ts\n+++ b/packages/create-twenty-app/src/cli.ts\n@@ -1,7 +1,7 @@\n #!/usr/bin/env node\n import chalk from 'chalk';\n import { Command, CommanderError } from 'commander';\n-import { CreateAppCommand } from './create-app.command';\n+import { CreateAppCommand } from '@/create-app.command';\n import packageJson from '../package.json';\n \n const program = new Command(packageJson.name)\ndiff --git a/packages/create-twenty-app/src/create-app.command.ts b/packages/create-twenty-app/src/create-app.command.ts\nindex ecdebba46ffda..5c5ff4a7b1e98 100644\n--- a/packages/create-twenty-app/src/create-app.command.ts\n+++ b/packages/create-twenty-app/src/create-app.command.ts\n@@ -2,11 +2,11 @@ import chalk from 'chalk';\n import * as fs from 'fs-extra';\n import inquirer from 'inquirer';\n import * as path from 'path';\n-import { copyBaseApplicationProject } from './utils/app-template';\n+import { copyBaseApplicationProject } from '@/utils/app-template';\n import kebabCase from 'lodash.kebabcase';\n-import { convertToLabel } from './utils/convert-to-label';\n-import { tryGitInit } from './utils/try-git-init';\n-import { install } from './utils/install';\n+import { convertToLabel } from '@/utils/convert-to-label';\n+import { tryGitInit } from '@/utils/try-git-init';\n+import { install } from '@/utils/install';\n \n const CURRENT_EXECUTION_DIRECTORY = process.env.INIT_CWD || process.cwd();\n \ndiff --git a/packages/create-twenty-app/src/utils/__tests__/convert-to-label.spec.ts b/packages/create-twenty-app/src/utils/__tests__/convert-to-label.spec.ts\nindex d565478c2a8c7..d7eeedfe865a9 100644\n--- a/packages/create-twenty-app/src/utils/__tests__/convert-to-label.spec.ts\n+++ b/packages/create-twenty-app/src/utils/__tests__/convert-to-label.spec.ts\n@@ -1,4 +1,4 @@\n-import { convertToLabel } from '../convert-to-label';\n+import { convertToLabel } from '@/utils/convert-to-label';\n \n describe('convertToLabel', () => {\n   it('should convert to label', () => {\n",
        "pr_mirror": "twentyhq__twenty.main"
    }
}