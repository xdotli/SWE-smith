diff --git a/dev/test-studio/schema/debug/customEnhancedObjectField.tsx b/dev/test-studio/schema/debug/customEnhancedObjectField.tsx
deleted file mode 100644
index 1ffda66..0000000
--- a/dev/test-studio/schema/debug/customEnhancedObjectField.tsx
+++ /dev/null
@@ -1,10 +0,0 @@
-export const CustomEnhancedObjectField = (props: any) => {
-  return (
-    <div style={{border: '1px solid palegreen', borderRadius: 4}}>
-      {props.renderDefault({
-        ...props,
-        title: undefined,
-      })}
-    </div>
-  )
-}
diff --git a/dev/test-studio/schema/debug/customEnhancedObjectInput.tsx b/dev/test-studio/schema/debug/customEnhancedObjectInput.tsx
deleted file mode 100644
index 07c355e..0000000
--- a/dev/test-studio/schema/debug/customEnhancedObjectInput.tsx
+++ /dev/null
@@ -1,3 +0,0 @@
-export const CustomEnhancedObjectInput = (props: any) => {
-  return <div style={{border: '1px solid red', borderRadius: 4}}>{props.renderDefault(props)}</div>
-}
diff --git a/dev/test-studio/schema/debug/objectsDebug.ts b/dev/test-studio/schema/debug/objectsDebug.ts
index a3f66fc..508537b 100644
--- a/dev/test-studio/schema/debug/objectsDebug.ts
+++ b/dev/test-studio/schema/debug/objectsDebug.ts
@@ -7,8 +7,6 @@ import {
 } from 'sanity'
 
 import {SideBySideObjectInput, SideBySideObjectItem} from './components/SideBySideObjectInput'
-import {CustomEnhancedObjectField} from './customEnhancedObjectField'
-import {CustomEnhancedObjectInput} from './customEnhancedObjectInput'
 import {PageBlockAnchor} from './PageBlockAnchor'
 
 const animal = defineField({
@@ -21,17 +19,6 @@ const animal = defineField({
       type: 'string',
       title: 'Animal name',
     },
-    {
-      name: 'arrayOfNumbersAnimals',
-      type: 'array',
-      title: 'Array of numbers animals',
-      of: [
-        {
-          type: 'number',
-          title: 'Number',
-        },
-      ],
-    },
     {
       type: 'array',
       name: 'description',
@@ -261,32 +248,6 @@ const animal = defineField({
         },
       ],
     },
-    {
-      name: 'arrayWithNoTitle',
-      title: 'Array with custom field',
-      type: 'array',
-      components: {
-        field: CustomEnhancedObjectField,
-        input: CustomEnhancedObjectInput,
-      },
-      of: [
-        {
-          type: 'object',
-          name: 'obj',
-          title: 'Some object',
-          fields: [
-            {
-              name: 'title',
-              type: 'string',
-            },
-            {
-              name: 'description',
-              type: 'string',
-            },
-          ],
-        },
-      ],
-    },
     {
       type: 'array',
       name: 'children',
@@ -638,423 +599,4 @@ const arrayOfAnonymousObjects = defineField({
 
 const objectWithArray = defineField({
   type: 'object',
-  name: 'objectWithArray',
-  title: 'Object with array',
-  fields: [
-    {
-      type: 'array',
-      name: 'animalss',
-      title: 'Animals',
-      of: [animal],
-    },
-  ],
-})
-
-const arrayOfMixedTypes = defineField({
-  type: 'array',
-  name: 'arrayOfMixedTypes',
-  title: 'Array of mixed types',
-  of: [
-    pte,
-    {
-      type: 'object',
-      name: 'myObject',
-      fields: [
-        {
-          name: 'string',
-          type: 'string',
-          title: 'String',
-        },
-        // Array of objects
-        {
-          name: 'arrayOfObjects',
-          type: 'array',
-          title: 'Array of objects',
-          of: [
-            {
-              type: 'object',
-              name: 'myObject',
-              fields: [
-                {
-                  name: 'string',
-                  type: 'string',
-                  title: 'String',
-                },
-              ],
-            },
-            {
-              type: 'reference',
-              name: 'author',
-              title: 'Author',
-              to: [{type: 'author'}],
-            },
-          ],
-        },
-      ],
-    },
-    {
-      type: 'image',
-      name: 'image',
-      title: 'Image',
-    },
-    {
-      name: 'author',
-      type: 'reference',
-      title: 'Author',
-      to: [{type: 'author'}],
-    },
-    {
-      type: 'object',
-      name: 'mixedObject',
-      title: 'Mixed object',
-      fields: [
-        {
-          name: 'author',
-          type: 'reference',
-          title: 'Author',
-          to: [{type: 'author'}],
-        },
-      ],
-      preview: {
-        select: {
-          title: 'author.name',
-        },
-        prepare({title}) {
-          return {
-            title,
-          }
-        },
-      },
-    },
-  ],
-})
-
-const arrayWithArrayInNestedObjects = defineField({
-  type: 'object',
-  name: 'rootObject',
-  fields: [
-    {
-      type: 'array',
-      name: 'level1Array',
-      title: 'Level 1 Array',
-      of: [
-        {
-          type: 'object',
-          name: 'level1Object',
-          fields: [
-            {
-              type: 'string',
-              name: 'title',
-              title: 'Title',
-            },
-            {
-              type: 'object',
-              name: 'level2Object',
-              fields: [
-                {
-                  type: 'string',
-                  name: 'title',
-                  title: 'Title',
-                },
-                {
-                  type: 'array',
-                  name: 'level2Array',
-                  title: 'Level 2 Array',
-                  of: [
-                    {
-                      type: 'object',
-                      name: 'level2ArrayObject',
-                      fields: [
-                        {
-                          type: 'string',
-                          name: 'title',
-                          title: 'Title',
-                        },
-                        {
-                          type: 'object',
-                          name: 'level3Object',
-                          fields: [
-                            {
-                              type: 'string',
-                              name: 'title',
-                              title: 'Title',
-                            },
-                            {
-                              type: 'object',
-                              name: 'level3NestedObject',
-                              title: 'Level 3 Nested Object',
-                              fields: [
-                                {
-                                  type: 'string',
-                                  name: 'title',
-                                  title: 'Title',
-                                },
-                                {
-                                  type: 'object',
-                                  name: 'level3NestedNestedObject',
-                                  title: 'Level 3 Nested Nested Object',
-                                  fields: [
-                                    {
-                                      type: 'string',
-                                      name: 'title',
-                                      title: 'Title',
-                                    },
-                                    {
-                                      type: 'object',
-                                      name: 'level3DeepNestedObject',
-                                      title: 'Level 3 Deep Nested Object',
-                                      fields: [
-                                        {
-                                          type: 'string',
-                                          name: 'title',
-                                          title: 'Title',
-                                        },
-                                        {
-                                          type: 'array',
-                                          name: 'level3DeepNestedArray1',
-                                          title: 'Level 3 Array 1',
-                                          of: [
-                                            {
-                                              type: 'object',
-                                              name: 'level3DeepNestedArrayObject1',
-                                              fields: [
-                                                {
-                                                  type: 'string',
-                                                  name: 'title',
-                                                  title: 'Title',
-                                                },
-                                                {
-                                                  type: 'array',
-                                                  name: 'level3DeepNestedArray1',
-                                                  title: 'Level 3 Nested Array 1',
-                                                  of: [
-                                                    {
-                                                      type: 'object',
-                                                      name: 'level3DeepNestedArrayObject1',
-                                                      fields: [
-                                                        {
-                                                          type: 'string',
-                                                          name: 'title',
-                                                          title: 'Title',
-                                                        },
-                                                      ],
-                                                    },
-                                                  ],
-                                                },
-                                                {
-                                                  type: 'array',
-                                                  name: 'level3DeepNestedArray2',
-                                                  title: 'Level 3 Nested Array 2',
-                                                  of: [
-                                                    {
-                                                      type: 'object',
-                                                      name: 'level3DeepNestedArrayObject2',
-                                                      fields: [
-                                                        {
-                                                          type: 'string',
-                                                          name: 'title',
-                                                          title: 'Title',
-                                                        },
-                                                      ],
-                                                    },
-                                                  ],
-                                                },
-                                              ],
-                                            },
-                                          ],
-                                        },
-                                        {
-                                          type: 'array',
-                                          name: 'level3DeepNestedArray2',
-                                          title: 'Level 3 Array 2',
-                                          of: [
-                                            {
-                                              type: 'object',
-                                              name: 'level3DeepNestedArrayObject2',
-                                              fields: [
-                                                {
-                                                  type: 'string',
-                                                  name: 'title',
-                                                  title: 'Title',
-                                                },
-                                              ],
-                                            },
-                                          ],
-                                        },
-                                      ],
-                                    },
-                                  ],
-                                },
-                              ],
-                            },
-                          ],
-                        },
-                      ],
-                    },
-                  ],
-                },
-              ],
-            },
-            {
-              name: 'level2AnotherArray',
-              type: 'array',
-              title: 'Level 2 Another Array',
-              of: [
-                {
-                  type: 'object',
-                  name: 'level2AnotherObject',
-                  fields: [
-                    {
-                      type: 'string',
-                      name: 'level2AnotherObjectString',
-                      title: 'Level 2 Another Object String',
-                    },
-                  ],
-                },
-              ],
-            },
-          ],
-        },
-      ],
-    },
-  ],
-})
-
-const arrayWithNestedObjectsWithArray = defineField({
-  name: 'arrayWithNestedObjectsWithArray',
-  type: 'array',
-  title: 'Array with nested objects with array',
-  of: [
-    {
-      type: 'object',
-      name: 'firstObject',
-      title: 'First object',
-      fields: [
-        {
-          type: 'object',
-          name: 'secondObject',
-          title: 'Second object',
-          fields: [
-            {
-              type: 'array',
-              name: 'nestedArray',
-              title: 'Nested array',
-              of: [
-                {
-                  type: 'object',
-                  name: 'nestedObject',
-                  title: 'Nested object',
-                  fields: [
-                    {
-                      type: 'string',
-                      name: 'nestedString',
-                      title: 'Nested string',
-                    },
-                  ],
-                },
-              ],
-            },
-          ],
-        },
-      ],
-    },
-  ],
-})
-
-export const objectsDebug = defineType({
-  type: 'document',
-  name: 'objectsDebug',
-
-  fieldsets: [
-    {
-      name: 'fieldset',
-      title: 'Fieldset',
-    },
-  ],
-
-  fields: [
-    {
-      name: 'title',
-      type: 'string',
-    },
-    {
-      name: 'arrayOfNumbers',
-      type: 'array',
-      title: 'Array of numbers',
-      of: [
-        {
-          type: 'number',
-          title: 'Number',
-        },
-      ],
-    },
-    /** Internationalized array string */
-    defineField({
-      name: 'greeting',
-      type: 'internationalizedArrayString',
-    }),
-    /** Internationalized array string value */
-    defineField({
-      name: 'internationalizedArrayStringValue',
-      type: 'internationalizedArrayStringValue',
-      title: 'Internationalized array string value',
-    }),
-    defineField({
-      name: 'arrayofObjectsWithItem',
-      type: 'array',
-      title: 'Array of objects with custom item',
-      of: [
-        {
-          type: 'object',
-          name: 'item',
-          fields: [
-            {
-              name: 'object1',
-              type: 'string',
-              title: 'String 1',
-            },
-          ],
-          components: {
-            item: PageBlockAnchor,
-          },
-        },
-      ],
-    }),
-    animals,
-    {
-      name: 'arrayWithNoTitle_2',
-      title: 'Array with custom field 2',
-      type: 'array',
-      components: {
-        field: CustomEnhancedObjectField,
-        input: CustomEnhancedObjectInput,
-      },
-      of: [
-        {
-          type: 'object',
-          name: 'obj_2',
-          title: 'Some object',
-          fields: [
-            {
-              name: 'title',
-              type: 'string',
-            },
-            {
-              name: 'description',
-              type: 'string',
-            },
-          ],
-        },
-      ],
-    },
-    arrayOfMixedTypes,
-    body,
-    fieldsetArray,
-    objectWithArray,
-    arrayOfAnonymousObjects,
-    arrayOfImages,
-    arrayOfFiles,
-    arrayWithNestedObjectsWithArray,
-    arrayWithArrayInNestedObjects,
-  ],
-})
+  name: 'objectWithArray
\ No newline at end of file
diff --git a/e2e/tests/enhanced-object-dialog/componentItemSmoke.spec.ts b/e2e/tests/enhanced-object-dialog/componentItemSmoke.spec.ts
index 68fb6e3..e1a430d 100644
--- a/e2e/tests/enhanced-object-dialog/componentItemSmoke.spec.ts
+++ b/e2e/tests/enhanced-object-dialog/componentItemSmoke.spec.ts
@@ -6,7 +6,6 @@ test.describe('Enhanced Object Dialog - schema with component item and input smo
   test.beforeEach(async ({createDraftDocument}) => {
     // wait for form to be attached
     await createDraftDocument('/content/input-debug;objectsDebug')
-    test.slow()
   })
 
   test(`opening - when creating new item with custom components.item, the modal should open`, async ({
@@ -27,59 +26,8 @@ test.describe('Enhanced Object Dialog - schema with component item and input smo
     const input = page.getByTestId('field-greeting[_key=="en"].value').getByTestId('string-input')
     await expect(input).toBeEnabled()
     await input.click()
-    await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
-
     await input.fill('Test')
-    await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
-  })
-
-  test(`opening - when clicking the internationalized array string field, and click the next one, the modal should not open`, async ({
-    page,
-  }) => {
-    const input = page.getByTestId('field-greeting[_key=="en"].value').getByTestId('string-input')
-    await expect(input).toBeVisible()
-    await expect(input).toBeEnabled()
-    await input.click()
-    await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
-    await input.fill('Test')
-
-    await page.getByRole('button', {name: 'FR'}).click()
-    await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
-
-    const inputFr = page.getByTestId('field-greeting[_key=="fr"].value').getByTestId('string-input')
-    await expect(inputFr).toBeVisible()
-    await expect(inputFr).toBeEnabled()
-    await inputFr.click()
-    await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
-
-    await inputFr.fill('Test but in french')
-    await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
-  })
-
-  test(`opening - when clicking a component?.field and component?.input it will open the dialog`, async ({
-    page,
-  }) => {
-    const field = page
-      .getByTestId('field-arrayWithNoTitle_2')
-      .getByTestId('add-single-object-button')
-    await expect(field).toBeEnabled()
-    await field.click()
-
-    await expect(page.getByTestId('nested-object-dialog')).toBeVisible()
-  })
-
-  test('should not open - when clicking an string input with the inline changes, it should not open the dialog', async ({
-    page,
-  }) => {
-    // as string inputs become pte
-
-    await expect(page.getByTestId('pane-context-menu-button')).toBeVisible()
-    await page.getByTestId('pane-context-menu-button').click()
-    await expect(page.getByTestId('action-inlinechanges')).toBeVisible()
-    await page.getByTestId('action-inlinechanges').click()
 
-    await page.getByTestId('field-title').getByTestId('string-input-portable-text').click()
-    await page.getByTestId('field-title').getByTestId('string-input-portable-text').fill('Test')
     await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
   })
-})
+})
\ No newline at end of file
diff --git a/e2e/tests/enhanced-object-dialog/smoke.spec.ts b/e2e/tests/enhanced-object-dialog/smoke.spec.ts
index f5a8076..098f3d5 100644
--- a/e2e/tests/enhanced-object-dialog/smoke.spec.ts
+++ b/e2e/tests/enhanced-object-dialog/smoke.spec.ts
@@ -27,12 +27,8 @@ test.describe('Enhanced Object Dialog - open and close', () => {
     const modal = page.getByTestId('nested-object-dialog')
 
     await expect(modal).toBeVisible()
-    await page
-      .getByTestId(/^field-animals\[_key=="[^"]+"\]\.name$/)
-      .getByTestId('string-input')
-      .fill('Blue, the whale')
-
     await page.getByRole('button', {name: 'Close dialog'}).click()
+
     await expect(modal).not.toBeVisible()
   })
 })
@@ -62,44 +58,4 @@ test.describe('Enhanced Object Dialog - when disabled', () => {
     // The enhanced dialog should not be visible
     await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
   })
-})
-
-test.describe('Enhanced Object Dialog - when tab focusing on an array item', () => {
-  test.beforeEach(async ({createDraftDocument, page}) => {
-    // wait for form to be attached
-    await createDraftDocument('/content/input-debug;objectsDebug')
-
-    await page.getByTestId('field-animals').getByRole('button', {name: 'Add item'}).click()
-    const modal = page.getByTestId('nested-object-dialog')
-
-    await expect(modal).toBeVisible()
-    await page
-      .getByTestId(/^field-animals\[_key=="[^"]+"\]\.name$/)
-      .getByTestId('string-input')
-      .fill('Blue, the whale')
-
-    await page.getByRole('button', {name: 'Close dialog'}).click()
-    await expect(modal).not.toBeVisible()
-
-    await page.getByTestId('field-animals').focus()
-  })
-
-  test(`when tab focusing on an array item, the tree editing modal should not open`, async ({
-    page,
-  }) => {
-    await page.keyboard.press('Tab')
-    await page.keyboard.press('Tab')
-
-    await expect(page.getByTestId('nested-object-dialog')).not.toBeVisible()
-  })
-
-  test(`When pressing enter on an array item, the tree editing modal should open`, async ({
-    page,
-  }) => {
-    await page.keyboard.press('Tab')
-    await page.keyboard.press('Tab')
-    await page.keyboard.press('Enter')
-
-    await expect(page.getByTestId('nested-object-dialog')).toBeVisible()
-  })
-})
+})
\ No newline at end of file
diff --git a/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayState.ts b/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayState.ts
index 1633b77..e95619a 100644
--- a/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayState.ts
+++ b/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayState.ts
@@ -18,6 +18,7 @@ import {getItemType} from '../../../../store/utils/getItemType'
 import {type DialogItem} from '../../types'
 import {findArrayTypePaths} from '../findArrayTypePaths'
 import {getSchemaField} from '../getSchemaField'
+import {hasCustomInputComponent} from '../hasCustomInputComponent'
 import {isPathTextInPTEField} from '../isPathTextInPTEField'
 import {buildArrayStatePTE} from './buildArrayStatePTE'
 import {buildBreadcrumbsState} from './buildBreadcrumbsState'
@@ -115,7 +116,10 @@ export function buildArrayState(props: BuildArrayState): TreeEditingState {
     const childrenFields = itemSchemaField?.fields || []
     const childrenMenuItems: DialogItem[] = []
 
-    if (shouldBeInBreadcrumb(itemPath, openPath, documentValue)) {
+    if (
+      shouldBeInBreadcrumb(itemPath, openPath, documentValue) &&
+      !hasCustomInputComponent(rootSchemaType.fields, itemPath)
+    ) {
       const breadcrumbsResult = buildBreadcrumbsState({
         arraySchemaType,
         arrayValue,
@@ -245,7 +249,10 @@ export function buildArrayState(props: BuildArrayState): TreeEditingState {
         }
         childArray.forEach(updateChildArrayIndex)
 
-        if (shouldBeInBreadcrumb(childPath, openPath, documentValue)) {
+        if (
+          shouldBeInBreadcrumb(childPath, openPath, documentValue) &&
+          !hasCustomInputComponent(rootSchemaType.fields, childPath)
+        ) {
           const breadcrumbsResult = buildBreadcrumbsState({
             arraySchemaType: childField.type as ArraySchemaType,
             arrayValue: childValue as Record<string, unknown>[],
@@ -346,4 +353,4 @@ export function buildArrayState(props: BuildArrayState): TreeEditingState {
     rootTitle: '',
     siblings,
   }
-}
+}
\ No newline at end of file
diff --git a/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayStatePTE.ts b/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayStatePTE.ts
index c9e7ca3..98902ee 100644
--- a/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayStatePTE.ts
+++ b/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildArrayStatePTE.ts
@@ -16,6 +16,7 @@ import {getValueAtPath, pathToString} from '../../../../../field/paths/helpers'
 import {EMPTY_ARRAY} from '../../../../../util/empty'
 import {getItemType} from '../../../../store/utils/getItemType'
 import {type DialogItem} from '../../types'
+import {hasCustomInputComponent} from '../hasCustomInputComponent'
 import {isPathTextInPTEField} from '../isPathTextInPTEField'
 import {buildBreadcrumbsState} from './buildBreadcrumbsState'
 import {type RecursiveProps, type TreeEditingState} from './buildTreeEditingState'
@@ -123,7 +124,11 @@ export function buildArrayStatePTE(props: BuildArrayStatePTEProps): {
     // This handles both direct block selection and nested paths within the block
     const openPathStartsWithBlock = startsWith(blockPath, openPath)
 
-    if (openPathStartsWithBlock && shouldBeInBreadcrumb(blockPath, openPath, documentValue)) {
+    if (
+      openPathStartsWithBlock &&
+      shouldBeInBreadcrumb(blockPath, openPath, documentValue) &&
+      !hasCustomInputComponent(rootSchemaType.fields, blockPath)
+    ) {
       const blockBreadcrumb: DialogItem = {
         children: EMPTY_ARRAY,
         parentSchemaType: childField.type as ArraySchemaType,
@@ -183,7 +188,10 @@ export function buildArrayStatePTE(props: BuildArrayStatePTEProps): {
           // But ensure the value is at least an empty array for processing
           const arrayFieldValue = Array.isArray(blockFieldValue) ? blockFieldValue : []
 
-          if (shouldBeInBreadcrumb(blockFieldPath, openPath, documentValue)) {
+          if (
+            shouldBeInBreadcrumb(blockFieldPath, openPath, documentValue) &&
+            !hasCustomInputComponent(rootSchemaType.fields, blockFieldPath)
+          ) {
             const breadcrumbsResult = buildBreadcrumbsState({
               arraySchemaType: blockField.type as ArraySchemaType,
               arrayValue: arrayFieldValue as Record<string, unknown>[],
@@ -249,4 +257,4 @@ export function buildArrayStatePTE(props: BuildArrayStatePTEProps): {
     childrenMenuItems,
     siblings,
   }
-}
+}
\ No newline at end of file
diff --git a/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildTreeEditingState.ts b/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildTreeEditingState.ts
index 5a796fe..67e3b1e 100644
--- a/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildTreeEditingState.ts
+++ b/packages/sanity/src/core/form/studio/tree-editing/utils/build-tree-editing-state/buildTreeEditingState.ts
@@ -11,6 +11,7 @@ import {getSchemaTypeTitle} from '../../../../../schema/helpers'
 import {type DialogItem} from '../../types'
 import {getRootPath} from '../getRootPath'
 import {getSchemaField} from '../getSchemaField'
+import {hasCustomInputComponent} from '../hasCustomInputComponent'
 import {buildArrayState} from './buildArrayState'
 
 const EMPTY_ARRAY: [] = []
@@ -77,6 +78,19 @@ export function buildTreeEditingState(props: BuildTreeEditingStateProps): TreeEd
     path: rootPath,
   })
 
+  // If the child array field has custom components.input, skip building dialog
+  // but preserve breadcrumbs, menuItems, and siblings
+  if (hasCustomInputComponent((props.schemaType as ObjectSchemaType).fields || [], openPath)) {
+    const {menuItems, siblings} = result
+    return {
+      relativePath: EMPTY_ARRAY,
+      breadcrumbs,
+      menuItems: menuItems,
+      rootTitle,
+      siblings: siblings,
+    }
+  }
+
   function recursive(recursiveProps: RecursiveProps): TreeEditingState {
     const {schemaType, path, documentValue} = recursiveProps
 
@@ -113,4 +127,4 @@ export function buildTreeEditingState(props: BuildTreeEditingStateProps): TreeEd
     rootTitle,
     siblings: result.siblings,
   }
-}
+}
\ No newline at end of file
diff --git a/packages/sanity/src/core/form/useDocumentForm.ts b/packages/sanity/src/core/form/useDocumentForm.ts
index 8fb4175..5b980a3 100644
--- a/packages/sanity/src/core/form/useDocumentForm.ts
+++ b/packages/sanity/src/core/form/useDocumentForm.ts
@@ -16,7 +16,6 @@ import deepEquals from 'react-fast-compare'
 
 import {useCanvasCompanionDoc} from '../canvas/actions/useCanvasCompanionDoc'
 import {isSanityCreateLinkedDocument} from '../create/createUtils'
-import {pathToString} from '../field/paths/helpers'
 import {useReconnectingToast} from '../hooks'
 import {type ConnectionState, useConnectionState} from '../hooks/useConnectionState'
 import {useDocumentIdStack} from '../hooks/useDocumentIdStack'
@@ -362,252 +361,4 @@ export function useDocumentForm(options: DocumentFormOptions): DocumentFormValue
     //
     // If the user is viewing a new document (a document that exists locally, but has not yet been
     // created in the dataset), they are permitted to edit it, regardless of which perspective was
-    // selected when they created it. This will cause it to be created in the dataset, attached to
-    // the currently selected perspective.
-    if (
-      releaseId &&
-      getVersionFromId(value._id) !== releaseId &&
-      isNewDocument(editState) === false
-    ) {
-      return true
-    }
-
-    const isReadOnly =
-      !ready ||
-      isLinked ||
-      hasNoPermission ||
-      updateActionDisabled ||
-      createActionDisabled ||
-      reconnecting ||
-      isLocked ||
-      isCreateLinked ||
-      willBeUnpublished ||
-      isReleaseLocked
-
-    if (isReadOnly) return true
-    if (typeof readOnlyProp === 'function') return readOnlyProp(editState)
-    return Boolean(readOnlyProp)
-  }, [
-    isPermissionsLoading,
-    isLinked,
-    permissions?.granted,
-    schemaType,
-    isNonExistent,
-    connectionState,
-    editState,
-    value,
-    onlyHasVersions,
-    selectedPerspectiveName,
-    liveEdit,
-    releaseId,
-    ready,
-    isCreateLinked,
-    isReleaseLocked,
-    readOnlyProp,
-  ])
-
-  const {patch} = useDocumentOperation(documentId, documentType, releaseId)
-
-  const patchRef = useRef<(event: PatchEvent) => void>(() => {
-    throw new Error(
-      'Attempted to patch the Sanity document during initial render or in an `useInsertionEffect`. Input components should only call `onChange()` in a useEffect or an event handler.',
-    )
-  })
-  const handleChange = (event: PatchEvent) => patchRef.current(event)
-
-  useInsertionEffect(() => {
-    // Create-linked documents enter a read-only state in Studio. However, unlinking a Create-linked
-    // document necessitates patching it. This renders it impossible to unlink a Create-linked
-    // document.
-    //
-    // Excluding Create-linked documents from this check is a simple way to ensure they can be
-    // unlinked.
-    //
-    // This does mean `handleChange` can be used to patch any part of a Create-linked document,
-    // which would otherwise be read-only.
-    if (readOnly && !isCreateLinked) {
-      patchRef.current = () => {
-        throw new Error('Attempted to patch a read-only document')
-      }
-    } else {
-      // note: this needs to happen in an insertion effect to make sure we're ready to receive patches from child components when they run their effects initially
-      // in case they do e.g. `useEffect(() => props.onChange(set("foo")), [])`
-      // Note: although we discourage patch-on-mount, we still support it.
-      patchRef.current = (event: PatchEvent) => {
-        // when creating a new draft
-        if (!editState.draft && !editState.published) {
-          telemetry.log(CreatedDraft)
-        }
-
-        patch.execute(toMutationPatches(event.patches), initialValue?.value)
-      }
-    }
-  }, [
-    editState.draft,
-    editState.published,
-    initialValue,
-    patch,
-    telemetry,
-    readOnly,
-    isCreateLinked,
-  ])
-
-  const formDocumentValue = useMemo(() => {
-    if (getFormDocumentValue) return getFormDocumentValue(value)
-    return value
-  }, [getFormDocumentValue, value])
-
-  const hasUpstreamVersion = selectUpstreamVersion(upstreamEditState) !== null
-
-  const formState = useFormState({
-    schemaType,
-    documentValue: formDocumentValue,
-    readOnly,
-    comparisonValue: comparisonValue || value,
-    focusPath,
-    openPath,
-    perspective: selectedPerspective,
-    collapsedPaths,
-    presence,
-    validation,
-    collapsedFieldSets,
-    fieldGroupState,
-    changesOpen,
-    hasUpstreamVersion,
-    displayInlineChanges,
-  })!
-
-  const formStateRef = useRef(formState)
-  useEffect(() => {
-    formStateRef.current = formState
-  }, [formState])
-
-  useComlinkViewHistory({editState})
-
-  const handleSetOpenPath = (path: Path) => {
-    const ops = getExpandOperations(formStateRef.current!, path)
-    ops.forEach((op) => {
-      if (op.type === 'expandPath') {
-        onSetCollapsedPath((prevState) => setAtPath(prevState, op.path, false))
-      }
-      if (op.type === 'expandFieldSet') {
-        onSetCollapsedFieldSets((prevState) => setAtPath(prevState, op.path, false))
-      }
-      if (op.type === 'setSelectedGroup') {
-        onSetFieldGroupState((prevState) => setAtPath(prevState, op.path, op.groupName))
-      }
-    })
-    onSetOpenPath(path)
-  }
-
-  const updatePresence = (nextFocusPath: Path, payload?: OnPathFocusPayload) => {
-    presenceStore.setLocation([
-      {
-        type: 'document',
-        documentId: value._id,
-        path: nextFocusPath,
-        lastActiveAt: new Date().toISOString(),
-        selection: payload?.selection,
-      },
-    ])
-  }
-
-  const updatePresenceThrottled = throttle(updatePresence, 1000, {leading: true, trailing: true})
-  const focusPathRef = useRef<Path>([])
-
-  const handleFocus = (_nextFocusPath: Path, payload?: OnPathFocusPayload) => {
-    const nextFocusPath = pathFor(_nextFocusPath)
-    if (nextFocusPath !== focusPathRef.current) {
-      setFocusPath(pathFor(nextFocusPath))
-
-      if (enhancedObjectDialogEnabled) {
-        // When focusing on an object field, set openPath to the field's parent.
-        // Exception: if focusing directly on an array item (so it has a key),
-        // it should skip updating openPath - let explicit onPathOpen calls handle it.
-        const lastSegment = nextFocusPath[nextFocusPath.length - 1]
-
-        if (!isKeySegment(lastSegment)) {
-          // For fields inside array items, find the last key segment to preserve context
-          const lastKeyIndex = nextFocusPath.findLastIndex((seg) => isKeySegment(seg))
-          // We must preserve the context of the array item when focusing on an object field
-          // As if we don't, then the open path will open the dialog when the object is simply focused,
-          // Which is not what we want.
-          const newOpenPath =
-            lastKeyIndex >= 0
-              ? nextFocusPath.slice(0, lastKeyIndex + 1)
-              : nextFocusPath.slice(0, -1)
-
-          /*
-           * This checks if an element exists in the dom with the updated path.
-           * There are situations where the element doesn't exist in the dom yet, for example:
-           * (think internationalizedArrayString where clicking a button creates an input with the path "en.value")
-           * And, in those cases, the open path will open the dialog when the button is pressed.
-           * So, if an element exists in the dom with the updated path then it means
-           * then we shouldn't update the open path
-           */
-          const elementExists = document.getElementById(`${pathToString(nextFocusPath)}`)
-          if (!elementExists) {
-            handleSetOpenPath(pathFor(newOpenPath))
-          }
-        }
-      } else {
-        handleSetOpenPath(pathFor(nextFocusPath.slice(0, -1)))
-      }
-
-      focusPathRef.current = nextFocusPath
-      onFocusPath?.(nextFocusPath)
-    }
-    updatePresenceThrottled(nextFocusPath, payload)
-  }
-
-  const handleBlur = (_blurredPath: Path) => {
-    setFocusPath(EMPTY_ARRAY)
-
-    if (focusPathRef.current !== EMPTY_ARRAY) {
-      focusPathRef.current = EMPTY_ARRAY
-      onFocusPath?.(EMPTY_ARRAY)
-    }
-
-    // note: we're deliberately not syncing presence here since it would make the user avatar disappear when a
-    // user clicks outside a field without focusing another one
-  }
-
-  const handleProgrammaticFocus = (nextPath: Path) => {
-    // Supports changing the focus path not by a user interaction, but by a programmatic change, e.g. the url path changes.
-
-    if (!deepEquals(focusPathRef.current, nextPath)) {
-      setFocusPath(nextPath)
-      handleSetOpenPath(nextPath)
-      onFocusPath?.(nextPath)
-
-      focusPathRef.current = nextPath
-    }
-  }
-  return {
-    editState,
-    upstreamEditState,
-    connectionState,
-    focusPath,
-    validation,
-    ready,
-    value,
-    formState,
-    permissions,
-    isPermissionsLoading,
-    formStateRef,
-    hasUpstreamVersion,
-
-    collapsedFieldSets,
-    collapsedPaths,
-    openPath,
-    schemaType,
-    onChange: handleChange,
-    onPathOpen: handleSetOpenPath,
-    onProgrammaticFocus: handleProgrammaticFocus,
-    onBlur: handleBlur,
-    onFocus: handleFocus,
-    onSetActiveFieldGroup: handleSetActiveFieldGroup,
-    onSetCollapsedPath: handleOnSetCollapsedPath,
-    onSetCollapsedFieldSet: handleOnSetCollapsedFieldSet,
-  }
-}
+    //
\ No newline at end of file
