+ cd /testbed
+ : '>>>>> Start Test Output'
+ NODE_OPTIONS=--max-old-space-size=8192
+ pnpm test

> @keystone-6/mono-repo@ test /testbed
> jest

FAIL packages/fields-document/src/DocumentEditor/pasting/html-from-other-editors.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/test-utils.tsx:23:20)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/html-from-other-editors.test.tsx:1:127)

FAIL packages/fields-document/src/DocumentEditor/lists.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/lists.test.tsx:2:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/normalization.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-style.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { cx, css } from '@emotion/css';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      16 | import { updateComponentBlockElementProps } from './update-element'
      17 | import { ComponentBlockRender } from './component-block-render'
    > 18 | import { ChromefulComponentBlockElement } from './chromeful-element'
         |              ^
      19 | import { ChromelessComponentBlockElement } from './chromeless-element'
      20 |
      21 | export { withComponentBlocks } from './with-component-blocks'

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/index.tsx:18:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/normalization.test.tsx:3:9)

FAIL packages/fields-document/src/DocumentEditor/marks.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/marks.test.tsx:2:20)

FAIL tests/api-tests/queries/filters.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/filters.test.ts:3:26)

FAIL tests/api-tests/relationships/crud/many-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/many-to-many.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/one-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/one-to-one.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/one-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/one-to-many.test.ts:4:26)

FAIL tests/api-tests/queries/orderBy.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/orderBy.test.ts:1:128)

FAIL tests/api-tests/hooks.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/hooks.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/two-way-backreference/to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/two-way-backreference/to-many.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/many-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/many-to-many.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/one-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/one-to-many-one-sided.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/one-to-one.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/one-to-many-one-sided.test.ts:4:26)

FAIL packages/fields-document/src/validation.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/validation.test.tsx:2:20)

FAIL tests/api-tests/relationships/nested-mutations/connect-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/connect-singular.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/many-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/many-to-many-one-sided.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/document-features-normalization.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/component-blocks.tsx:26:18)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/document-features-normalization.test.tsx:1:133)

FAIL tests/api-tests/relationships/nested-mutations/create-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-many.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/create-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-singular.test.ts:5:26)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/array-field.test.tsx:25:20)

FAIL tests/api-tests/queries/limits.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/limits.test.ts:3:26)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/insertion-and-preview-props.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/insertion-and-preview-props.test.tsx:5:14)

FAIL tests/api-tests/relationships/crud-self-ref/many-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/many-to-many-one-sided.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/connect-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/connect-many.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/pasting/markdown.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/markdown.test.tsx:2:20)

FAIL tests/api-tests/queries/relationships.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/relationships.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/one-to-many.test.ts:4:26)

FAIL tests2/omit.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/omit.test.ts:28:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/insert-break-and-delete.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/component-blocks.tsx:26:18)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/insert-break-and-delete.test.tsx:1:133)

FAIL packages/fields-document/src/DocumentEditor/markdown-link-shortcut.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/markdown-link-shortcut.test.tsx:24:18)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/nested-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/nested-array-field.test.tsx:24:20)

FAIL tests/api-tests/fields/crud.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/crud.test.ts:24:26)

FAIL tests/api-tests/admin-meta.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/admin-meta.test.ts:4:26)

FAIL tests/api-tests/queries/cache-hints.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/cache-hints.test.ts:4:26)

FAIL tests/api-tests/relationships/filtering/filtering.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/filtering/filtering.test.ts:3:26)

FAIL tests/api-tests/relationships/filtering/nested.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/filtering/nested.test.ts:2:26)

FAIL tests/api-tests/fields/images.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/images.test.ts:25:26)

FAIL packages/fields-document/src/DocumentEditor/layouts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/layouts.test.tsx:1:122)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/multi-child-field-in-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/multi-child-field-in-array-field.test.tsx:25:20)

FAIL packages/fields-document/src/DocumentEditor/insert-menu.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/insert-menu.test.tsx:2:20)

PASS packages/core/tests/telemetry.test.ts
  ● Console

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:176:11)

    console.log
      Keystone Telemetry

      at inform (packages/core/src/lib/telemetry.ts:177:11)

    console.log
      Keystone collects anonymous data when you run "keystone dev"

      at inform (packages/core/src/lib/telemetry.ts:178:11)

    console.log
      You can use "keystone telemetry --help" to update your preferences at any time

      at inform (packages/core/src/lib/telemetry.ts:179:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:183:13)

    console.log
      No telemetry data has been sent as part of this notice

      at inform (packages/core/src/lib/telemetry.ts:184:13)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:186:11)

    console.log
      Telemetry data will be sent the next time you run "keystone dev"

      at printNext (packages/core/src/lib/telemetry.ts:148:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:188:11)

    console.log
      For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)

      at inform (packages/core/src/lib/telemetry.ts:189:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:176:11)

    console.log
      Keystone Telemetry

      at inform (packages/core/src/lib/telemetry.ts:177:11)

    console.log
      Keystone collects anonymous data when you run "keystone dev"

      at inform (packages/core/src/lib/telemetry.ts:178:11)

    console.log
      You can use "keystone telemetry --help" to update your preferences at any time

      at inform (packages/core/src/lib/telemetry.ts:179:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:183:13)

    console.log
      No telemetry data has been sent as part of this notice

      at inform (packages/core/src/lib/telemetry.ts:184:13)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:186:11)

    console.log
      Telemetry data will be sent the next time you run "keystone dev"

      at printNext (packages/core/src/lib/telemetry.ts:148:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:188:11)

    console.log
      For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)

      at inform (packages/core/src/lib/telemetry.ts:189:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:176:11)

    console.log
      Keystone Telemetry

      at inform (packages/core/src/lib/telemetry.ts:177:11)

    console.log
      Keystone collects anonymous data when you run "keystone dev"

      at inform (packages/core/src/lib/telemetry.ts:178:11)

    console.log
      You can use "keystone telemetry --help" to update your preferences at any time

      at inform (packages/core/src/lib/telemetry.ts:179:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:183:13)

    console.log
      No telemetry data has been sent as part of this notice

      at inform (packages/core/src/lib/telemetry.ts:184:13)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:186:11)

    console.log
      Telemetry data will be sent the next time you run "keystone dev"

      at printNext (packages/core/src/lib/telemetry.ts:148:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:188:11)

    console.log
      For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)

      at inform (packages/core/src/lib/telemetry.ts:189:11)

    console.log
      Keystone telemetry has been disabled

      at printTelemetryStatus (packages/core/src/lib/telemetry.ts:159:13)

    console.log
      undefined

      at printTelemetryStatus (packages/core/src/lib/telemetry.ts:160:13)

    console.log
      Telemetry data will not be sent by this system user

      at printNext (packages/core/src/lib/telemetry.ts:145:13)

FAIL tests/api-tests/auth-header.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/auth-header.test.ts:5:26)

FAIL tests2/access.field.filterableN.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.field.filterableN.test.ts:26:20)

FAIL tests/api-tests/relationships/nested-mutations/create-and-connect-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-and-connect-many.test.ts:4:26)

FAIL tests/api-tests/auth.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/auth.test.ts:5:26)

PASS tests/api-tests/fields/types/relationship.test.ts
FAIL tests/api-tests/relationships/nested-mutations/set-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/set-many.test.ts:1:128)

FAIL packages/fields-document/src/DocumentEditor/tests/test-utils.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/test-utils.test.tsx:2:20)

FAIL tests/api-tests/queries/cursor-pagination.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/cursor-pagination.test.ts:4:26)

FAIL tests/api-tests/id-field.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/id-field.test.ts:27:26)

FAIL tests/api-tests/relationships/foreign-key.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/relationships/foreign-key.test.ts:4:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts
  ● does not allow circular object

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow circular object 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      10 | type EasilyCircularObject = ObjectField<{
      11 |   x: EasilyCircularObject
    > 12 | }>
         |   ^
      13 | const easilyCircularObject: EasilyCircularObject = fields.object({
      14 |   get x() {
      15 |     return easilyCircularObject

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:12:6)

  ● does not allow a circular object within an array

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within an array 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      17 | })
      18 |
    > 19 | const discriminant = fields.checkbox({ label: '' })
         |      ^
      20 |
      21 | test('does not allow circular object', () => {
      22 |   expect(() => {

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:19:6)

  ● does not allow a circular object within a value for a default discriminant of a conditional field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within a value for a default discriminant of a conditional field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      31 |     assertValidComponentSchema(fields.array(easilyCircularObject), new Set(), 'document')
      32 |   }).toThrowErrorMatchingInlineSnapshot(
    > 33 |     `[Error: The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]`
         |      ^
      34 |   )
      35 | })
      36 |

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:33:6)

  ● does not allow a circular object within a value for a non-default discriminant of a conditional field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within a value for a non-default discriminant of a conditional field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.true.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.true.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      45 |       new Set(),
      46 |       'document'
    > 47 |     )
         |      ^
      48 |   }).toThrowErrorMatchingInlineSnapshot(
      49 |     `[Error: The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]`
      50 |   )

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:47:6)

  ● does not allow a circular conditional if it's the default

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular conditional if it's the default 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.false" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.false" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      67 | })
      68 |
    > 69 | test("does allow a circular conditional as long as it's not the default", () => {
         |      ^
      70 |   type Field = ConditionalField<
      71 |     typeof discriminant,
      72 |     { true: Field; false: FormField<null, undefined> }

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:69:6)

  ● does not allow a field that returns a different field from a getter each time

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a field that returns a different field from a getter each time 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: Fields on an object field must not change over time but the field at "array.object.blah" changes between accesses]
    + "Fields on an object field must not change over time but the field at "array.object.blah" changes between accesses"

      91 |     },
      92 |     true: fields.empty(),
    > 93 |   })
         |     ^
      94 |   expect(() => {
      95 |     assertValidComponentSchema(conditional, new Set(), 'document')
      96 |   }).toThrowErrorMatchingInlineSnapshot(

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:93:6)

  ● exceeds the call stack size for an infinitely recursive field where all fields are different

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `exceeds the call stack size for an infinitely recursive field where all fields are different 1`

    - Snapshot  - 1
    + Received  + 1

    - [RangeError: Maximum call stack size exceeded]
    + "Maximum call stack size exceeded"

      111 |       },
      112 |     })
    > 113 |   )
          |    ^
      114 |   assertValidComponentSchema(blah, new Set(), 'document')
      115 | })
      116 |

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:113:6)

  ● relationship field where no list exists with that name

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `relationship field where no list exists with that name 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The relationship field at "object.a" has the listKey "Blah" but no list named "Blah" exists.]
    + "The relationship field at "object.a" has the listKey "Blah" but no list named "Blah" exists."

      120 |       blah: Field
      121 |     }>
    > 122 |   >
          |    ^
      123 |   const blah: () => Field = () =>
      124 |     fields.array(
      125 |       fields.object({

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:122:6)

  ● does not allow a child field in a structure field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a child field in a structure field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: There is a child field at "object.a" but child fields are not allowed in structure fields.]
    + "There is a child field at "object.a" but child fields are not allowed in structure fields."

      138 | // this is just a test to say "this is explicitly unhandled"
      139 | // if you do this, you know you're doing Bad Things
    > 140 | test('exceeds the call stack size for an infinitely recursive field where all fields are different', () => {
          |      ^
      141 |   type Field = ArrayField<
      142 |     ObjectField<{
      143 |       blah: Field

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:140:6)

  ● does not allow a custom form field without a graphql field in a structure field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a custom form field without a graphql field in a structure field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: There is a form field without a configured GraphQL schema at "object.a", fields used in the structure field must have a GraphQL schema.]
    + "There is a form field without a configured GraphQL schema at "object.a", fields used in the structure field must have a GraphQL schema."

      161 |   }).toThrowErrorMatchingInlineSnapshot(`[RangeError: Maximum call stack size exceeded]`)
      162 | })
    > 163 |
          | ^
      164 | test('relationship field where no list exists with that name', () => {
      165 |   expect(() => {
      166 |     assertValidComponentSchema(

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:163:6)

 › 10 snapshots failed.
FAIL tests/api-tests/fields/files.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/files.test.ts:25:26)

FAIL tests/api-tests/relationships/many-to-one-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/many-to-one-to-one.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/pasting/random-html.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/test-utils.tsx:23:20)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/random-html.test.tsx:1:127)

FAIL tests/api-tests/queries/singletons.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/singletons.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/disconnect-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/disconnect-many.test.ts:4:26)

FAIL tests/api-tests/fields/types/Virtual.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/Virtual.test.ts:3:26)

FAIL tests/api-tests/relationships/nested-mutations/disconnect-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/disconnect-singular.test.ts:4:26)

FAIL tests/api-tests/fields/unique.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/unique.test.ts:26:26)

FAIL tests2/access.create.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.create.test.ts:25:20)

FAIL tests/api-tests/prisma-errors.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/prisma-errors.test.ts:4:26)

FAIL tests/api-tests/relationships/shared-names.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/shared-names.test.ts:3:26)

FAIL tests/api-tests/fields/types/document.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/document.test.ts:6:26)

FAIL tests2/access.update.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.update.test.ts:25:20)

FAIL tests/api-tests/fields/required.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/required.test.ts:26:26)

FAIL tests/api-tests/relationships/relation-name.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/relationships/relation-name.test.ts:4:20)

FAIL packages/fields-document/src/DocumentEditor/code-block.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/code-block.test.tsx:2:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/child-field-in-recursive-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/child-field-in-recursive-array-field.test.tsx:24:20)

FAIL docs/markdoc/index.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@sindresorhus+slugify@3.0.0/node_modules/@sindresorhus/slugify/index.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import escapeStringRegexp from 'escape-string-regexp';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      33 |       selfClosing: true,
      34 |     },
    > 35 |     details: {
         |               ^
      36 |       render: 'details',
      37 |       children: nodes.document.children,
      38 |     },

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (docs/markdoc/config.ts:35:30)
      at Object.<anonymous> (docs/markdoc/index.ts:42:21)
      at Object.<anonymous> (docs/markdoc/index.test.ts:25:16)

PASS packages/fields-document/src/DocumentEditor/component-blocks/preview-props.test.ts
FAIL tests/api-tests/relationships/filtering/access-control.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/filtering/access-control.test.ts:4:26)

FAIL tests/api-tests/fields/non-null.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/non-null.test.ts:28:26)

FAIL tests/api-tests/relationships/to-one-query-batching.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/to-one-query-batching.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/link.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/link.test.tsx:1:122)

FAIL tests/api-tests/relationships/nested-mutations/reconnect-many-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/reconnect-many-to-one.test.ts:3:26)

FAIL tests2/access.delete.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.delete.test.ts:25:20)

FAIL tests2/access.query.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.query.test.ts:25:20)

FAIL packages/fields-document/src/DocumentEditor/pasting/links.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/links.test.tsx:1:122)

FAIL tests/api-tests/extend-graphql-schema.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/extend-graphql-schema.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/blockquote.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/blockquote.test.tsx:1:122)

FAIL packages/fields-document/src/DocumentEditor/pasting/pasting-from-other-slate-editor.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/pasting-from-other-slate-editor.test.tsx:5:20)

FAIL tests/api-tests/db-map.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/db-map.test.ts:27:20)

FAIL tests/api-tests/indexes.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/indexes.test.ts:4:26)

FAIL tests/api-tests/fields/document.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/document.test.ts:2:26)

FAIL packages/fields-document/src/DocumentEditor/heading.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/heading.test.tsx:1:122)

PASS tests/api-tests/relationships/label-search-field-validation.test.ts
FAIL tests2/access.field.filterable.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.field.filterable.test.ts:25:20)

FAIL tests/api-tests/body-parser.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/body-parser.test.ts:27:26)

FAIL tests/api-tests/fields/types/text.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/text.test.ts:2:20)

PASS tests/cli-tests/artifacts.test.ts (10.137 s)
FAIL tests/api-tests/relationships/nested-mutations/create-and-connect-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-and-connect-singular.test.ts:3:26)

FAIL tests/api-tests/fields/types/password.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/password.test.ts:2:20)

FAIL tests/api-tests/fields/unsupported.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/unsupported.test.ts:26:26)

FAIL docs/scripts/replace-show-next-release/markdoc.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@sindresorhus+slugify@3.0.0/node_modules/@sindresorhus/slugify/index.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import escapeStringRegexp from 'escape-string-regexp';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      33 |       selfClosing: true,
      34 |     },
    > 35 |     details: {
         |               ^
      36 |       render: 'details',
      37 |       children: nodes.document.children,
      38 |     },

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (docs/markdoc/config.ts:35:30)
      at Object.<anonymous> (docs/scripts/replace-show-next-release/markdoc.ts:34:21)
      at Object.<anonymous> (docs/scripts/replace-show-next-release/markdoc.test.ts:1:124)

FAIL tests/api-tests/relationships/nested-mutations/two-way-backreference/to-one-required.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/two-way-backreference/to-one-required.test.ts:4:26)

PASS packages/fields-document/src/DocumentEditor/component-blocks/utils.test.ts
PASS tests/api-tests/field-groups.test.ts
FAIL tests/api-tests/fields/types/select.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/select.test.ts:2:20)

FAIL packages/fields-document/src/DocumentEditor/shortcuts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/shortcuts.test.tsx:2:20)

FAIL packages/core/src/fields/types/timestamp/views/__tests__/index.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-button.js:2
    import { c } from './react-compiler-runtime-19061925.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      26 |   const parsedValue = value.value ? parseAbsoluteToLocal(value.value) : null
      27 |
    > 28 |   const [isDirty, setDirty] = useState(false)
         |                     ^
      29 |   const [isReadonlyUTC, toggleReadonlyUTC] = useReducer(prev => !prev, false)
      30 |   const dateFormatter = useDateFormatter({ dateStyle: 'long', timeStyle: 'long' })
      31 |

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/core/src/fields/types/timestamp/views/index.tsx:28:21)
      at Object.<anonymous> (packages/core/src/fields/types/timestamp/views/__tests__/index.tsx:1:118)

FAIL tests2/utils.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/.pnpm/@jest+core@29.7.0_babel-plugin-macros@3.1.0/node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/.pnpm/@jest+core@29.7.0_babel-plugin-macros@3.1.0/node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/.pnpm/emittery@0.13.1/node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/.pnpm/emittery@0.13.1/node_modules/emittery/index.js:361:23)

TAP version 13
# Subtest: utils
    # Subtest: humanize()
    ok 1 - humanize()
      ---
      duration_ms: 5.067432
      ...
    1..1
ok 1 - utils
  ---
  duration_ms: 10.570612
  type: 'suite'
  ...
FAIL tests/api-tests/db-enable-logging.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/db-enable-logging.test.ts:4:26)

node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: Test Error for dev, exited with error 1, see admin-ui/utils.ts
    at ChildProcess.<anonymous> (/testbed/tests/admin-ui-tests/utils.ts:148:11)
    at ChildProcess.emit (node:events:524:28)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)

Node.js v20.19.6
FAIL tests/admin-ui-tests/live-reloading.test.ts (34.525 s)
  ● start keystone

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      45 |       }
      46 |     }
    > 47 |   `)
         |     ^
      48 |
      49 |   await page.goto(`http://localhost:3000/somethings/${id}`)
      50 |   await playwrightExpect(page.getByRole('textbox', { name: 'Initial Label For Text' })).toHaveValue(

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:47:46)

  ● creating an item with the GraphQL API and navigating to the item page for it

    TypeError: fetch failed

      58 | }
      59 |
    > 60 | export function adminUITests(
         |                            ^
      61 |   pathToTest: string,
      62 |   tests: (browser: playwright.BrowserType<playwright.Browser>) => void
      63 | ) {

      at makeGqlRequest (tests/admin-ui-tests/utils.ts:60:28)
      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:55:7)

    Cause:
    connect ECONNREFUSED 127.0.0.1:3000



  ● getAdditionalFiles routes that use [...rest] are working

    TypeError: fetch failed

      67 |   // the virtual field should have updated
      68 |   await playwrightExpect(
    > 69 |     page.getByRole('textbox', {
         |     ^
      70 |       name: 'Virtual',
      71 |     })
      72 |   ).toHaveValue('blah', { timeout: 20_000 }) // allow some time

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:69:5)

    Cause:
    connect ECONNREFUSED 127.0.0.1:3000



  ● updates to the Keystone schema are propagated

    TimeoutError: The operation was aborted due to timeout



  ● a runtime error is shown and doesn't crash the process

    TimeoutError: The operation was aborted due to timeout



  ● errors can be recovered from

    TypeError: Cannot read properties of undefined (reading 'getByRole')

      117 |   await replaceSchema('initial.ts')
      118 |   await playwrightExpect(
    > 119 |     page.getByRole('textbox', {
          |          ^
      120 |       name: 'Initial Label For Text',
      121 |     })
      122 |   ).toHaveValue('blah', { timeout: 20_000 }) // allow some time

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:119:10)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      123 | })
      124 |
    > 125 | afterAll(async () => {
          |                       ^
      126 |   await Promise.all([exit(), browser.close()])
      127 | })
      128 |

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:125:38)

FAIL tests/cli-tests/prisma.test.ts (61.236 s)
  ● keystone prisma exits with the same code as the prisma child process exits with

    thrown: "Exceeded timeout of 30000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      1 | import {
    > 2 |   basicKeystoneConfig,
        | ^
      3 |   schemas,
      4 |   spawnCommand,
      5 |   spawnCommand2,

      at Object.<anonymous> (tests/cli-tests/prisma.test.ts:2:1)

  ● keystone prisma uses the db url in the keystone config

    thrown: "Exceeded timeout of 30000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      13 |   const cwd = await testdir({
      14 |     ...symlinkKeystoneDeps,
    > 15 |     ...schemas,
         | ^
      16 |     'keystone.js': basicKeystoneConfig,
      17 |   })
      18 |

      at Object.<anonymous> (tests/cli-tests/prisma.test.ts:15:1)

FAIL packages/fields-document/src/DocumentEditor/soft-breaks.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/soft-breaks.test.tsx:2:20)

FAIL tests/cli-tests/migrations.test.ts (144.886 s)
  ● dev › creates database and pushes schema from empty

    expect(received).toMatchInlineSnapshot(snapshot)

    Snapshot name: `dev creates database and pushes schema from empty 1`

    - Snapshot  -  1
    + Received  + 11

    @@ -4,6 +4,16 @@
      ? Generating GraphQL and Prisma schemas
      ? Database created
      ? Database synchronized with Prisma schema
      ? Connecting to the database
      ? Creating server
    - ? GraphQL API ready"
    + ? GraphQL API ready
    +
    + Keystone Telemetry
    + Keystone collects anonymous data when you run "keystone dev"
    + You can use "keystone telemetry --help" to update your preferences at any time
    +
    + No telemetry data has been sent as part of this notice
    +
    + Telemetry data will be sent the next time you run "keystone dev"
    +
    + For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)"

      109 |   return new (require(path.join(cwd, 'node_modules/.testprisma/client')).PrismaClient)({
      110 |     datasources: { sqlite: { url: dbUrl } },
    > 111 |   })
          |     ^
      112 | }
      113 |
      114 | describe('dev', () => {

      at setupInitialProject (tests/cli-tests/migrations.test.ts:111:29)
      at Object.<anonymous> (tests/cli-tests/migrations.test.ts:125:5)

 › 1 snapshot failed.
FAIL tests/api-tests/defaults.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/defaults.test.ts:4:26)

FAIL tests/cli-tests/build.test.ts (150.534 s)
  ● Console

    console.log
      ✨ Starting Keystone

      at log (packages/core/src/scripts/start.ts:42:13)

  ● build works with typescript without the user defining a babel config

    thrown: "Exceeded timeout of 120000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      14 | jest.setTimeout(ms('2 minutes')) // these tests are slow
      15 |
    > 16 | test("start errors when a build hasn't happened", async () => {
         | ^
      17 |   const cwd = await testdir({
      18 |     ...symlinkKeystoneDeps,
      19 |     ...schemas,

      at Object.<anonymous> (tests/cli-tests/build.test.ts:16:1)

FAIL tests/admin-ui-tests/relations.test.ts (233.596 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Creating related item does not submit main form

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › selection is not removed when focusing and blurring relationship field

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › view related relationships on the item page filters the list view

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › the combobox having to paginate doesn't break the page

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Creating related item does not submit main form

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › selection is not removed when focusing and blurring relationship field

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › view related relationships on the item page filters the list view

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › the combobox having to paginate doesn't break the page

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      94 |           ...Array.from({ length: 100 }, (_, i) => ({ name: `User ${i}` })),
      95 |         ],
    > 96 |       }
         |        ^
      97 |     )
      98 |
      99 |     await page.goto(`http://localhost:3000/tasks/create`)

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:96:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      94 |           ...Array.from({ length: 100 }, (_, i) => ({ name: `User ${i}` })),
      95 |         ],
    > 96 |       }
         |        ^
      97 |     )
      98 |
      99 |     await page.goto(`http://localhost:3000/tasks/create`)

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:96:19)

FAIL tests/admin-ui-tests/navigation.test.ts (232.13 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Nav contains a Dashboard route by default

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When at the index, the Dashboard NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When navigated to a List route, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › Can access all list pages via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › Can not access hidden lists via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When navigated to an Item view, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When pressing a list view nav item from an item view, the correct route should be reached

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Nav contains a Dashboard route by default

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When at the index, the Dashboard NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When navigated to a List route, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › Can access all list pages via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › Can not access hidden lists via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When navigated to an Item view, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When pressing a list view nav item from an item view, the correct route should be reached

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      64 |     await page.waitForSelector('nav a:has-text("Tasks")')
      65 |     await page.click('nav a:has-text("Tasks")')
    > 66 |     await page.waitForURL('http://localhost:3000/tasks')
         |                   ^
      67 |   })
      68 |   afterAll(async () => {
      69 |     await browser.close()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:66:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      64 |     await page.waitForSelector('nav a:has-text("Tasks")')
      65 |     await page.click('nav a:has-text("Tasks")')
    > 66 |     await page.waitForURL('http://localhost:3000/tasks')
         |                   ^
      67 |   })
      68 |   afterAll(async () => {
      69 |     await browser.close()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:66:19)

FAIL tests/api-tests/extend-express-app.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/extend-express-app.test.ts:27:26)

FAIL tests/api-tests/fields/types/decimal.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/decimal.test.ts:2:20)

FAIL tests/api-tests/extend-http-server.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/extend-http-server.test.ts:27:26)

FAIL tests/api-tests/fields/types/timestamp.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/timestamp.test.ts:2:20)

FAIL tests/api-tests/fields/types/calendarDay.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/calendarDay.test.ts:2:20)

FAIL tests/admin-ui-tests/init.test.ts (233.816 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Task List card should be visible

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › Clicking on the logo should return you to the Dashboard route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › Should see a 404 on request of the /init route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › List View › If all items are deleted from the last page, users should be redirected to the previous page if one exists

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › List View › The page users are redirected to on complete deletion of the last page, should have items

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Task List card should be visible

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › Clicking on the logo should return you to the Dashboard route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › Should see a 404 on request of the /init route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › List View › If all items are deleted from the last page, users should be redirected to the previous page if one exists

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › List View › The page users are redirected to on complete deletion of the last page, should have items

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      59 |       await page.waitForURL(/localhost:3000\/tasks\?.*(page=5)/)
      60 |       await page.getByText('Test Task: 45').waitFor()
    > 61 |     })
         |       ^
      62 |   })
      63 |
      64 |   afterAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:61:19)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6858)
      at Wn.request (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6565)
      at l (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:130:10067)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      59 |       await page.waitForURL(/localhost:3000\/tasks\?.*(page=5)/)
      60 |       await page.getByText('Test Task: 45').waitFor()
    > 61 |     })
         |       ^
      62 |   })
      63 |
      64 |   afterAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:61:19)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6858)
      at Wn.request (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6565)
      at l (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:130:10067)

FAIL packages/fields-document/src/DocumentEditor/divider.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/divider.test.tsx:1:122)

PASS packages/core/src/fields/types/timestamp/views/__tests__/utils.tsx
FAIL tests/admin-ui-tests/filters.test.ts (275.94 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › relationship filters › Lists are filterable by relationships

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● development › browser tests › relationship filters › Lists are filterable by relationships

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● development › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● development › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● production browser tests › browser tests › relationship filters › Lists are filterable by relationships

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● production browser tests › browser tests › relationship filters › Lists are filterable by relationships

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● production browser tests › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● production browser tests › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      111 |         ),
      112 |       })
    > 113 |       await page.goto('http://localhost:3000/tasks')
          |                   ^
      114 |       await page.getByText('21 Tasks').waitFor()
      115 |       await page.goto(
      116 |         `http://localhost:3000/tasks?filter=assignedTo_is_"${assignedTask.assignedTo.id}"`

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:113:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      111 |         ),
      112 |       })
    > 113 |       await page.goto('http://localhost:3000/tasks')
          |                   ^
      114 |       await page.getByText('21 Tasks').waitFor()
      115 |       await page.goto(
      116 |         `http://localhost:3000/tasks?filter=assignedTo_is_"${assignedTask.assignedTo.id}"`

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:113:19)

FAIL tests/admin-ui-tests/list-view-crud.test.ts (275.164 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Complete deletion success, only shows the successful deletion prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● development › browser tests › Complete deletion failure, only shows the successful failure prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● development › browser tests › Partial deletion failure

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Complete deletion success, only shows the successful deletion prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Complete deletion failure, only shows the successful failure prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Partial deletion failure

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      83 |     }
      84 |     await makeGqlRequest(query, variables)
    > 85 |     await page.goto('http://localhost:3000/tasks?sortBy=label&page=1')
         |                   ^
      86 |     await page.getByRole('checkbox', { name: 'Select All' }).click()
      87 |     await page.getByRole('button', { name: 'Delete' }).click()
      88 |     await page.getByRole('button', { name: 'Yes, delete' }).click()

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:85:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      83 |     }
      84 |     await makeGqlRequest(query, variables)
    > 85 |     await page.goto('http://localhost:3000/tasks?sortBy=label&page=1')
         |                   ^
      86 |     await page.getByRole('checkbox', { name: 'Select All' }).click()
      87 |     await page.getByRole('button', { name: 'Delete' }).click()
      88 |     await page.getByRole('button', { name: 'Yes, delete' }).click()

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:85:19)

FAIL tests/api-tests/fields/types/bigInt.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/bigInt.test.ts:2:20)

FAIL tests/examples-smoke-tests/field-groups.test.ts (225.732 s)
  ● dev › browser tests › Field group is rendered exactly once

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/field-groups/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Field group is rendered exactly once

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | exampleProjectTests('field-groups', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |   beforeAll(async () => {
      11 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:8:33)

  ● prod › browser tests › Field group is rendered exactly once

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/field-groups/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Field group is rendered exactly once

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | exampleProjectTests('field-groups', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |   beforeAll(async () => {
      11 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:8:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      29 |     const id = res.data.createPost.id
      30 |     await page.goto(`http://localhost:3000/posts/${id}`)
    > 31 |     await expect(page.getByText('Some automatically updated meta fields')).toHaveCount(1)
         |                   ^
      32 |   })
      33 |   afterAll(async () => {
      34 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:31:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      29 |     const id = res.data.createPost.id
      30 |     await page.goto(`http://localhost:3000/posts/${id}`)
    > 31 |     await expect(page.getByText('Some automatically updated meta fields')).toHaveCount(1)
         |                   ^
      32 |   })
      33 |   afterAll(async () => {
      34 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:31:19)

FAIL tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts (225.747 s)
  ● dev › browser tests › Has a nav link to the Dashboard

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Has a nav link to the Dashboard

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● dev › browser tests › Has a nav link to the Tasks list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Has a nav link to the Tasks list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● dev › browser tests › Has a nav link to the People list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Has a nav link to the People list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● prod › browser tests › Has a nav link to the Dashboard

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Has a nav link to the Dashboard

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● prod › browser tests › Has a nav link to the Tasks list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Has a nav link to the Tasks list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● prod › browser tests › Has a nav link to the People list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Has a nav link to the People list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      24 |     const href = await navElement?.getAttribute('href')
      25 |     expect(href).toBe('/people')
    > 26 |   })
         |     ^
      27 |   afterAll(async () => {
      28 |     await browser.close()
      29 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:26:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      24 |     const href = await navElement?.getAttribute('href')
      25 |     expect(href).toBe('/people')
    > 26 |   })
         |     ^
      27 |   afterAll(async () => {
      28 |     await browser.close()
      29 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:26:19)

FAIL tests/examples-smoke-tests/auth.test.ts (186.205 s)
  ● dev › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)

  ● dev › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)

  ● prod › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)

  ● prod › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      19 |     expect(resWithAutoRedirect.status).toEqual(200)
      20 |     expect(resWithAutoRedirect.url).toEqual('http://localhost:3000/init')
    > 21 |   })
         |     ^
      22 |   initFirstItemTest(() => page)
      23 |   afterAll(async () => {
      24 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:21:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      19 |     expect(resWithAutoRedirect.status).toEqual(200)
      20 |     expect(resWithAutoRedirect.url).toEqual('http://localhost:3000/init')
    > 21 |   })
         |     ^
      22 |   initFirstItemTest(() => page)
      23 |   afterAll(async () => {
      24 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:21:19)

FAIL tests/examples-smoke-tests/extend-express-app.test.ts (173.033 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)

  ● dev › browser tests › Get Posts

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Get Posts

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)

  ● prod › browser tests › Get Posts

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Get Posts

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      22 |     }).then(res => res.json())
      23 |     expect(tasks).toEqual([])
    > 24 |   })
         |     ^
      25 |   afterAll(async () => {
      26 |     await browser.close()
      27 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:24:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      22 |     }).then(res => res.json())
      23 |     expect(tasks).toEqual([])
    > 24 |   })
         |     ^
      25 |   afterAll(async () => {
      26 |     await browser.close()
      27 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:24:19)

FAIL tests/examples-smoke-tests/custom-admin-ui-pages.test.ts (124.963 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:29:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:29:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:40:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:40:19)

FAIL tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts (114.546 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-nexus', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-nexus', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:15:19)

FAIL tests/examples-smoke-tests/default-values.test.ts (120.429 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/default-values/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/default-values/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('default-values', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/default-values/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/default-values/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('default-values', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:15:19)

FAIL tests/api-tests/fields/types/integer.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/integer.test.ts:2:20)

FAIL tests/api-tests/fields/types/float.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/float.test.ts:2:20)

FAIL tests/examples-smoke-tests/virtual-field.test.ts (123.662 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/virtual-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('virtual-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/virtual-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('virtual-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:15:19)

FAIL tests/examples-smoke-tests/usecase-blog.test.ts (142.757 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.author.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-blog/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-blog', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.author.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-blog/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-blog', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:15:19)

FAIL tests/examples-smoke-tests/usecase-todo.test.ts (133.437 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-todo/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-todo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-todo/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-todo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:15:19)

FAIL tests/api-tests/fields/types/checkbox.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/checkbox.test.ts:2:20)

FAIL tests/examples-smoke-tests/custom-field.test.ts (114.961 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:15:19)

FAIL tests/examples-smoke-tests/custom-admin-ui-logo.test.ts (110.582 s)
  ● dev › browser tests › Find custom logo

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Find custom logo

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-logo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:6:33)

  ● prod › browser tests › Find custom logo

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Find custom logo

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-logo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     const content = await page.textContent('h3 a')
      14 |     expect(content).toBe('LegendBoulder After')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     const content = await page.textContent('h3 a')
      14 |     expect(content).toBe('LegendBoulder After')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:15:19)

FAIL tests/examples-smoke-tests/usecase-roles.test.ts (87.651 s)
  ● dev › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.todo.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-roles/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-roles', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:6:33)

  ● prod › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.todo.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-roles/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-roles', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:12:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:12:19)

FAIL tests/examples-smoke-tests/testing.test.ts (70.724 s)
  ● dev › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/testing/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/testing/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('testing', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:6:33)

  ● prod › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/testing/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/testing/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('testing', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:12:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:12:19)

FAIL tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts (1258.2 s)
  ● dev › start keystone in dev

    thrown: "Exceeded timeout of 1200000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      103 |           env: process.env,
      104 |         })
    > 105 |         if (process.env.VERBOSE) {
          |       ^
      106 |           const logChunk = (chunk: any) => {
      107 |             console.log(chunk.toString('utf8'))
      108 |           }

      at tests/examples-smoke-tests/utils.ts:105:7
          at Array.forEach (<anonymous>)
      at exampleProjectTests (tests/examples-smoke-tests/utils.ts:88:33)
      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:2:38)

  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-ts', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-ts', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:15:19)

FAIL tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts (1258.451 s)
  ● dev › start keystone in dev

    thrown: "Exceeded timeout of 1200000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      103 |           env: process.env,
      104 |         })
    > 105 |         if (process.env.VERBOSE) {
          |       ^
      106 |           const logChunk = (chunk: any) => {
      107 |             console.log(chunk.toString('utf8'))
      108 |           }

      at tests/examples-smoke-tests/utils.ts:105:7
          at Array.forEach (<anonymous>)
      at exampleProjectTests (tests/examples-smoke-tests/utils.ts:88:33)
      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:2:38)

  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-tools', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-tools', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:15:19)

FAIL tests/examples-smoke-tests/document-field.test.ts (1258.056 s)
  ● dev › start keystone in dev

    thrown: "Exceeded timeout of 1200000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      103 |           env: process.env,
      104 |         })
    > 105 |         if (process.env.VERBOSE) {
          |       ^
      106 |           const logChunk = (chunk: any) => {
      107 |             console.log(chunk.toString('utf8'))
      108 |           }

      at tests/examples-smoke-tests/utils.ts:105:7
          at Array.forEach (<anonymous>)
      at exampleProjectTests (tests/examples-smoke-tests/utils.ts:88:33)
      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:2:38)

  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/document-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/document-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('document-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/document-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/document-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('document-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:15:19)

1..1
# tests 1
# suites 1
# pass 1
# fail 0
# cancelled 0
# skipped 0
# todo 0
# duration_ms 1507502.29323
A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL packages/fields-document/src/DocumentEditor/pasting/html-from-other-editors.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/test-utils.tsx:23:20)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/html-from-other-editors.test.tsx:1:127)

FAIL packages/fields-document/src/DocumentEditor/lists.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/lists.test.tsx:2:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/normalization.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-style.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { cx, css } from '@emotion/css';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      16 | import { updateComponentBlockElementProps } from './update-element'
      17 | import { ComponentBlockRender } from './component-block-render'
    > 18 | import { ChromefulComponentBlockElement } from './chromeful-element'
         |              ^
      19 | import { ChromelessComponentBlockElement } from './chromeless-element'
      20 |
      21 | export { withComponentBlocks } from './with-component-blocks'

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/index.tsx:18:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/normalization.test.tsx:3:9)

FAIL packages/fields-document/src/DocumentEditor/marks.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/marks.test.tsx:2:20)

FAIL tests/api-tests/queries/filters.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/filters.test.ts:3:26)

FAIL tests/api-tests/relationships/crud/many-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/many-to-many.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/one-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/one-to-one.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/one-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/one-to-many.test.ts:4:26)

FAIL tests/api-tests/queries/orderBy.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/orderBy.test.ts:1:128)

FAIL tests/api-tests/hooks.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/hooks.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/two-way-backreference/to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/two-way-backreference/to-many.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/many-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/many-to-many.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/one-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/one-to-many-one-sided.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/one-to-one.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/one-to-many-one-sided.test.ts:4:26)

FAIL packages/fields-document/src/validation.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/validation.test.tsx:2:20)

FAIL tests/api-tests/relationships/nested-mutations/connect-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/connect-singular.test.ts:4:26)

FAIL tests/api-tests/relationships/crud/many-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud/many-to-many-one-sided.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/document-features-normalization.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/component-blocks.tsx:26:18)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/document-features-normalization.test.tsx:1:133)

FAIL tests/api-tests/relationships/nested-mutations/create-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-many.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/create-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-singular.test.ts:5:26)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/array-field.test.tsx:25:20)

FAIL tests/api-tests/queries/limits.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/limits.test.ts:3:26)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/insertion-and-preview-props.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/insertion-and-preview-props.test.tsx:5:14)

FAIL tests/api-tests/relationships/crud-self-ref/many-to-many-one-sided.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/many-to-many-one-sided.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/connect-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/connect-many.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/pasting/markdown.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/markdown.test.tsx:2:20)

FAIL tests/api-tests/queries/relationships.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/relationships.test.ts:4:26)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/crud-self-ref/one-to-many.test.ts:4:26)

FAIL tests2/omit.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/omit.test.ts:28:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/insert-break-and-delete.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/component-blocks.tsx:26:18)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/insert-break-and-delete.test.tsx:1:133)

FAIL packages/fields-document/src/DocumentEditor/markdown-link-shortcut.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/markdown-link-shortcut.test.tsx:24:18)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/nested-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/nested-array-field.test.tsx:24:20)

FAIL tests/api-tests/fields/crud.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/crud.test.ts:24:26)

FAIL tests/api-tests/admin-meta.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/admin-meta.test.ts:4:26)

FAIL tests/api-tests/queries/cache-hints.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/cache-hints.test.ts:4:26)

FAIL tests/api-tests/relationships/filtering/filtering.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/filtering/filtering.test.ts:3:26)

FAIL tests/api-tests/relationships/filtering/nested.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/filtering/nested.test.ts:2:26)

FAIL tests/api-tests/fields/images.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/images.test.ts:25:26)

FAIL packages/fields-document/src/DocumentEditor/layouts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/layouts.test.tsx:1:122)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/multi-child-field-in-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/multi-child-field-in-array-field.test.tsx:25:20)

FAIL packages/fields-document/src/DocumentEditor/insert-menu.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/insert-menu.test.tsx:2:20)

FAIL tests/api-tests/auth-header.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/auth-header.test.ts:5:26)

FAIL tests2/access.field.filterableN.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.field.filterableN.test.ts:26:20)

FAIL tests/api-tests/relationships/nested-mutations/create-and-connect-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-and-connect-many.test.ts:4:26)

FAIL tests/api-tests/auth.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/auth.test.ts:5:26)

FAIL tests/api-tests/relationships/nested-mutations/set-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/set-many.test.ts:1:128)

FAIL packages/fields-document/src/DocumentEditor/tests/test-utils.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/test-utils.test.tsx:2:20)

FAIL tests/api-tests/queries/cursor-pagination.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/cursor-pagination.test.ts:4:26)

FAIL tests/api-tests/id-field.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/id-field.test.ts:27:26)

FAIL tests/api-tests/relationships/foreign-key.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/relationships/foreign-key.test.ts:4:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts
  ● does not allow circular object

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow circular object 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      10 | type EasilyCircularObject = ObjectField<{
      11 |   x: EasilyCircularObject
    > 12 | }>
         |   ^
      13 | const easilyCircularObject: EasilyCircularObject = fields.object({
      14 |   get x() {
      15 |     return easilyCircularObject

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:12:6)

  ● does not allow a circular object within an array

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within an array 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      17 | })
      18 |
    > 19 | const discriminant = fields.checkbox({ label: '' })
         |      ^
      20 |
      21 | test('does not allow circular object', () => {
      22 |   expect(() => {

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:19:6)

  ● does not allow a circular object within a value for a default discriminant of a conditional field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within a value for a default discriminant of a conditional field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      31 |     assertValidComponentSchema(fields.array(easilyCircularObject), new Set(), 'document')
      32 |   }).toThrowErrorMatchingInlineSnapshot(
    > 33 |     `[Error: The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]`
         |      ^
      34 |   )
      35 | })
      36 |

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:33:6)

  ● does not allow a circular object within a value for a non-default discriminant of a conditional field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within a value for a non-default discriminant of a conditional field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.true.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.true.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      45 |       new Set(),
      46 |       'document'
    > 47 |     )
         |      ^
      48 |   }).toThrowErrorMatchingInlineSnapshot(
      49 |     `[Error: The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]`
      50 |   )

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:47:6)

  ● does not allow a circular conditional if it's the default

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular conditional if it's the default 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.false" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.false" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      67 | })
      68 |
    > 69 | test("does allow a circular conditional as long as it's not the default", () => {
         |      ^
      70 |   type Field = ConditionalField<
      71 |     typeof discriminant,
      72 |     { true: Field; false: FormField<null, undefined> }

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:69:6)

  ● does not allow a field that returns a different field from a getter each time

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a field that returns a different field from a getter each time 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: Fields on an object field must not change over time but the field at "array.object.blah" changes between accesses]
    + "Fields on an object field must not change over time but the field at "array.object.blah" changes between accesses"

      91 |     },
      92 |     true: fields.empty(),
    > 93 |   })
         |     ^
      94 |   expect(() => {
      95 |     assertValidComponentSchema(conditional, new Set(), 'document')
      96 |   }).toThrowErrorMatchingInlineSnapshot(

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:93:6)

  ● exceeds the call stack size for an infinitely recursive field where all fields are different

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `exceeds the call stack size for an infinitely recursive field where all fields are different 1`

    - Snapshot  - 1
    + Received  + 1

    - [RangeError: Maximum call stack size exceeded]
    + "Maximum call stack size exceeded"

      111 |       },
      112 |     })
    > 113 |   )
          |    ^
      114 |   assertValidComponentSchema(blah, new Set(), 'document')
      115 | })
      116 |

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:113:6)

  ● relationship field where no list exists with that name

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `relationship field where no list exists with that name 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The relationship field at "object.a" has the listKey "Blah" but no list named "Blah" exists.]
    + "The relationship field at "object.a" has the listKey "Blah" but no list named "Blah" exists."

      120 |       blah: Field
      121 |     }>
    > 122 |   >
          |    ^
      123 |   const blah: () => Field = () =>
      124 |     fields.array(
      125 |       fields.object({

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:122:6)

  ● does not allow a child field in a structure field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a child field in a structure field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: There is a child field at "object.a" but child fields are not allowed in structure fields.]
    + "There is a child field at "object.a" but child fields are not allowed in structure fields."

      138 | // this is just a test to say "this is explicitly unhandled"
      139 | // if you do this, you know you're doing Bad Things
    > 140 | test('exceeds the call stack size for an infinitely recursive field where all fields are different', () => {
          |      ^
      141 |   type Field = ArrayField<
      142 |     ObjectField<{
      143 |       blah: Field

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:140:6)

  ● does not allow a custom form field without a graphql field in a structure field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a custom form field without a graphql field in a structure field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: There is a form field without a configured GraphQL schema at "object.a", fields used in the structure field must have a GraphQL schema.]
    + "There is a form field without a configured GraphQL schema at "object.a", fields used in the structure field must have a GraphQL schema."

      161 |   }).toThrowErrorMatchingInlineSnapshot(`[RangeError: Maximum call stack size exceeded]`)
      162 | })
    > 163 |
          | ^
      164 | test('relationship field where no list exists with that name', () => {
      165 |   expect(() => {
      166 |     assertValidComponentSchema(

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:163:6)

FAIL tests/api-tests/fields/files.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/files.test.ts:25:26)

FAIL tests/api-tests/relationships/many-to-one-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/many-to-one-to-one.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/pasting/random-html.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/test-utils.tsx:23:20)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/random-html.test.tsx:1:127)

FAIL tests/api-tests/queries/singletons.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/queries/singletons.test.ts:4:26)

FAIL tests/api-tests/relationships/nested-mutations/disconnect-many.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/disconnect-many.test.ts:4:26)

FAIL tests/api-tests/fields/types/Virtual.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/Virtual.test.ts:3:26)

FAIL tests/api-tests/relationships/nested-mutations/disconnect-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/disconnect-singular.test.ts:4:26)

FAIL tests/api-tests/fields/unique.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/unique.test.ts:26:26)

FAIL tests2/access.create.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.create.test.ts:25:20)

FAIL tests/api-tests/prisma-errors.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/prisma-errors.test.ts:4:26)

FAIL tests/api-tests/relationships/shared-names.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/shared-names.test.ts:3:26)

FAIL tests/api-tests/fields/types/document.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/document.test.ts:6:26)

FAIL tests2/access.update.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.update.test.ts:25:20)

FAIL tests/api-tests/fields/required.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/required.test.ts:26:26)

FAIL tests/api-tests/relationships/relation-name.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/relationships/relation-name.test.ts:4:20)

FAIL packages/fields-document/src/DocumentEditor/code-block.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/code-block.test.tsx:2:20)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/child-field-in-recursive-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/child-field-in-recursive-array-field.test.tsx:24:20)

FAIL docs/markdoc/index.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@sindresorhus+slugify@3.0.0/node_modules/@sindresorhus/slugify/index.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import escapeStringRegexp from 'escape-string-regexp';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      33 |       selfClosing: true,
      34 |     },
    > 35 |     details: {
         |               ^
      36 |       render: 'details',
      37 |       children: nodes.document.children,
      38 |     },

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (docs/markdoc/config.ts:35:30)
      at Object.<anonymous> (docs/markdoc/index.ts:42:21)
      at Object.<anonymous> (docs/markdoc/index.test.ts:25:16)

FAIL tests/api-tests/relationships/filtering/access-control.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/filtering/access-control.test.ts:4:26)

FAIL tests/api-tests/fields/non-null.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/non-null.test.ts:28:26)

FAIL tests/api-tests/relationships/to-one-query-batching.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/to-one-query-batching.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/link.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/link.test.tsx:1:122)

FAIL tests/api-tests/relationships/nested-mutations/reconnect-many-to-one.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/reconnect-many-to-one.test.ts:3:26)

FAIL tests2/access.delete.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.delete.test.ts:25:20)

FAIL tests2/access.query.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.query.test.ts:25:20)

FAIL packages/fields-document/src/DocumentEditor/pasting/links.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/links.test.tsx:1:122)

FAIL tests/api-tests/extend-graphql-schema.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/extend-graphql-schema.test.ts:4:26)

FAIL packages/fields-document/src/DocumentEditor/blockquote.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/blockquote.test.tsx:1:122)

FAIL packages/fields-document/src/DocumentEditor/pasting/pasting-from-other-slate-editor.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/pasting-from-other-slate-editor.test.tsx:5:20)

FAIL tests/api-tests/db-map.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/db-map.test.ts:27:20)

FAIL tests/api-tests/indexes.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/indexes.test.ts:4:26)

FAIL tests/api-tests/fields/document.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/document.test.ts:2:26)

FAIL packages/fields-document/src/DocumentEditor/heading.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/heading.test.tsx:1:122)

FAIL tests2/access.field.filterable.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      48 |     Record<string, (typeof datamodel.enums)[number]>
      49 |   >((a, x) => ((a[x.name] = x), a), {})
    > 50 |   const types = Object.values(datamodel.types).reduce<
         |         ^
      51 |     Record<string, (typeof datamodel.types)[number]>
      52 |   >((a, x) => ((a[x.name] = x), a), {})
      53 |

      at tests2/utils.ts:50:9
      at Object.<anonymous> (tests2/utils.ts:51:3)
      at Object.<anonymous> (tests2/access.field.filterable.test.ts:25:20)

FAIL tests/api-tests/body-parser.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/body-parser.test.ts:27:26)

FAIL tests/api-tests/fields/types/text.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/text.test.ts:2:20)

FAIL tests/api-tests/relationships/nested-mutations/create-and-connect-singular.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/create-and-connect-singular.test.ts:3:26)

FAIL tests/api-tests/fields/types/password.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/password.test.ts:2:20)

FAIL tests/api-tests/fields/unsupported.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/unsupported.test.ts:26:26)

FAIL docs/scripts/replace-show-next-release/markdoc.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@sindresorhus+slugify@3.0.0/node_modules/@sindresorhus/slugify/index.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import escapeStringRegexp from 'escape-string-regexp';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      33 |       selfClosing: true,
      34 |     },
    > 35 |     details: {
         |               ^
      36 |       render: 'details',
      37 |       children: nodes.document.children,
      38 |     },

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (docs/markdoc/config.ts:35:30)
      at Object.<anonymous> (docs/scripts/replace-show-next-release/markdoc.ts:34:21)
      at Object.<anonymous> (docs/scripts/replace-show-next-release/markdoc.test.ts:1:124)

FAIL tests/api-tests/relationships/nested-mutations/two-way-backreference/to-one-required.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/relationships/nested-mutations/two-way-backreference/to-one-required.test.ts:4:26)

FAIL tests/api-tests/fields/types/select.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/select.test.ts:2:20)

FAIL packages/fields-document/src/DocumentEditor/shortcuts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/shortcuts.test.tsx:2:20)

FAIL packages/core/src/fields/types/timestamp/views/__tests__/index.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-button.js:2
    import { c } from './react-compiler-runtime-19061925.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      26 |   const parsedValue = value.value ? parseAbsoluteToLocal(value.value) : null
      27 |
    > 28 |   const [isDirty, setDirty] = useState(false)
         |                     ^
      29 |   const [isReadonlyUTC, toggleReadonlyUTC] = useReducer(prev => !prev, false)
      30 |   const dateFormatter = useDateFormatter({ dateStyle: 'long', timeStyle: 'long' })
      31 |

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/core/src/fields/types/timestamp/views/index.tsx:28:21)
      at Object.<anonymous> (packages/core/src/fields/types/timestamp/views/__tests__/index.tsx:1:118)

FAIL tests2/utils.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/.pnpm/@jest+core@29.7.0_babel-plugin-macros@3.1.0/node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/.pnpm/@jest+core@29.7.0_babel-plugin-macros@3.1.0/node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/.pnpm/emittery@0.13.1/node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/.pnpm/emittery@0.13.1/node_modules/emittery/index.js:361:23)

FAIL tests/api-tests/db-enable-logging.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/db-enable-logging.test.ts:4:26)

FAIL tests/admin-ui-tests/live-reloading.test.ts (34.525 s)
  ● start keystone

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      45 |       }
      46 |     }
    > 47 |   `)
         |     ^
      48 |
      49 |   await page.goto(`http://localhost:3000/somethings/${id}`)
      50 |   await playwrightExpect(page.getByRole('textbox', { name: 'Initial Label For Text' })).toHaveValue(

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:47:46)

  ● creating an item with the GraphQL API and navigating to the item page for it

    TypeError: fetch failed

      58 | }
      59 |
    > 60 | export function adminUITests(
         |                            ^
      61 |   pathToTest: string,
      62 |   tests: (browser: playwright.BrowserType<playwright.Browser>) => void
      63 | ) {

      at makeGqlRequest (tests/admin-ui-tests/utils.ts:60:28)
      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:55:7)

    Cause:
    connect ECONNREFUSED 127.0.0.1:3000



  ● getAdditionalFiles routes that use [...rest] are working

    TypeError: fetch failed

      67 |   // the virtual field should have updated
      68 |   await playwrightExpect(
    > 69 |     page.getByRole('textbox', {
         |     ^
      70 |       name: 'Virtual',
      71 |     })
      72 |   ).toHaveValue('blah', { timeout: 20_000 }) // allow some time

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:69:5)

    Cause:
    connect ECONNREFUSED 127.0.0.1:3000



  ● updates to the Keystone schema are propagated

    TimeoutError: The operation was aborted due to timeout



  ● a runtime error is shown and doesn't crash the process

    TimeoutError: The operation was aborted due to timeout



  ● errors can be recovered from

    TypeError: Cannot read properties of undefined (reading 'getByRole')

      117 |   await replaceSchema('initial.ts')
      118 |   await playwrightExpect(
    > 119 |     page.getByRole('textbox', {
          |          ^
      120 |       name: 'Initial Label For Text',
      121 |     })
      122 |   ).toHaveValue('blah', { timeout: 20_000 }) // allow some time

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:119:10)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      123 | })
      124 |
    > 125 | afterAll(async () => {
          |                       ^
      126 |   await Promise.all([exit(), browser.close()])
      127 | })
      128 |

      at Object.<anonymous> (tests/admin-ui-tests/live-reloading.test.ts:125:38)

FAIL tests/cli-tests/prisma.test.ts (61.236 s)
  ● keystone prisma exits with the same code as the prisma child process exits with

    thrown: "Exceeded timeout of 30000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      1 | import {
    > 2 |   basicKeystoneConfig,
        | ^
      3 |   schemas,
      4 |   spawnCommand,
      5 |   spawnCommand2,

      at Object.<anonymous> (tests/cli-tests/prisma.test.ts:2:1)

  ● keystone prisma uses the db url in the keystone config

    thrown: "Exceeded timeout of 30000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      13 |   const cwd = await testdir({
      14 |     ...symlinkKeystoneDeps,
    > 15 |     ...schemas,
         | ^
      16 |     'keystone.js': basicKeystoneConfig,
      17 |   })
      18 |

      at Object.<anonymous> (tests/cli-tests/prisma.test.ts:15:1)

FAIL packages/fields-document/src/DocumentEditor/soft-breaks.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/soft-breaks.test.tsx:2:20)

FAIL tests/cli-tests/migrations.test.ts (144.886 s)
  ● dev › creates database and pushes schema from empty

    expect(received).toMatchInlineSnapshot(snapshot)

    Snapshot name: `dev creates database and pushes schema from empty 1`

    - Snapshot  -  1
    + Received  + 11

    @@ -4,6 +4,16 @@
      ? Generating GraphQL and Prisma schemas
      ? Database created
      ? Database synchronized with Prisma schema
      ? Connecting to the database
      ? Creating server
    - ? GraphQL API ready"
    + ? GraphQL API ready
    +
    + Keystone Telemetry
    + Keystone collects anonymous data when you run "keystone dev"
    + You can use "keystone telemetry --help" to update your preferences at any time
    +
    + No telemetry data has been sent as part of this notice
    +
    + Telemetry data will be sent the next time you run "keystone dev"
    +
    + For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)"

      109 |   return new (require(path.join(cwd, 'node_modules/.testprisma/client')).PrismaClient)({
      110 |     datasources: { sqlite: { url: dbUrl } },
    > 111 |   })
          |     ^
      112 | }
      113 |
      114 | describe('dev', () => {

      at setupInitialProject (tests/cli-tests/migrations.test.ts:111:29)
      at Object.<anonymous> (tests/cli-tests/migrations.test.ts:125:5)

FAIL tests/api-tests/defaults.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/defaults.test.ts:4:26)

FAIL tests/cli-tests/build.test.ts (150.534 s)
  ● build works with typescript without the user defining a babel config

    thrown: "Exceeded timeout of 120000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      14 | jest.setTimeout(ms('2 minutes')) // these tests are slow
      15 |
    > 16 | test("start errors when a build hasn't happened", async () => {
         | ^
      17 |   const cwd = await testdir({
      18 |     ...symlinkKeystoneDeps,
      19 |     ...schemas,

      at Object.<anonymous> (tests/cli-tests/build.test.ts:16:1)

FAIL tests/admin-ui-tests/relations.test.ts (233.596 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Creating related item does not submit main form

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › selection is not removed when focusing and blurring relationship field

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › view related relationships on the item page filters the list view

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › the combobox having to paginate doesn't break the page

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Creating related item does not submit main form

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › selection is not removed when focusing and blurring relationship field

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › view related relationships on the item page filters the list view

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › the combobox having to paginate doesn't break the page

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      94 |           ...Array.from({ length: 100 }, (_, i) => ({ name: `User ${i}` })),
      95 |         ],
    > 96 |       }
         |        ^
      97 |     )
      98 |
      99 |     await page.goto(`http://localhost:3000/tasks/create`)

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:96:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      94 |           ...Array.from({ length: 100 }, (_, i) => ({ name: `User ${i}` })),
      95 |         ],
    > 96 |       }
         |        ^
      97 |     )
      98 |
      99 |     await page.goto(`http://localhost:3000/tasks/create`)

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:96:19)

FAIL tests/admin-ui-tests/navigation.test.ts (232.13 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Nav contains a Dashboard route by default

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When at the index, the Dashboard NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When navigated to a List route, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › Can access all list pages via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › Can not access hidden lists via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When navigated to an Item view, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When pressing a list view nav item from an item view, the correct route should be reached

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Nav contains a Dashboard route by default

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When at the index, the Dashboard NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When navigated to a List route, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › Can access all list pages via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › Can not access hidden lists via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When navigated to an Item view, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When pressing a list view nav item from an item view, the correct route should be reached

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      64 |     await page.waitForSelector('nav a:has-text("Tasks")')
      65 |     await page.click('nav a:has-text("Tasks")')
    > 66 |     await page.waitForURL('http://localhost:3000/tasks')
         |                   ^
      67 |   })
      68 |   afterAll(async () => {
      69 |     await browser.close()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:66:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      64 |     await page.waitForSelector('nav a:has-text("Tasks")')
      65 |     await page.click('nav a:has-text("Tasks")')
    > 66 |     await page.waitForURL('http://localhost:3000/tasks')
         |                   ^
      67 |   })
      68 |   afterAll(async () => {
      69 |     await browser.close()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:66:19)

FAIL tests/api-tests/extend-express-app.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/extend-express-app.test.ts:27:26)

FAIL tests/api-tests/fields/types/decimal.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/decimal.test.ts:2:20)

FAIL tests/api-tests/extend-http-server.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/extend-http-server.test.ts:27:26)

FAIL tests/api-tests/fields/types/timestamp.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/timestamp.test.ts:2:20)

FAIL tests/api-tests/fields/types/calendarDay.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/fields/types/calendarDay.test.ts:2:20)

FAIL tests/admin-ui-tests/init.test.ts (233.816 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Task List card should be visible

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › Clicking on the logo should return you to the Dashboard route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › Should see a 404 on request of the /init route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › List View › If all items are deleted from the last page, users should be redirected to the previous page if one exists

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › List View › The page users are redirected to on complete deletion of the last page, should have items

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Task List card should be visible

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › Clicking on the logo should return you to the Dashboard route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › Should see a 404 on request of the /init route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › List View › If all items are deleted from the last page, users should be redirected to the previous page if one exists

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › List View › The page users are redirected to on complete deletion of the last page, should have items

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      59 |       await page.waitForURL(/localhost:3000\/tasks\?.*(page=5)/)
      60 |       await page.getByText('Test Task: 45').waitFor()
    > 61 |     })
         |       ^
      62 |   })
      63 |
      64 |   afterAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:61:19)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6858)
      at Wn.request (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6565)
      at l (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:130:10067)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      59 |       await page.waitForURL(/localhost:3000\/tasks\?.*(page=5)/)
      60 |       await page.getByText('Test Task: 45').waitFor()
    > 61 |     })
         |       ^
      62 |   })
      63 |
      64 |   afterAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:61:19)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6858)
      at Wn.request (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6565)
      at l (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:130:10067)

FAIL packages/fields-document/src/DocumentEditor/divider.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/divider.test.tsx:1:122)

FAIL tests/admin-ui-tests/filters.test.ts (275.94 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › relationship filters › Lists are filterable by relationships

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● development › browser tests › relationship filters › Lists are filterable by relationships

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● development › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● development › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● production browser tests › browser tests › relationship filters › Lists are filterable by relationships

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● production browser tests › browser tests › relationship filters › Lists are filterable by relationships

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● production browser tests › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● production browser tests › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      111 |         ),
      112 |       })
    > 113 |       await page.goto('http://localhost:3000/tasks')
          |                   ^
      114 |       await page.getByText('21 Tasks').waitFor()
      115 |       await page.goto(
      116 |         `http://localhost:3000/tasks?filter=assignedTo_is_"${assignedTask.assignedTo.id}"`

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:113:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      111 |         ),
      112 |       })
    > 113 |       await page.goto('http://localhost:3000/tasks')
          |                   ^
      114 |       await page.getByText('21 Tasks').waitFor()
      115 |       await page.goto(
      116 |         `http://localhost:3000/tasks?filter=assignedTo_is_"${assignedTask.assignedTo.id}"`

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:113:19)

FAIL tests/admin-ui-tests/list-view-crud.test.ts (275.164 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Complete deletion success, only shows the successful deletion prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● development › browser tests › Complete deletion failure, only shows the successful failure prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● development › browser tests › Partial deletion failure

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Complete deletion success, only shows the successful deletion prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Complete deletion failure, only shows the successful failure prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Partial deletion failure

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      83 |     }
      84 |     await makeGqlRequest(query, variables)
    > 85 |     await page.goto('http://localhost:3000/tasks?sortBy=label&page=1')
         |                   ^
      86 |     await page.getByRole('checkbox', { name: 'Select All' }).click()
      87 |     await page.getByRole('button', { name: 'Delete' }).click()
      88 |     await page.getByRole('button', { name: 'Yes, delete' }).click()

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:85:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      83 |     }
      84 |     await makeGqlRequest(query, variables)
    > 85 |     await page.goto('http://localhost:3000/tasks?sortBy=label&page=1')
         |                   ^
      86 |     await page.getByRole('checkbox', { name: 'Select All' }).click()
      87 |     await page.getByRole('button', { name: 'Delete' }).click()
      88 |     await page.getByRole('button', { name: 'Yes, delete' }).click()

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:85:19)

FAIL tests/api-tests/fields/types/bigInt.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/bigInt.test.ts:2:20)

FAIL tests/examples-smoke-tests/field-groups.test.ts (225.732 s)
  ● dev › browser tests › Field group is rendered exactly once

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/field-groups/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Field group is rendered exactly once

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | exampleProjectTests('field-groups', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |   beforeAll(async () => {
      11 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:8:33)

  ● prod › browser tests › Field group is rendered exactly once

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/field-groups/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/field-groups/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Field group is rendered exactly once

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | exampleProjectTests('field-groups', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |   beforeAll(async () => {
      11 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:8:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      29 |     const id = res.data.createPost.id
      30 |     await page.goto(`http://localhost:3000/posts/${id}`)
    > 31 |     await expect(page.getByText('Some automatically updated meta fields')).toHaveCount(1)
         |                   ^
      32 |   })
      33 |   afterAll(async () => {
      34 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:31:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      29 |     const id = res.data.createPost.id
      30 |     await page.goto(`http://localhost:3000/posts/${id}`)
    > 31 |     await expect(page.getByText('Some automatically updated meta fields')).toHaveCount(1)
         |                   ^
      32 |   })
      33 |   afterAll(async () => {
      34 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/field-groups.test.ts:31:19)

FAIL tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts (225.747 s)
  ● dev › browser tests › Has a nav link to the Dashboard

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Has a nav link to the Dashboard

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● dev › browser tests › Has a nav link to the Tasks list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Has a nav link to the Tasks list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● dev › browser tests › Has a nav link to the People list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Has a nav link to the People list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● prod › browser tests › Has a nav link to the Dashboard

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Has a nav link to the Dashboard

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● prod › browser tests › Has a nav link to the Tasks list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Has a nav link to the Tasks list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)

  ● prod › browser tests › Has a nav link to the People list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-navigation/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Has a nav link to the People list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-navigation', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      24 |     const href = await navElement?.getAttribute('href')
      25 |     expect(href).toBe('/people')
    > 26 |   })
         |     ^
      27 |   afterAll(async () => {
      28 |     await browser.close()
      29 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:26:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      24 |     const href = await navElement?.getAttribute('href')
      25 |     expect(href).toBe('/people')
    > 26 |   })
         |     ^
      27 |   afterAll(async () => {
      28 |     await browser.close()
      29 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-navigation.test.ts:26:19)

FAIL tests/examples-smoke-tests/auth.test.ts (186.205 s)
  ● dev › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)

  ● dev › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)

  ● prod › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › going to any page redirects to /init with a Cache-Control: no-cache, max-age=0 header

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)

  ● prod › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.user.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/auth/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/auth/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/auth/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('../examples/auth', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      19 |     expect(resWithAutoRedirect.status).toEqual(200)
      20 |     expect(resWithAutoRedirect.url).toEqual('http://localhost:3000/init')
    > 21 |   })
         |     ^
      22 |   initFirstItemTest(() => page)
      23 |   afterAll(async () => {
      24 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:21:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      19 |     expect(resWithAutoRedirect.status).toEqual(200)
      20 |     expect(resWithAutoRedirect.url).toEqual('http://localhost:3000/init')
    > 21 |   })
         |     ^
      22 |   initFirstItemTest(() => page)
      23 |   afterAll(async () => {
      24 |     await browser.close()

      at Object.<anonymous> (tests/examples-smoke-tests/auth.test.ts:21:19)

FAIL tests/examples-smoke-tests/extend-express-app.test.ts (173.033 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)

  ● dev › browser tests › Get Posts

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Get Posts

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)

  ● prod › browser tests › Get Posts

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-express-app/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-express-app/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Get Posts

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-express-app', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      22 |     }).then(res => res.json())
      23 |     expect(tasks).toEqual([])
    > 24 |   })
         |     ^
      25 |   afterAll(async () => {
      26 |     await browser.close()
      27 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:24:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      22 |     }).then(res => res.json())
      23 |     expect(tasks).toEqual([])
    > 24 |   })
         |     ^
      25 |   afterAll(async () => {
      26 |     await browser.close()
      27 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-express-app.test.ts:24:19)

FAIL tests/examples-smoke-tests/custom-admin-ui-pages.test.ts (124.963 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:29:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-pages/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:29:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:40:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')



      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-pages.test.ts:40:19)

FAIL tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts (114.546 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-nexus', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-nexus/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-nexus', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-nexus.test.ts:15:19)

FAIL tests/examples-smoke-tests/default-values.test.ts (120.429 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/default-values/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/default-values/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('default-values', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/default-values/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/default-values/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/default-values/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('default-values', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/default-values.test.ts:15:19)

FAIL tests/api-tests/fields/types/integer.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/integer.test.ts:2:20)

FAIL tests/api-tests/fields/types/float.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/float.test.ts:2:20)

FAIL tests/examples-smoke-tests/virtual-field.test.ts (123.662 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/virtual-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('virtual-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/virtual-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/virtual-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('virtual-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/virtual-field.test.ts:15:19)

FAIL tests/examples-smoke-tests/usecase-blog.test.ts (142.757 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.author.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-blog/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-blog', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.author.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-blog/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-blog/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-blog', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-blog.test.ts:15:19)

FAIL tests/examples-smoke-tests/usecase-todo.test.ts (133.437 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-todo/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-todo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-todo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-todo/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-todo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("People")')])
      14 |     await page.waitForSelector('a:has-text("New Person")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-todo.test.ts:15:19)

FAIL tests/api-tests/fields/types/checkbox.test.ts
  ● Test suite failed to run

    Unsupported environment DATABASE_URL=""

      42 | export function expectInternalServerError(
      43 |   errors: readonly any[] | undefined,
    > 44 |   args: { path: any[]; message: string }[]
         |         ^
      45 | ) {
      46 |   const unpackedErrors = unpackErrors(errors)
      47 |   expect(unpackedErrors).toEqual(

      at tests/api-tests/utils.ts:44:9
      at Object.<anonymous> (tests/api-tests/utils.ts:45:3)
      at Object.<anonymous> (tests/api-tests/test-runner.ts:45:20)
      at Object.<anonymous> (tests/api-tests/fields/types/utils.ts:28:26)
      at Object.<anonymous> (tests/api-tests/fields/types/checkbox.test.ts:2:20)

FAIL tests/examples-smoke-tests/custom-field.test.ts (114.961 s)
  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Posts")')])
      14 |     await page.waitForSelector('a:has-text("New Post")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-field.test.ts:15:19)

FAIL tests/examples-smoke-tests/custom-admin-ui-logo.test.ts (110.582 s)
  ● dev › browser tests › Find custom logo

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Find custom logo

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-logo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:6:33)

  ● prod › browser tests › Find custom logo

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/custom-admin-ui-logo/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Find custom logo

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('custom-admin-ui-logo', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     const content = await page.textContent('h3 a')
      14 |     expect(content).toBe('LegendBoulder After')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     const content = await page.textContent('h3 a')
      14 |     expect(content).toBe('LegendBoulder After')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/custom-admin-ui-logo.test.ts:15:19)

FAIL tests/examples-smoke-tests/usecase-roles.test.ts (87.651 s)
  ● dev › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.todo.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-roles/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-roles', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:6:33)

  ● prod › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.todo.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/usecase-roles/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/usecase-roles/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('usecase-roles', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:12:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/usecase-roles.test.ts:12:19)

FAIL tests/examples-smoke-tests/testing.test.ts (70.724 s)
  ● dev › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/testing/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/testing/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('testing', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:6:33)

  ● prod › browser tests › init first item

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/testing/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/testing/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/testing/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › init first item

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('testing', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:12:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      10 |     await loadIndex(page)
      11 |   })
    > 12 |   initFirstItemTest(() => page)
         |                   ^
      13 |   afterAll(async () => {
      14 |     await browser.close()
      15 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/testing.test.ts:12:19)

FAIL tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts (1258.2 s)
  ● dev › start keystone in dev

    thrown: "Exceeded timeout of 1200000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      103 |           env: process.env,
      104 |         })
    > 105 |         if (process.env.VERBOSE) {
          |       ^
      106 |           const logChunk = (chunk: any) => {
      107 |             console.log(chunk.toString('utf8'))
      108 |           }

      at tests/examples-smoke-tests/utils.ts:105:7
          at Array.forEach (<anonymous>)
      at exampleProjectTests (tests/examples-smoke-tests/utils.ts:88:33)
      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:2:38)

  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-ts', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-ts/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-ts', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-ts.test.ts:15:19)

FAIL tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts (1258.451 s)
  ● dev › start keystone in dev

    thrown: "Exceeded timeout of 1200000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      103 |           env: process.env,
      104 |         })
    > 105 |         if (process.env.VERBOSE) {
          |       ^
      106 |           const logChunk = (chunk: any) => {
      107 |             console.log(chunk.toString('utf8'))
      108 |           }

      at tests/examples-smoke-tests/utils.ts:105:7
          at Array.forEach (<anonymous>)
      at exampleProjectTests (tests/examples-smoke-tests/utils.ts:88:33)
      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:2:38)

  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-tools', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/extend-graphql-schema-graphql-tools/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('extend-graphql-schema-graphql-tools', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/extend-graphql-schema-graphql-tools.test.ts:15:19)

FAIL tests/examples-smoke-tests/document-field.test.ts (1258.056 s)
  ● dev › start keystone in dev

    thrown: "Exceeded timeout of 1200000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      103 |           env: process.env,
      104 |         })
    > 105 |         if (process.env.VERBOSE) {
          |       ^
      106 |           const logChunk = (chunk: any) => {
      107 |             console.log(chunk.toString('utf8'))
      108 |           }

      at tests/examples-smoke-tests/utils.ts:105:7
          at Array.forEach (<anonymous>)
      at exampleProjectTests (tests/examples-smoke-tests/utils.ts:88:33)
      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:2:38)

  ● dev › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/document-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/document-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● dev › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('document-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:6:33)

  ● prod › browser tests › Load list

    PrismaClientInitializationError: 
    Invalid `prisma.post.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (examples/document-field/node_modules/myprisma/runtime/library.js:121:6858)
      at Wn.request (examples/document-field/node_modules/myprisma/runtime/library.js:121:6565)
      at l (examples/document-field/node_modules/myprisma/runtime/library.js:130:10067)

  ● prod › browser tests › Load list

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | exampleProjectTests('document-field', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |   beforeAll(async () => {
      8 |     browser = await browserType.launch()
      9 |     page = await browser.newPage()

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:15:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      13 |     await Promise.all([page.waitForNavigation(), page.click('h3:has-text("Authors")')])
      14 |     await page.waitForSelector('a:has-text("New Author")')
    > 15 |   })
         |     ^
      16 |   afterAll(async () => {
      17 |     await browser.close()
      18 |   })

      at Object.<anonymous> (tests/examples-smoke-tests/document-field.test.ts:15:19)


Snapshot Summary
 › 11 snapshots failed from 2 test suites. Inspect your code changes or run `npm test -- -u` to update them.

Test Suites: 136 failed, 8 passed, 144 total
Tests:       115 failed, 109 passed, 224 total
Snapshots:   11 failed, 24 passed, 35 total
Time:        1548.887 s
Ran all test suites.
 ELIFECYCLE  Test failed. See above for more details.
+ : '>>>>> End Test Output'
