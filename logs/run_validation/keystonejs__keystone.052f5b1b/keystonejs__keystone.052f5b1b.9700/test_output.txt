+ cd /testbed
+ : '>>>>> Start Test Output'
+ NODE_OPTIONS=--max-old-space-size=8192
+ pnpm test

> @keystone-6/mono-repo@ test /testbed
> jest

FAIL packages/fields-document/src/DocumentEditor/pasting/html-from-other-editors.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/test-utils.tsx:23:20)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/html-from-other-editors.test.tsx:1:127)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/normalization.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-style.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { cx, css } from '@emotion/css';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      16 | import { updateComponentBlockElementProps } from './update-element'
      17 | import { ComponentBlockRender } from './component-block-render'
    > 18 | import { ChromefulComponentBlockElement } from './chromeful-element'
         |              ^
      19 | import { ChromelessComponentBlockElement } from './chromeless-element'
      20 |
      21 | export { withComponentBlocks } from './with-component-blocks'

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/index.tsx:18:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/normalization.test.tsx:3:9)

FAIL tests/api-tests/hooks.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/crud/many-to-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/queries/orderBy.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/queries/filters.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/lists.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/lists.test.tsx:2:20)

FAIL packages/fields-document/src/DocumentEditor/marks.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/marks.test.tsx:2:20)

FAIL tests/api-tests/relationships/crud/one-to-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/crud/one-to-one.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/nested-mutations/connect-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/document-features-normalization.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/component-blocks.tsx:26:18)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/document-features-normalization.test.tsx:1:133)

FAIL tests/api-tests/relationships/crud/many-to-many-one-sided.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-one.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/validation.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/validation.test.tsx:2:20)

FAIL tests/api-tests/relationships/crud/one-to-many-one-sided.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/crud-self-ref/one-to-many-one-sided.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/insertion-and-preview-props.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/insertion-and-preview-props.test.tsx:5:14)

FAIL tests/api-tests/relationships/nested-mutations/connect-singular.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/queries/limits.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/array-field.test.tsx:25:20)

FAIL tests/api-tests/relationships/nested-mutations/create-singular.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/nested-mutations/create-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/queries/relationships.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests2/omit.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/crud-self-ref/many-to-many-one-sided.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/crud.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/pasting/markdown.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/markdown.test.tsx:2:20)

FAIL tests/api-tests/relationships/nested-mutations/two-way-backreference/to-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/crud-self-ref/many-to-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/nested-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/nested-array-field.test.tsx:24:20)

PASS packages/core/tests/telemetry.test.ts (6.23 s)
  ● Console

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:176:11)

    console.log
      Keystone Telemetry

      at inform (packages/core/src/lib/telemetry.ts:177:11)

    console.log
      Keystone collects anonymous data when you run "keystone dev"

      at inform (packages/core/src/lib/telemetry.ts:178:11)

    console.log
      You can use "keystone telemetry --help" to update your preferences at any time

      at inform (packages/core/src/lib/telemetry.ts:179:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:183:13)

    console.log
      No telemetry data has been sent as part of this notice

      at inform (packages/core/src/lib/telemetry.ts:184:13)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:186:11)

    console.log
      Telemetry data will be sent the next time you run "keystone dev"

      at printNext (packages/core/src/lib/telemetry.ts:148:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:188:11)

    console.log
      For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)

      at inform (packages/core/src/lib/telemetry.ts:189:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:176:11)

    console.log
      Keystone Telemetry

      at inform (packages/core/src/lib/telemetry.ts:177:11)

    console.log
      Keystone collects anonymous data when you run "keystone dev"

      at inform (packages/core/src/lib/telemetry.ts:178:11)

    console.log
      You can use "keystone telemetry --help" to update your preferences at any time

      at inform (packages/core/src/lib/telemetry.ts:179:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:183:13)

    console.log
      No telemetry data has been sent as part of this notice

      at inform (packages/core/src/lib/telemetry.ts:184:13)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:186:11)

    console.log
      Telemetry data will be sent the next time you run "keystone dev"

      at printNext (packages/core/src/lib/telemetry.ts:148:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:188:11)

    console.log
      For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)

      at inform (packages/core/src/lib/telemetry.ts:189:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:176:11)

    console.log
      Keystone Telemetry

      at inform (packages/core/src/lib/telemetry.ts:177:11)

    console.log
      Keystone collects anonymous data when you run "keystone dev"

      at inform (packages/core/src/lib/telemetry.ts:178:11)

    console.log
      You can use "keystone telemetry --help" to update your preferences at any time

      at inform (packages/core/src/lib/telemetry.ts:179:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:183:13)

    console.log
      No telemetry data has been sent as part of this notice

      at inform (packages/core/src/lib/telemetry.ts:184:13)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:186:11)

    console.log
      Telemetry data will be sent the next time you run "keystone dev"

      at printNext (packages/core/src/lib/telemetry.ts:148:11)

    console.log
      undefined

      at inform (packages/core/src/lib/telemetry.ts:188:11)

    console.log
      For more information, including how to opt-out see https://keystonejs.com/telemetry (updated 2024-08-20)

      at inform (packages/core/src/lib/telemetry.ts:189:11)

    console.log
      Keystone telemetry has been disabled

      at printTelemetryStatus (packages/core/src/lib/telemetry.ts:159:13)

    console.log
      undefined

      at printTelemetryStatus (packages/core/src/lib/telemetry.ts:160:13)

    console.log
      Telemetry data will not be sent by this system user

      at printNext (packages/core/src/lib/telemetry.ts:145:13)

FAIL packages/fields-document/src/DocumentEditor/markdown-link-shortcut.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/markdown-link-shortcut.test.tsx:24:18)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/insert-break-and-delete.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-combobox.js:2
    import { getChildNodes } from '@react-stately/collections';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      31 |           (forceValidation || isDirty) && !opts.validate(value) ? 'Invalid integer' : null
      32 |         }
    > 33 |         step={1}
         |                 ^
      34 |         onBlur={() => setDirty(true)}
      35 |         onChange={x => onChange?.(!Number.isInteger(x) ? NaN : x)}
      36 |         value={value ?? NaN}

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/fields-ui.tsx:33:23)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/api.tsx:27:24)
      at Object.<anonymous> (packages/fields-document/src/component-blocks.tsx:26:18)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/insert-break-and-delete.test.tsx:1:133)

FAIL tests/cli-tests/migrations.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/queries/cache-hints.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/insert-menu.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/insert-menu.test.tsx:2:20)

FAIL tests/api-tests/admin-meta.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/images.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/filtering/nested.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/filtering/filtering.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/multi-child-field-in-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/multi-child-field-in-array-field.test.tsx:25:20)

FAIL tests/api-tests/relationships/nested-mutations/create-and-connect-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/layouts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/layouts.test.tsx:1:122)

FAIL tests2/access.field.filterableN.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/auth-header.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/auth.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/types/relationship.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/nested-mutations/set-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/id-field.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/tests/test-utils.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/test-utils.test.tsx:2:20)

FAIL tests/api-tests/relationships/foreign-key.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/many-to-one-to-one.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/queries/cursor-pagination.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts
  ● does not allow circular object

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow circular object 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      10 | type EasilyCircularObject = ObjectField<{
      11 |   x: EasilyCircularObject
    > 12 | }>
         |   ^
      13 | const easilyCircularObject: EasilyCircularObject = fields.object({
      14 |   get x() {
      15 |     return easilyCircularObject

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:12:6)

  ● does not allow a circular object within an array

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within an array 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      17 | })
      18 |
    > 19 | const discriminant = fields.checkbox({ label: '' })
         |      ^
      20 |
      21 | test('does not allow circular object', () => {
      22 |   expect(() => {

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:19:6)

  ● does not allow a circular object within a value for a default discriminant of a conditional field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within a value for a default discriminant of a conditional field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      31 |     assertValidComponentSchema(fields.array(easilyCircularObject), new Set(), 'document')
      32 |   }).toThrowErrorMatchingInlineSnapshot(
    > 33 |     `[Error: The field "array.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]`
         |      ^
      34 |   )
      35 | })
      36 |

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:33:6)

  ● does not allow a circular object within a value for a non-default discriminant of a conditional field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular object within a value for a non-default discriminant of a conditional field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.true.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.true.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      45 |       new Set(),
      46 |       'document'
    > 47 |     )
         |      ^
      48 |   }).toThrowErrorMatchingInlineSnapshot(
      49 |     `[Error: The field "conditional.false.object.x" is the same as it's ancestor. Use an array or conditional field for recursive structures.]`
      50 |   )

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:47:6)

  ● does not allow a circular conditional if it's the default

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a circular conditional if it's the default 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The field "conditional.false" is the same as it's ancestor. Use an array or conditional field for recursive structures.]
    + "The field "conditional.false" is the same as it's ancestor. Use an array or conditional field for recursive structures."

      67 | })
      68 |
    > 69 | test("does allow a circular conditional as long as it's not the default", () => {
         |      ^
      70 |   type Field = ConditionalField<
      71 |     typeof discriminant,
      72 |     { true: Field; false: FormField<null, undefined> }

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:69:6)

  ● does not allow a field that returns a different field from a getter each time

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a field that returns a different field from a getter each time 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: Fields on an object field must not change over time but the field at "array.object.blah" changes between accesses]
    + "Fields on an object field must not change over time but the field at "array.object.blah" changes between accesses"

      91 |     },
      92 |     true: fields.empty(),
    > 93 |   })
         |     ^
      94 |   expect(() => {
      95 |     assertValidComponentSchema(conditional, new Set(), 'document')
      96 |   }).toThrowErrorMatchingInlineSnapshot(

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:93:6)

  ● exceeds the call stack size for an infinitely recursive field where all fields are different

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `exceeds the call stack size for an infinitely recursive field where all fields are different 1`

    - Snapshot  - 1
    + Received  + 1

    - [RangeError: Maximum call stack size exceeded]
    + "Maximum call stack size exceeded"

      111 |       },
      112 |     })
    > 113 |   )
          |    ^
      114 |   assertValidComponentSchema(blah, new Set(), 'document')
      115 | })
      116 |

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:113:6)

  ● relationship field where no list exists with that name

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `relationship field where no list exists with that name 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: The relationship field at "object.a" has the listKey "Blah" but no list named "Blah" exists.]
    + "The relationship field at "object.a" has the listKey "Blah" but no list named "Blah" exists."

      120 |       blah: Field
      121 |     }>
    > 122 |   >
          |    ^
      123 |   const blah: () => Field = () =>
      124 |     fields.array(
      125 |       fields.object({

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:122:6)

  ● does not allow a child field in a structure field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a child field in a structure field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: There is a child field at "object.a" but child fields are not allowed in structure fields.]
    + "There is a child field at "object.a" but child fields are not allowed in structure fields."

      138 | // this is just a test to say "this is explicitly unhandled"
      139 | // if you do this, you know you're doing Bad Things
    > 140 | test('exceeds the call stack size for an infinitely recursive field where all fields are different', () => {
          |      ^
      141 |   type Field = ArrayField<
      142 |     ObjectField<{
      143 |       blah: Field

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:140:6)

  ● does not allow a custom form field without a graphql field in a structure field

    expect(received).toThrowErrorMatchingInlineSnapshot(snapshot)

    Snapshot name: `does not allow a custom form field without a graphql field in a structure field 1`

    - Snapshot  - 1
    + Received  + 1

    - [Error: There is a form field without a configured GraphQL schema at "object.a", fields used in the structure field must have a GraphQL schema.]
    + "There is a form field without a configured GraphQL schema at "object.a", fields used in the structure field must have a GraphQL schema."

      161 |   }).toThrowErrorMatchingInlineSnapshot(`[RangeError: Maximum call stack size exceeded]`)
      162 | })
    > 163 |
          | ^
      164 | test('relationship field where no list exists with that name', () => {
      165 |   expect(() => {
      166 |     assertValidComponentSchema(

      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/field-assertions.test.ts:163:6)

 › 10 snapshots failed.
FAIL tests/api-tests/fields/types/document.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/pasting/random-html.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/test-utils.tsx:23:20)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/random-html.test.tsx:1:127)

FAIL tests/api-tests/fields/files.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/nested-mutations/disconnect-many.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/queries/singletons.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/nested-mutations/disconnect-singular.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/relation-name.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/types/Virtual.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/prisma-errors.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/required.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests2/access.create.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests2/access.update.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/unique.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/code-block.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/code-block.test.tsx:2:20)

FAIL tests/api-tests/relationships/shared-names.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/component-blocks/child-field-in-recursive-array-field.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/component-blocks/child-field-in-recursive-array-field.test.tsx:24:20)

PASS packages/fields-document/src/DocumentEditor/component-blocks/preview-props.test.ts
FAIL tests/api-tests/fields/non-null.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL docs/markdoc/index.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@sindresorhus+slugify@3.0.0/node_modules/@sindresorhus/slugify/index.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import escapeStringRegexp from 'escape-string-regexp';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      33 |       selfClosing: true,
      34 |     },
    > 35 |     details: {
         |               ^
      36 |       render: 'details',
      37 |       children: nodes.document.children,
      38 |     },

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (docs/markdoc/config.ts:35:30)
      at Object.<anonymous> (docs/markdoc/index.ts:42:21)
      at Object.<anonymous> (docs/markdoc/index.test.ts:25:16)

FAIL tests2/access.delete.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/filtering/access-control.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/link.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/link.test.tsx:1:122)

FAIL tests/api-tests/relationships/nested-mutations/reconnect-many-to-one.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/to-one-query-batching.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/pasting/links.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/links.test.tsx:1:122)

FAIL packages/fields-document/src/DocumentEditor/pasting/pasting-from-other-slate-editor.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/pasting/pasting-from-other-slate-editor.test.tsx:5:20)

FAIL packages/fields-document/src/DocumentEditor/blockquote.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/blockquote.test.tsx:1:122)

FAIL tests/api-tests/extend-graphql-schema.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/cli-tests/artifacts.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests2/access.query.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/db-map.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/heading.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/heading.test.tsx:1:122)

FAIL tests/api-tests/indexes.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/label-search-field-validation.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/document.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests2/access.field.filterable.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/types/text.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/body-parser.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/relationships/nested-mutations/create-and-connect-singular.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/cli-tests/build.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL docs/scripts/replace-show-next-release/markdoc.test.ts
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@sindresorhus+slugify@3.0.0/node_modules/@sindresorhus/slugify/index.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import escapeStringRegexp from 'escape-string-regexp';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      33 |       selfClosing: true,
      34 |     },
    > 35 |     details: {
         |               ^
      36 |       render: 'details',
      37 |       children: nodes.document.children,
      38 |     },

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (docs/markdoc/config.ts:35:30)
      at Object.<anonymous> (docs/scripts/replace-show-next-release/markdoc.ts:34:21)
      at Object.<anonymous> (docs/scripts/replace-show-next-release/markdoc.test.ts:1:124)

FAIL tests/api-tests/fields/types/password.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/unsupported.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

PASS packages/fields-document/src/DocumentEditor/component-blocks/utils.test.ts
FAIL tests/api-tests/relationships/nested-mutations/two-way-backreference/to-one-required.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/field-groups.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/shortcuts.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/shortcuts.test.tsx:2:20)

FAIL packages/core/src/fields/types/timestamp/views/__tests__/index.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-button.js:2
    import { c } from './react-compiler-runtime-19061925.js';
    ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      26 |   const parsedValue = value.value ? parseAbsoluteToLocal(value.value) : null
      27 |
    > 28 |   const [isDirty, setDirty] = useState(false)
         |                     ^
      29 |   const [isReadonlyUTC, toggleReadonlyUTC] = useReducer(prev => !prev, false)
      30 |   const dateFormatter = useDateFormatter({ dateStyle: 'long', timeStyle: 'long' })
      31 |

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/core/src/fields/types/timestamp/views/index.tsx:28:21)
      at Object.<anonymous> (packages/core/src/fields/types/timestamp/views/__tests__/index.tsx:1:118)

FAIL tests/cli-tests/prisma.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/types/select.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/db-enable-logging.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/admin-ui-tests/filters.test.ts (38.977 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › relationship filters › Lists are filterable by relationships

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● development › browser tests › relationship filters › Lists are filterable by relationships

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● development › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● development › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › relationship filters › Lists are filterable by relationships

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● production browser tests › browser tests › relationship filters › Lists are filterable by relationships

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)

  ● production browser tests › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       5 |   let browser: Browser = undefined as any
       6 |   let page: Page = undefined as any
    >  7 |   let context: BrowserContext = undefined as any
         |                                 ^
       8 |
       9 |   beforeAll(async () => {
      10 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:7:33)

  ● production browser tests › browser tests › relationship filters › Deeplinking a url with the appropriate relationship filter query params will apply the filter

    TypeError: Cannot read properties of undefined (reading 'close')

      15 |       context = await browser.newContext()
      16 |       page = await context.newPage()
    > 17 |       await loadIndex(page)
         |                     ^
      18 |       await deleteAllData('./tests/test-projects/basic')
      19 |     })
      20 |     afterEach(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:17:21)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      111 |         ),
      112 |       })
    > 113 |       await page.goto('http://localhost:3000/tasks')
          |                   ^
      114 |       await page.getByText('21 Tasks').waitFor()
      115 |       await page.goto(
      116 |         `http://localhost:3000/tasks?filter=assignedTo_is_"${assignedTask.assignedTo.id}"`

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:113:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      111 |         ),
      112 |       })
    > 113 |       await page.goto('http://localhost:3000/tasks')
          |                   ^
      114 |       await page.getByText('21 Tasks').waitFor()
      115 |       await page.goto(
      116 |         `http://localhost:3000/tasks?filter=assignedTo_is_"${assignedTask.assignedTo.id}"`

      at Object.<anonymous> (tests/admin-ui-tests/filters.test.ts:113:19)

FAIL packages/fields-document/src/DocumentEditor/soft-breaks.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/soft-breaks.test.tsx:2:20)

FAIL tests/admin-ui-tests/relations.test.ts (42.456 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Creating related item does not submit main form

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › selection is not removed when focusing and blurring relationship field

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › view related relationships on the item page filters the list view

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● development › browser tests › the combobox having to paginate doesn't break the page

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Creating related item does not submit main form

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › selection is not removed when focusing and blurring relationship field

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › view related relationships on the item page filters the list view

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)

  ● production browser tests › browser tests › the combobox having to paginate doesn't break the page

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

       6 |
       7 | adminUITests('./tests/test-projects/basic', browserType => {
    >  8 |   let browser: Browser = undefined as any
         |                                 ^
       9 |   let page: Page = undefined as any
      10 |
      11 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:8:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      94 |           ...Array.from({ length: 100 }, (_, i) => ({ name: `User ${i}` })),
      95 |         ],
    > 96 |       }
         |        ^
      97 |     )
      98 |
      99 |     await page.goto(`http://localhost:3000/tasks/create`)

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:96:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      94 |           ...Array.from({ length: 100 }, (_, i) => ({ name: `User ${i}` })),
      95 |         ],
    > 96 |       }
         |        ^
      97 |     )
      98 |
      99 |     await page.goto(`http://localhost:3000/tasks/create`)

      at Object.<anonymous> (tests/admin-ui-tests/relations.test.ts:96:19)

FAIL tests/api-tests/defaults.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests2/utils.test.ts
  ● Test suite failed to run

    Your test suite must contain at least one test.

      at onResult (node_modules/.pnpm/@jest+core@29.7.0_babel-plugin-macros@3.1.0/node_modules/@jest/core/build/TestScheduler.js:133:18)
      at node_modules/.pnpm/@jest+core@29.7.0_babel-plugin-macros@3.1.0/node_modules/@jest/core/build/TestScheduler.js:254:19
      at node_modules/.pnpm/emittery@0.13.1/node_modules/emittery/index.js:363:13
          at Array.map (<anonymous>)
      at Emittery.emit (node_modules/.pnpm/emittery@0.13.1/node_modules/emittery/index.js:361:23)

TAP version 13
# Subtest: utils
    # Subtest: humanize()
    ok 1 - humanize()
      ---
      duration_ms: 5.793571
      ...
    1..1
ok 1 - utils
  ---
  duration_ms: 21.642533
  type: 'suite'
  ...
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: Test Error for dev, exited with error 1, see admin-ui/utils.ts
    at ChildProcess.<anonymous> (/testbed/tests/admin-ui-tests/utils.ts:148:11)
    at ChildProcess.emit (node:events:524:28)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)

Node.js v20.19.6
FAIL tests/admin-ui-tests/list-view-crud.test.ts (42.053 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Complete deletion success, only shows the successful deletion prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● development › browser tests › Complete deletion failure, only shows the successful failure prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● development › browser tests › Partial deletion failure

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Complete deletion success, only shows the successful deletion prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Complete deletion failure, only shows the successful failure prompt

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)

  ● production browser tests › browser tests › Partial deletion failure

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 |
      5 | adminUITests('./tests/test-projects/crud-notifications', browserType => {
    > 6 |   let browser: Browser = undefined as any
        |                                 ^
      7 |   let page: Page = undefined as any
      8 |
      9 |   beforeAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      83 |     }
      84 |     await makeGqlRequest(query, variables)
    > 85 |     await page.goto('http://localhost:3000/tasks?sortBy=label&page=1')
         |                   ^
      86 |     await page.getByRole('checkbox', { name: 'Select All' }).click()
      87 |     await page.getByRole('button', { name: 'Delete' }).click()
      88 |     await page.getByRole('button', { name: 'Yes, delete' }).click()

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:85:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      83 |     }
      84 |     await makeGqlRequest(query, variables)
    > 85 |     await page.goto('http://localhost:3000/tasks?sortBy=label&page=1')
         |                   ^
      86 |     await page.getByRole('checkbox', { name: 'Select All' }).click()
      87 |     await page.getByRole('button', { name: 'Delete' }).click()
      88 |     await page.getByRole('button', { name: 'Yes, delete' }).click()

      at Object.<anonymous> (tests/admin-ui-tests/list-view-crud.test.ts:85:19)

FAIL tests/api-tests/extend-express-app.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/admin-ui-tests/navigation.test.ts (37.098 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Nav contains a Dashboard route by default

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When at the index, the Dashboard NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When navigated to a List route, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › Can access all list pages via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › Can not access hidden lists via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When navigated to an Item view, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● development › browser tests › When pressing a list view nav item from an item view, the correct route should be reached

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Nav contains a Dashboard route by default

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When at the index, the Dashboard NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When navigated to a List route, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › Can access all list pages via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › Can not access hidden lists via the navigation

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When navigated to an Item view, the representative list NavItem is selected

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)

  ● production browser tests › browser tests › When pressing a list view nav item from an item view, the correct route should be reached

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      64 |     await page.waitForSelector('nav a:has-text("Tasks")')
      65 |     await page.click('nav a:has-text("Tasks")')
    > 66 |     await page.waitForURL('http://localhost:3000/tasks')
         |                   ^
      67 |   })
      68 |   afterAll(async () => {
      69 |     await browser.close()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:66:19)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      64 |     await page.waitForSelector('nav a:has-text("Tasks")')
      65 |     await page.click('nav a:has-text("Tasks")')
    > 66 |     await page.waitForURL('http://localhost:3000/tasks')
         |                   ^
      67 |   })
      68 |   afterAll(async () => {
      69 |     await browser.close()

      at Object.<anonymous> (tests/admin-ui-tests/navigation.test.ts:66:19)

FAIL tests/api-tests/extend-http-server.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/admin-ui-tests/init.test.ts (38.837 s)
  ● development › prepare keystone

    TimeoutError: The operation was aborted due to timeout



  ● development › browser tests › Task List card should be visible

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › Clicking on the logo should return you to the Dashboard route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › Should see a 404 on request of the /init route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › List View › If all items are deleted from the last page, users should be redirected to the previous page if one exists

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● development › browser tests › List View › The page users are redirected to on complete deletion of the last page, should have items

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › prepare keystone

    Test Error for build, exited with error 1, see admin-ui/utils.ts

      146 |         return reject(
      147 |           new Error(
    > 148 |             `Test Error for ${commands}, exited with error ${exitCode}, see admin-ui/utils.ts`
          |           ^
      149 |           )
      150 |         )
      151 |       resolve()

      at ChildProcess.<anonymous> (tests/admin-ui-tests/utils.ts:148:11)

  ● production browser tests › browser tests › Task List card should be visible

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › Clicking on the logo should return you to the Dashboard route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › Should see a 404 on request of the /init route

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › List View › If all items are deleted from the last page, users should be redirected to the previous page if one exists

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)

  ● production browser tests › browser tests › List View › The page users are redirected to on complete deletion of the last page, should have items

    browserType.launch: Executable doesn't exist at /root/.cache/ms-playwright/chromium_headless_shell-1194/chrome-linux/headless_shell
    ╔═════════════════════════════════════════════════════════════════════════╗
    ║ Looks like Playwright Test or Playwright was just installed or updated. ║
    ║ Please run the following command to download new browsers:              ║
    ║                                                                         ║
    ║     pnpm exec playwright install                                        ║
    ║                                                                         ║
    ║ <3 Playwright Team                                                      ║
    ╚═════════════════════════════════════════════════════════════════════════╝

      4 | adminUITests('./tests/test-projects/basic', browserType => {
      5 |   let browser: Browser = undefined as any
    > 6 |   let page: Page = undefined as any
        |                                 ^
      7 |
      8 |   beforeAll(async () => {
      9 |     browser = await browserType.launch()

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:6:33)


  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      59 |       await page.waitForURL(/localhost:3000\/tasks\?.*(page=5)/)
      60 |       await page.getByText('Test Task: 45').waitFor()
    > 61 |     })
         |       ^
      62 |   })
      63 |
      64 |   afterAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:61:19)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6858)
      at Wn.request (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6565)
      at l (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:130:10067)

  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'close')

      59 |       await page.waitForURL(/localhost:3000\/tasks\?.*(page=5)/)
      60 |       await page.getByText('Test Task: 45').waitFor()
    > 61 |     })
         |       ^
      62 |   })
      63 |
      64 |   afterAll(async () => {

      at Object.<anonymous> (tests/admin-ui-tests/init.test.ts:61:19)

  ● Test suite failed to run

    PrismaClientInitializationError: 
    Invalid `prisma.task.deleteMany()` invocation:


    error: Environment variable not found: DATABASE_URL.
      -->  schema.prisma:5
       | 
     4 | datasource sqlite {
     5 |   url               = env("DATABASE_URL")
       | 

    Validation Error Count: 1

      at Wn.handleRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:7835)
      at Wn.handleAndLogRequestError (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6858)
      at Wn.request (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:121:6565)
      at l (tests/test-projects/basic/node_modules/.testprisma/client/runtime/library.js:130:10067)

FAIL tests/api-tests/fields/types/decimal.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL tests/api-tests/fields/types/calendarDay.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

PASS packages/core/src/fields/types/timestamp/views/__tests__/utils.tsx
FAIL tests/api-tests/fields/types/timestamp.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

FAIL packages/fields-document/src/DocumentEditor/divider.test.tsx
  ● Test suite failed to run

    Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default "node_modules" folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your "node_modules" files transformed, you can specify a custom "transformIgnorePatterns" in your config.
     • If you need a custom transformation specify a "transform" option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the "moduleNameMapper" config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /testbed/node_modules/.pnpm/@keystar+ui@0.7.19_next@15.5.6_@babel+core@7.28.5_@opentelemetry+api@1.9.0_babel-plugin-macro_mmsjdjbelxyt4paqhfb2l4agfi/node_modules/@keystar/ui/dist/keystar-ui-core.js:1
    ({"Object.<anonymous>":function(module,exports,require,__dirname,__filename,jest){import { createContext, useContext, useLayoutEffect } from 'react';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      36 |       return
      37 |     }
    > 38 |     if (stuff[0].includes('When testing React components that depend on asynchronous data')) {
         |                   ^
      39 |       return
      40 |     }
      41 |     // TODO: ...

      at Runtime.createScriptFromCode (node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js:1505:14)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/tests/utils.tsx:38:19)
      at Object.<anonymous> (packages/fields-document/src/DocumentEditor/divider.test.tsx:1:122)

FAIL tests/api-tests/fields/types/bigInt.test.ts
  ● Test suite failed to run

    Transform failed with 1 error:
    <stdin>:454:39: ERROR: Unterminated string literal

      at failureErrorWithLog (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:1467:15)
      at node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:736:50
      at responseCallbacks.<computed> (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:603:9)
      at handleIncomingPacket (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:658:12)
      at Socket.readFromStdout (node_modules/.pnpm/esbuild@0.27.0/node_modules/esbuild/lib/main.js:581:7)

node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: Test Error for dev, exited with error 1, see admin-ui/utils.ts
    at ChildProcess.<anonymous> (/testbed/tests/admin-ui-tests/utils.ts:148:11)
    at ChildProcess.emit (node:events:524:28)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)

Node.js v20.19.6
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: Test Error for dev, exited with error 1, see admin-ui/utils.ts
    at ChildProcess.<anonymous> (/testbed/tests/admin-ui-tests/utils.ts:148:11)
    at ChildProcess.emit (node:events:524:28)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)

Node.js v20.19.6
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: Test Error for dev, exited with error 1, see admin-ui/utils.ts
    at ChildProcess.<anonymous> (/testbed/tests/admin-ui-tests/utils.ts:148:11)
    at ChildProcess.emit (node:events:524:28)
    at Process.ChildProcess._handle.onexit (node:internal/child_process:293:12)
    at Process.callbackTrampoline (node:internal/async_hooks:130:17)

Node.js v20.19.6
FAIL tests/admin-ui-tests/live-reloading.test.ts
  ● Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/.pnpm/jest-worker@29.7.0/node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)



>>>>> Tests Timed Out: 1800 seconds exceeded