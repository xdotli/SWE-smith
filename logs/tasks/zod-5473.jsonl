{"repo": "colinhacks/zod", "pull_number": 5473, "instance_id": "colinhacks__zod-5473", "issue_numbers": [], "base_commit": "a43295dd4c3b8a425f9ea93d55790a1347368993", "patch": "diff --git a/packages/zod/src/v4/core/util.ts b/packages/zod/src/v4/core/util.ts\nindex 948a02c8b2..b067a34dbd 100644\n--- a/packages/zod/src/v4/core/util.ts\n+++ b/packages/zod/src/v4/core/util.ts\n@@ -199,7 +199,7 @@ export function assertNotEqual<A, B>(val: AssertNotEqual<A, B>): AssertNotEqual<\n export function assertIs<T>(_arg: T): void {}\n \n export function assertNever(_x: never): never {\n-  throw new Error();\n+  throw new Error(\"Unexpected value in exhaustive check\");\n }\n export function assert<T>(_: any): asserts _ is T {}\n \n", "test_patch": "diff --git a/packages/zod/src/v3/tests/complex.test.ts b/packages/zod/src/v3/tests/complex.test.ts\nindex 7807b2b11f..1d0303320f 100644\n--- a/packages/zod/src/v3/tests/complex.test.ts\n+++ b/packages/zod/src/v3/tests/complex.test.ts\n@@ -1,4 +1,4 @@\n-import { test } from \"vitest\";\n+import { expect, test } from \"vitest\";\n import * as z from \"zod/v3\";\n \n const crazySchema = z.object({\n@@ -40,7 +40,7 @@ const crazySchema = z.object({\n // });\n \n test(\"parse\", () => {\n-  crazySchema.parse({\n+  const input = {\n     tuple: [\"asdf\", 1234, true, null, undefined, \"1234\"],\n     merged: { k1: \"asdf\", k2: 12 },\n     union: [\"asdf\", 12, \"asdf\", 12, \"asdf\", 12],\n@@ -52,5 +52,19 @@ test(\"parse\", () => {\n     nonstrict: { points: 1234 },\n     numProm: Promise.resolve(12),\n     lenfun: (x: string) => x.length,\n-  });\n+  };\n+\n+  const result = crazySchema.parse(input);\n+\n+  // Verify the parsed result structure\n+  expect(result.tuple).toEqual(input.tuple);\n+  expect(result.merged).toEqual(input.merged);\n+  expect(result.union).toEqual(input.union);\n+  expect(result.array).toEqual(input.array);\n+  expect(result.sumMinLength).toEqual(input.sumMinLength);\n+  expect(result.intersection).toEqual(input.intersection);\n+  expect(result.enum).toEqual(input.enum);\n+  expect(result.nonstrict).toEqual(input.nonstrict);\n+  expect(result.numProm).toBeInstanceOf(Promise);\n+  expect(typeof result.lenfun).toBe(\"function\");\n });\ndiff --git a/packages/zod/src/v3/tests/function.test.ts b/packages/zod/src/v3/tests/function.test.ts\nindex a0f03bb5c1..9a9e193bf5 100644\n--- a/packages/zod/src/v3/tests/function.test.ts\n+++ b/packages/zod/src/v3/tests/function.test.ts\n@@ -10,7 +10,8 @@ const func1 = z.function(args1, returns1);\n \n test(\"function parsing\", () => {\n   const parsed = func1.parse((arg: any) => arg.length);\n-  parsed(\"asdf\");\n+  const result = parsed(\"asdf\");\n+  expect(result).toBe(4);\n });\n \n test(\"parsed function fail 1\", () => {\n@@ -226,8 +227,11 @@ test(\"allow extra parameters\", () => {\n test(\"params and returnType getters\", () => {\n   const func = z.function().args(z.string()).returns(z.string());\n \n-  func.parameters().items[0].parse(\"asdf\");\n-  func.returnType().parse(\"asdf\");\n+  const paramResult = func.parameters().items[0].parse(\"asdf\");\n+  expect(paramResult).toBe(\"asdf\");\n+\n+  const returnResult = func.returnType().parse(\"asdf\");\n+  expect(returnResult).toBe(\"asdf\");\n });\n \n test(\"inference with transforms\", () => {\ndiff --git a/packages/zod/src/v3/tests/nan.test.ts b/packages/zod/src/v3/tests/nan.test.ts\nindex e24567abca..ce1214eb86 100644\n--- a/packages/zod/src/v3/tests/nan.test.ts\n+++ b/packages/zod/src/v3/tests/nan.test.ts\n@@ -6,8 +6,11 @@ import * as z from \"zod/v3\";\n const schema = z.nan();\n \n test(\"passing validations\", () => {\n-  schema.parse(Number.NaN);\n-  schema.parse(Number(\"Not a number\"));\n+  const result1 = schema.parse(Number.NaN);\n+  expect(Number.isNaN(result1)).toBe(true);\n+\n+  const result2 = schema.parse(Number(\"Not a number\"));\n+  expect(Number.isNaN(result2)).toBe(true);\n });\n \n test(\"failing validations\", () => {\n", "problem_statement": "", "hints_text": "", "created_at": "2025-11-23T09:41:28Z"}
